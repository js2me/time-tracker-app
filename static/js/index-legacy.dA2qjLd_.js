System.register(["./entry-legacy.h_Atiseb.js"],(function(e,t){"use strict";var n,r,a,o,i,s,l,c,u,d,f,p,m,v,h,g,x,y,b,w,j,k,S,N,C,E,M,R,D,A,O,P,I,_,T,z,L,F,V,H,q,B,K,W,U,$,G,Z,X,Y,J,Q,ee,te,ne,re,ae,oe,ie,se,le,ce,ue,de,fe;return{setters:[e=>{n=e.c,r=e.s,a=e.w,o=e.r,i=e.j,s=e.a,l=e.b,c=e.$,u=e.d,d=e.e,f=e.h,p=e.m,m=e.f,v=e.g,h=e.i,g=e.p,x=e.k,y=e.t,b=e.l,w=e.n,j=e.B,k=e.o,S=e.q,N=e.u,C=e.v,E=e.x,M=e.y,R=e._,D=e.z,A=e.A,O=e.C,P=e.D,I=e.E,_=e.F,T=e.G,z=e.H,L=e.I,F=e.J,V=e.K,H=e.L,q=e.M,B=e.N,K=e.O,W=e.P,U=e.Q,$=e.R,G=e.S,Z=e.T,X=e.U,Y=e.V,J=e.W,Q=e.X,ee=e.Y,te=e.Z,ne=e.a0,re=e.a1,ae=e.a2,oe=e.a3,ie=e.a4,se=e.a5,le=e.a6,ce=e.a7,ue=e.a8,de=e.a9,fe=e.aa}],execute:function(){
/**
       * @license lucide-react v0.321.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */
const t=n("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),pe=n("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),me=n("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ve=n("CircleFadingPlus",[["path",{d:"M12 2a10 10 0 0 1 7.38 16.75",key:"175t95"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M2.5 8.875a10 10 0 0 0-.5 3",key:"1vce0s"}],["path",{d:"M2.83 16a10 10 0 0 0 2.43 3.4",key:"o3fkw4"}],["path",{d:"M4.636 5.235a10 10 0 0 1 .891-.857",key:"1szpfk"}],["path",{d:"M8.644 21.42a10 10 0 0 0 7.631-.38",key:"9yhvd4"}]]),he=n("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ge=n("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),xe=n("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ye=n("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),be=n("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),we=n("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),je=Object.freeze(Object.defineProperty({__proto__:null,skip:!0},Symbol.toStringTag,{value:"Module"}));
/**
       * @license lucide-react v0.321.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */e("homePageModel",je);var ke={},Se={};function Ne(e,t){for(var n in e)t(e[n],n)}function Ce(e,t){e.forEach(t)}function Ee(e,t,n){if(!e)throw Error((n?n+": ":"")+t)}function Me(e,t){var n=Xe(e).meta||{};Nt={id:Xe(e).id,parent:Nt,value:e,template:n.template||Et(),sidRoot:n.sidRoot||Nt&&Nt.sidRoot,meta:n};try{return t()}finally{Ct("region"),Nt=nt(Nt)}}function Re(e){var t=void 0===e?{}:e,n=t.node,r=void 0===n?[]:n,a=t.parent,o=t.child,i=void 0===o?t.to||t.target:o,s=t.scope,l=void 0===s?{}:s,c=t.meta,u=void 0===c?{}:c,d=t.family,f=void 0===d?{type:"regular"}:d,p=t.regional,m=Dt(void 0===a?t.from||t.source:a),v=Dt(f.links),h=Dt(f.owners),g=[];Ce(r,(function(e){return e&&xt(g,e)}));var x={id:kt(),seq:g,next:Dt(i),meta:u,scope:l,family:{type:f.type||"crosslink",links:v,owners:h}};return Ce(v,(function(e){return xt(Ye(e),x)})),Ce(h,(function(e){return xt(Je(e),x)})),Ce(m,(function(e){return xt(e.next,x)})),p&&Nt&&Rt(et(Nt),[x]),x}function De(e,t,n){var r,a=vn,o=null,i=rn;if(e.target&&(t=e.params,n=e.defer,r=e.meta,a="page"in e?e.page:a,e.stack&&(o=e.stack),i=rt(e)||i,e=e.target),i&&rn&&i!==rn&&(rn=null),Array.isArray(e))for(var s=0;s<e.length;s++)ln("pure",a,Xe(e[s]),o,t[s],i,r);else ln("pure",a,Xe(e),o,t,i,r);if(!n||fn){var l,c,u,d,f,p,m={isRoot:fn,currentPage:vn,scope:rn,isWatch:pn,isPure:mn};fn=0;for(var v=function(){var e=d.idx,t=d.stack,n=d.type;u=t.node,vn=f=t.page,rn=rt(t),f?p=f.reg:rn&&(p=rn.reg);var r=!!f,a=!!rn,o={fail:0,scope:u.scope};l=c=0;for(var i=e;i<u.seq.length&&!l;i++){var s=u.seq[i];if(s.order){var v=s.order,h=v.priority,g=v.barrierID,x=g?f?f.fullID+"_"+g:g:0;if(i!==e||n!==h)return g?dn.has(x)||(dn.add(x),cn(i,t,h,g)):cn(i,t,h,0),"continue|kernelLoop";g&&dn.delete(x)}switch(s.type){case"mov":var y=s.data,b=void 0;switch(y.from){case"stack":b=et(t);break;case"a":case"b":b=t[y.from];break;case"value":b=y.store;break;case"store":if(p&&!p[y.store.id])if(r){var w=xn(f,y.store.id);t.page=f=w,w?p=w.reg:a?(wn(rn,y.store,0,1,y.softRead),p=rn.reg):p=void 0}else a&&wn(rn,y.store,0,1,y.softRead);b=Yt(p&&p[y.store.id]||y.store)}switch(y.to){case"stack":t.value=b;break;case"a":case"b":t[y.to]=b;break;case"store":yn(f,rn,y.target,0).current=b}break;case"compute":var j=s.data;if(j.fn){pn="watch"===u.meta.op,mn=j.pure;var k=j.safe?(0,j.fn)(et(t),o.scope,t):jn(o,j.fn,t);j.filter?c=!k:t.value=k,pn=m.isWatch,mn=m.isPure}}l=o.fail||c}if(an&&an(t,o),!l){var S=et(t),N=rt(t);if(Ce(u.next,(function(e){ln("child",f,e,t,S,N)})),N){u.meta.needFxCounter&&ln("child",f,N.fxCount,t,S,N),u.meta.storeChange&&ln("child",f,N.storeChange,t,S,N),u.meta.warnSerialize&&ln("child",f,N.warnSerializeNode,t,S,N);var C=N.additionalLinks[u.id];C&&Ce(C,(function(e){ln("child",f,e,t,S,N)}))}}};d=sn();)v();fn=m.isRoot,vn=m.currentPage,rn=rt(m)}}function Ae(e,t){void 0===t&&(t="combine");var n=t+"(",r="",a=0;return Ne(e,(function(e){a<25&&(null!=e&&(n+=r,n+=st(e)?it(e).fullName:e.toString()),a+=1,r=", ")})),n+")"}function Oe(e,t){var n,r,a=e;if(t){var o=it(t);0===e.length?(n=o.path,r=o.fullName):(n=o.path.concat([e]),r=0===o.fullName.length?e:o.fullName+"/"+e)}else n=0===e.length?[]:[e],r=e;return{shortName:a,fullName:r,path:n}}function Pe(e,t){if(!t)return e;if(!t.name&&!t.named&&!t.loc)return e;var n="["+e+"]",r=t.named||t.name;r&&(n+=" unit '"+r+"'");var a=t.loc;return!r&&a&&(n+=" ("+a.file+":"+a.line+":"+a.column+")"),n}function Ie(e,t){var n=t?e:e[0];It(n);var r=n.or,a=n.and;if(a){var o=t?a:a[0];if(At(o)&&"and"in o){var i=Ie(a,t);e=i[0],r=Object.assign({},r,i[1])}else e=a}return[e,r]}function _e(e){var t=function(){return e()};return t.unsubscribe=function(){return e()},t}function Te(e){var t=Et();if(t){for(var n=t.handlers[e],r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];if(n)return n.apply(void 0,[t].concat(a))}}function ze(e,t){var n=kn({or:t,and:"string"==typeof e?{name:e}:e}),r=Pe("event",n),a=function e(t){Ee(!at(e,"derived"),"call of derived event is not supported, use createEvent instead",r),Ee(!mn,"unit call from pure function is not supported, use operators like sample instead",r);for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return vn?function(e,t,n,r){var a=vn,o=null;if(t)for(o=vn;o&&o.template!==t;)o=nt(o);gn(o);var i=e.create(n,r);return gn(a),i}(e,o,t,a):e.create(t,a)},o=Et(),i=Object.assign(a,{graphite:Re({meta:On(n.actualOp||"event",a,n),regional:1}),create:function(e){return De({target:a,params:e,scope:rn}),e},watch:function(e){return Dn(a,e)},map:function(e){return Pn(a,"map",e,[Gt()])},filter:function(e){return Pn(a,"filter",e.fn?e:e.fn,[Gt(Vt,1)])},filterMap:function(e){return Pn(a,"filterMap",e,[Gt(),Ut((function(e){return!Pt(e)}),1)])},prepend:function(e){Ee(a.targetable,".prepend of derived event is not supported, call source event instead",r);var t=ze("* → "+a.shortName,{parent:nt(a)});return Te("eventPrepend",Xe(t)),Rn(t,a,[Gt()],"prepend",e),An(a,t),t}});return null!=n&&n.domain&&n.domain.hooks.event(i),ot(i,"id",i.graphite.id),Ct(i.graphite),i}function Le(e,t,n,r,a){return Tt(n,a+" "+t,"first argument"),Ee(Ot(r),"second argument should be a function",a),yt(!at(e,"derived"),t+" in derived store",t+" in store created via createStore",a),Ce(Array.isArray(n)?n:[n],(function(t){e.off(t),tt(e).set(t,Mn(_n(t,e,"on",Ft,r)))})),e}function Fe(e,t){var n=kn(t),r=Xt(e),a=Pe("store",n),o=ze({named:"updates",derived:1});Te("storeBase",r);var i=r.id,s="skipVoid"in n,l=s&&!n.skipVoid;yt(!(s&&n.skipVoid),"{skipVoid: true}","updateFilter",a);var c={subscribers:new Map,updates:o,defaultState:e,stateRef:r,getState:function(){var e,t=r;if(vn){for(var n=vn;n&&!n.reg[i];)n=nt(n);n&&(e=n)}return!e&&rn&&(wn(rn,r,1),e=rn),e&&(t=e.reg[i]),Yt(t)},setState:function(e){return De({target:c,params:e,defer:1,scope:rn})},reset:function(){Ee(c.targetable,".reset of derived store is not supported",a);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ce(t,(function(e){return Le(c,".reset",e,(function(){return c.defaultState}),a)})),c},on:function(e,t){return Ee(c.targetable,".on of derived store is not supported",a),Le(c,".on",e,t,a)},off:function(e){var t=tt(c).get(e);return t&&(t(),tt(c).delete(e)),c},map:function(e,t){var n,a;At(e)&&(n=e,e=e.fn);var o=c.getState(),i=Pt(o);Et()?a=null:(!i||i&&l)&&(a=e(o));var s=Fe(a,Object.assign({name:c.shortName+" → *",derived:1},t,{and:n})),u=_n(c,s,"map",Vt,e);return Jt(Qe(s),{type:"map",fn:e,from:r}),Qe(s).noInit=1,Te("storeMap",r,u),s},watch:function(e,t){if(yt(!t,"watch second argument","sample",a),!t||!st(e)){var n=Dn(c,e);return Te("storeWatch",r,e)||e(c.getState()),n}return Ee(Ot(t),"second argument should be a function",a),e.watch((function(e){return t(c.getState(),e)}))}},u=On("store",c,n),d=c.defaultConfig.updateFilter;c.graphite=Re({scope:{state:r,fn:d},node:[Ut((function(e,t,n){return n.scope&&!n.scope.reg[r.id]&&(n.b=1),e})),$t(r),Ut((function(e,t,n){var r=n.a,o=n.b,i=Pt(e);return i&&!s&&console.error(a+": "+In),(i&&l||!i)&&(e!==r||o)}),1),d&&Gt(Lt,1),Bt({from:"stack",target:r})],child:o,meta:Object.assign({},u,{defaultState:e}),regional:1}),ot(c,"id",c.graphite.id),ot(c,"rootStateRefId",i);var f=at(c,"serialize"),p=at(c,"derived"),m="ignore"===f,v=at(c,"sid");v&&(ot(c,"storeChange",1),r.sid=v),v||m||p||ot(c,"warnSerialize",1);var h=Pt(e);return Ee(p||!h||h&&l,In,a),p&&h&&!s&&console.error(a+": "+In),Rt(c,[o]),null!=n&&n.domain&&n.domain.hooks.store(c),p||(c.reinit=ze({named:"reinit"}),c.reset(c.reinit)),r.meta=c.graphite.meta,Ct(c.graphite),c}function Ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a,o,i=Ie(t);t=i[0];var s,l,c,u=Pe("combine",o=i[1]),d=t[t.length-1],f=!ct(d)&&At(d),p=f&&d,m=f?t[t.length-2]:d;if(Ot(m)?(a=t.slice(0,f?-2:-1),r=m):a=t,1===a.length){var v=a[0];ct(v)||(s=v,l=1)}if(!l&&(s=a,r)){c=1;var h=r;r=function(e){return h.apply(void 0,e)}}return Ee(At(s),u+": shape should be an object"),Tn(Array.isArray(s),!c,s,o,r,p)}function He(){var e={};return e.req=new Promise((function(t,n){e.rs=t,e.rj=n})),e.req.catch((function(){})),e}function qe(e,t){void 0===t&&(t={});var n=kn(Ot(e)?{handler:e}:e,t),r=Pe("effect",n),a=ze(Ot(e)?{handler:e}:e,Object.assign({},t,{actualOp:"effect"})),o=Xe(a);ot(o,"op",a.kind="effect"),a.use=function(e){return Ee(Ot(e),".use argument should be a function",r),d.scope.handler=e,a},a.use.getCurrent=function(){return d.scope.handler};var i=a.finally=ze({named:"finally",derived:1}),s=a.done=i.filterMap({named:"done",fn:function(e){if("done"===e.status)return{params:e.params,result:e.result}}}),l=a.fail=i.filterMap({named:"fail",fn:function(e){if("fail"===e.status)return{params:e.params,error:e.error}}}),c=a.doneData=s.map({named:"doneData",fn:function(e){return e.result}}),u=a.failData=l.map({named:"failData",fn:function(e){return e.error}}),d=Re({scope:{handler:a.defaultConfig.handler||function(){return Ee(0,"no handler used in "+a.compositeName.fullName)}},node:[Ut((function(e,t,n){var r=t.handler,o=rt(n);if(o){var i=o.handlers.unitMap.get(a)||o.handlers.sidMap[a.sid];i&&(r=i)}return e.handler=r,e}),0,1),Ut((function(e,t,n){if(!t.runnerFn||t.runnerFn(e,null,n)){var r=e.params,a=e.req,o=e.handler,s=e.args,l=void 0===s?[r]:s,c=Ln(r,a,1,i,n),u=Ln(r,a,0,i,n),d=zn(o,u,l),f=d[1];d[0]&&(At(f)&&Ot(f.then)?f.then(c,u):c(f))}}),0,1)],meta:{op:"fx",fx:"runner"}});o.scope.runner=d,xt(o.seq,Ut((function(e,t,n){var r=t.runner,a=nt(n)?{params:e,req:{rs:function(){},rj:function(){}}}:e;return n.meta||(n.meta={fxID:St()}),De({target:r,params:a,defer:1,scope:rt(n),meta:n.meta}),a.params}))),a.create=function(e){var t=He(),n={params:e,req:t};if(rn&&!pn){var r=rn;t.req.finally((function(){hn(r)})).catch((function(){}))}return De({target:a,params:n,scope:rn}),t.req};var f=a.inFlight=Fe(0,{serialize:"ignore",named:(at(a,"name")||a.graphite.id)+".inFlight"}).on(a,(function(e){return e+1})).on(i,(function(e){return e-1})).map({fn:function(e){return e},named:"inFlight"});ot(i,"needFxCounter","dec"),ot(a,"needFxCounter",1);var p=a.pending=f.map({fn:function(e){return e>0},named:"pending"});return Rt(a,[i,s,l,c,u,p,f]),null!=n&&n.domain&&n.domain.hooks.effect(a),a}function Be(e,t){var n=Pe("merge",t);Tt(e,n,"first argument");var r=ze({name:Ae(e,"merge"),derived:1,and:t});return Rn(e,r,[],"merge"),r}function Ke(e,t){var n=0;return Ce(Vn,(function(r){r in e&&(Ee(null!=e[r],Hn(t,r)),n=1)})),n}function We(e,t,n){var r=[];!function e(a){ht(r,a)||(xt(r,a),"store"===at(a,"op")&&(n||at(a,"sid"))&&t(a,at(a,"sid")),Ce(a.next,e),Ce(Ye(a),e),Ce(Je(a),e))}(e)}function Ue(e,t){var n=Array.isArray(e)?new Map(e):e,r=new Map,a=0;if(n instanceof Map){var o={};return Ce(n,(function(e,n){Ee(st(n),"Map key should be a unit"),t&&t(n,e),n.sid&&(n.sid in o&&(a=1),o[n.sid]=e),r.set(n,e)})),{sidMap:o,unitMap:r,hasSidDoubles:a}}return{sidMap:n,unitMap:r}}function $e(e,t){return ct(t)?[Zt.mov({store:t.stateRef,to:"stack"})].concat(e):e}Object.defineProperty(Se,"__esModule",{value:1});for(var Ge,Ze="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",Xe=function(e){return e.graphite||e},Ye=function(e){return e.family.owners},Je=function(e){return e.family.links},Qe=function(e){return e.stateRef},et=function(e){return e.value},tt=function(e){return e.subscribers},nt=function(e){return e.parent},rt=function(e){return e.scope},at=function(e,t){return Xe(e).meta[t]},ot=function(e,t,n){return Xe(e).meta[t]=n},it=function(e){return e.compositeName},st=function(e){return(Ot(e)||At(e))&&"kind"in e},lt=function(e){return function(t){return st(t)&&t.kind===e}},ct=lt("store"),ut=lt("event"),dt=lt("effect"),ft=function(e){return st(e)&&!!e.targetable},pt=lt("domain"),mt=lt("scope"),vt={__proto__:null,unit:st,store:ct,event:ut,effect:dt,targetable:ft,domain:pt,scope:mt,attached:function(e){return dt(e)&&1==at(e,"attached")}},ht=function(e,t){return e.includes(t)},gt=function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},xt=function(e,t){return e.push(t)},yt=function(e,t,n,r){return!e&&console.error((r?r+": ":"")+t+" is deprecated"+(n?", use "+n+" instead":""))},bt=function(){var e=0;return function(){return""+ ++e}},wt=bt(),jt=bt(),kt=bt(),St=bt(),Nt=null,Ct=function(e){Ge&&Ge(e,Nt)},Et=function(){return Nt&&Nt.template},Mt=function(e){return e&&Nt&&Nt.sidRoot&&(e=Nt.sidRoot+"|"+e),e},Rt=function(e,t){var n=Xe(e);Ce(t,(function(e){var t=Xe(e);"domain"!==n.family.type&&(t.family.type="crosslink"),xt(Ye(t),n),xt(Je(n),t)}))},Dt=function(e){return void 0===e&&(e=[]),(Array.isArray(e)?e:[e]).flat().map(Xe)},At=function(e){return"object"==typeof e&&null!==e},Ot=function(e){return"function"==typeof e},Pt=function(e){return void 0===e},It=function(e){return Ee(At(e)||Ot(e),"expect first argument be an object")},_t=function(e,t,n,r){return Ee(!(!At(e)&&!Ot(e)||!("family"in e)&&!("graphite"in e)),t+": expect "+n+" to be a unit (store, event or effect)"+r)},Tt=function(e,t,n){Array.isArray(e)?Ce(e,(function(e,r){return _t(e,t,r+" item of "+n,"")})):_t(e,t,n," or array of units")},zt=function(e,t,n){return void 0===n&&(n="target"),Ce(Dt(t),(function(t){return Ee(!at(t,"derived"),e+': derived unit in "'+n+'" is not supported, use createStore/createEvent instead"')}))},Lt=function(e,t,n){return(0,t.fn)(e,n.a)},Ft=function(e,t,n){return(0,t.fn)(n.a,e)},Vt=function(e,t){return(0,t.fn)(e)},Ht=function(e,t,n,r){var a={id:jt(),type:e,data:t};return n&&(a.order={priority:n},r&&(a.order.barrierID=++qt)),a},qt=0,Bt=function(e){var t=e.from,n=e.target,r=e.to;return Ht("mov",{from:void 0===t?"store":t,store:e.store,to:void 0===r?n?"store":"stack":r,target:n},e.priority,e.batch)},Kt=function(e){var t=e.safe,n=e.filter,r=e.pure;return Ht("compute",{fn:e.fn,safe:void 0===t?0:t,filter:void 0===n?0:n,pure:void 0===r?0:r},e.priority,e.batch)},Wt=function(e){return Kt({fn:e.fn,priority:"effect"})},Ut=function(e,t,n){return Kt({fn:e,safe:1,filter:t,priority:n&&"effect"})},$t=function(e,t,n){return Bt({store:e,to:t?"stack":"a",priority:n&&"sampler",batch:1})},Gt=function(e,t){return void 0===e&&(e=Vt),Kt({fn:e,pure:1,filter:t})},Zt={mov:Bt,compute:Kt,filter:function(e){return Kt({fn:e.fn,filter:1,pure:e.pure})},run:Wt},Xt=function(e){return{id:jt(),current:e,initial:e}},Yt=function(e){return e.current},Jt=function(e,t){e.before||(e.before=[]),xt(e.before,t)},Qt=null,en=function e(t,n){return t?n?((t.v.type===n.v.type&&t.v.id>n.v.id||un(t.v.type)>un(n.v.type))&&(r=t,t=n,n=r),r=e(t.r,n),t.r=t.l,t.l=r,t):t:n;var r},tn=[],nn=0;nn<6;)xt(tn,{first:null,last:null,size:0}),nn+=1;var rn,an,on,sn=function(){for(var e=0;e<6;e++){var t=tn[e];if(t.size>0){if(3===e||4===e){t.size-=1;var n=Qt.v;return Qt=en(Qt.l,Qt.r),n}1===t.size&&(t.last=null);var r=t.first;return t.first=r.r,t.size-=1,r.v}}},ln=function(e,t,n,r,a,o,i){return cn(0,{a:null,b:null,node:n,parent:r,value:a,page:t,scope:o,meta:i},e,0)},cn=function(e,t,n,r){var a=un(n),o=tn[a],i={v:{idx:e,stack:t,type:n,id:r},l:null,r:null};3===a||4===a?Qt=en(Qt,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},un=function(e){switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},dn=new Set,fn=1,pn=0,mn=0,vn=null,hn=function(e){rn=e},gn=function(e){vn=e},xn=function(e,t){if(e){for(;e&&!e.reg[t];)e=e.parent;if(e)return e}return null},yn=function(e,t,n,r){var a=xn(e,n.id);return a?a.reg[n.id]:t?(wn(t,n,r),t.reg[n.id]):n},bn=function(e){return e},wn=function e(t,n,r,a,o){var i=t.reg;if(!i[n.id]){var s=n.sid,l={id:n.id,current:n.initial,meta:n.meta};if(l.id in t.values.idMap)l.current=t.values.idMap[l.id];else if(s&&s in t.values.sidMap&&!(s in t.sidIdMap)){var c,u=null==n||null===(c=n.meta)||void 0===c?void 0:c.serialize;l.current=(t.fromSerialize&&"ignore"!==u&&(null==u?void 0:u.read)||bn)(t.values.sidMap[s])}else if(n.before&&!o){var d=0,f=r||!n.noInit||a;Ce(n.before,(function(n){switch(n.type){case"map":var o=n.from;if((o||n.fn)&&(o&&e(t,o,r,a),f)){var s=o&&i[o.id].current;l.current=n.fn?n.fn(s):s}break;case"field":e(t,n.from,r,a),d||(d=1,l.current=Array.isArray(l.current)?[].concat(l.current):Object.assign({},l.current)),f&&(l.current[n.field]=i[i[n.from.id].id].current)}}))}s&&(t.sidIdMap[s]=n.id),i[n.id]=l}},jn=function(e,t,n){try{return t(et(n),e.scope,n)}catch(Gn){console.error(Gn),e.fail=1,e.failReason=Gn}},kn=function e(t,n){return void 0===n&&(n={}),At(t)&&(e(t.or,n),Ne(t,(function(e,t){Pt(e)||"or"===t||"and"===t||(n[t]=e)})),e(t.and,n)),n},Sn=function(e,t){gt(e.next,t),gt(Ye(e),t),gt(Je(e),t)},Nn=function e(t,n,r){var a;t.next.length=0,t.seq.length=0,t.scope=null;for(var o=Je(t);a=o.pop();)Sn(a,t),(n||r&&"sample"!==t.meta.op||"crosslink"===a.family.type)&&e(a,n,"on"!==a.meta.op&&r);for(o=Ye(t);a=o.pop();)Sn(a,t),r&&"crosslink"===a.family.type&&e(a,n,"on"!==a.meta.op&&r)},Cn=function(e){return e.clear()},En=function(e,t){var n=(void 0===t?{}:t).deep,r=0;if(e.ownerSet&&e.ownerSet.delete(e),ct(e))Cn(tt(e));else if(pt(e)){r=1;var a=e.history;Cn(a.events),Cn(a.effects),Cn(a.stores),Cn(a.domains)}Nn(Xe(e),!!n,r)},Mn=function(e){return _e((function(){return En(e)}))},Rn=function(e,t,n,r,a){return Re({node:n,parent:e,child:t,scope:{fn:a},meta:{op:r},family:{owners:[e,t],links:t},regional:1})},Dn=function(e,t){return Ee(Ot(t),".watch argument should be a function"),Mn(Re({scope:{fn:t},node:[Wt({fn:Vt})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))},An=function(e,t,n){void 0===n&&(n="event"),nt(e)&&nt(e).hooks[n](t)},On=function(e,t,n){var r=kn(n),a="domain"===e,o=wt(),i=r.sid,s=void 0===i?null:i,l=r.named,c=void 0===l?null:l,u=r.domain,d=r.parent,f=void 0===d?void 0===u?null:u:d,p=c||r.name||(a?"":o),m=Oe(p,f),v={op:t.kind=e,name:t.shortName=p,sid:t.sid=Mt(s),named:c,unitId:t.id=o,serialize:r.serialize,derived:r.derived,config:r};if(t.targetable=!r.derived,t.parent=f,t.compositeName=m,t.defaultConfig=r,t.getType=function(){return yt(0,"getType","compositeName.fullName"),m.fullName},!a){t.subscribe=function(e){return It(e),t.watch(Ot(e)?e:function(t){return e.next&&e.next(t)})},t[Ze]=function(){return t};var h=Et();h&&(v.nativeTemplate=h)}return v},Pn=function(e,t,n,r){var a;At(n)&&(a=n,n=n.fn);var o=ze({name:e.shortName+" → *",derived:1,and:a});return Rn(e,o,r,t,n),o},In="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",_n=function(e,t,n,r,a){var o=Qe(t),i=Bt({store:o,to:"a",priority:"read"});"map"===n&&(i.data.softRead=1);var s=[i,Gt(r)];return Te("storeOnMap",o,s,ct(e)&&Qe(e)),Rn(e,t,s,n,a)},Tn=function(e,t,n,r,a,o){var i=Pe("combine",r),s=e?function(e){return[].concat(e)}:function(e){return Object.assign({},e)},l=e?[]:{},c=s(l),u=Xt(c),d=Xt(1);u.type=e?"list":"shape",u.noInit=1,Te("combineBase",u,d);var f=Fe(c,Object.assign({name:Ae(n),derived:1},o,{and:r})),p=Qe(f);p.noInit=1,ot(f,"isCombine",1);var m=$t(u);m.order={priority:"barrier"};var v=Bt({store:p,to:"b",priority:"read"});v.data.softRead=1;var h=[Ut((function(e,t,n){return n.scope&&!n.scope.reg[u.id]&&(n.c=1),e})),m,Bt({store:d,to:"b"}),Ut((function(e,n,r){var a=n.key;if(r.c||e!==r.a[a])return t&&r.b&&(r.a=s(r.a)),r.a[a]=e,1}),1),Bt({from:"a",target:u}),Bt({from:"value",store:0,target:d}),Bt({from:"value",store:1,target:d,priority:"barrier",batch:1}),$t(u,1,1),a&&Gt(),v];if(Ne(n,(function(e,t){if(!ct(e))return Ee(!st(e)&&!Pt(e),"combine expects a store in a field "+t,i),void(c[t]=l[t]=e);l[t]=e.defaultState,c[t]=e.getState();var n=Rn(e,f,h,"combine",a);n.scope.key=t;var r=Qe(e);Jt(u,{type:"field",field:t,from:r}),Te("combineField",r,n)})),f.defaultShape=n,Jt(p,{type:"map",from:u,fn:a}),!Et())if(a){var g=a(c);!Pt(g)||o&&"skipVoid"in o||console.error(i+": "+In),p.current=g,p.initial=g,f.defaultState=g}else f.defaultState=l;return f},zn=function(e,t,n){try{return[1,e.apply(void 0,n)]}catch(Gn){return t(Gn),[0,null]}},Ln=function(e,t,n,r,a){return function(o){De({target:[r,Fn],params:[n?{status:"done",params:e,result:o}:{status:"fail",params:e,error:o},{value:o,fn:n?t.rs:t.rj}],defer:1,page:a.page,scope:a.scope,meta:a.meta})}},Fn=Re({node:[Wt({fn:function(e){return(0,e.fn)(e.value)}})],meta:{op:"fx",fx:"sidechain"}}),Vn=["source","clock","target"],Hn=function(e,t){return e+": "+t+" should be defined"},qn=function(e,t,n,r,a,o,i,s,l,c,u,d){var f=Pe(e,s),p=!!a;Ee(!Pt(n)||!Pt(t),Hn(f,"either source or clock"));var m=0;Pt(n)?m=1:st(n)||(n=Ve(n)),Pt(t)?t=n:(Tt(t,f,"clock"),Array.isArray(t)&&(t=Be(t))),m&&(n=t),s||i||(i=n.shortName);var v="none";(u||r)&&(st(r)?v="unit":(Ee(Ot(r),"`filter` should be function or unit"),v="fn")),a?(Tt(a,f,"target"),zt(f,a)):"none"===v&&c&&ct(n)&&ct(t)?a=Fe(o?o(Yt(Qe(n)),Yt(Qe(t))):Yt(Qe(n)),{name:i,sid:d,or:s}):(a=ze({name:i,derived:1,or:s}),Te("sampleTarget",Xe(a)));var h=Xt(),g=[];if("unit"===v){var x=Kn(r,a,t,h,e),y=x[0];x[2]||g.push.apply(g,Bn(x[1])),g.push.apply(g,Bn(y))}var b=[];if(m)l&&b.push($t(h,1,1));else{var w=Kn(n,a,t,h,e),j=w[0];w[2]||b.push.apply(b,Bn(w[1])),b.push($t(j,1,l))}var k=Rn(t,a,[Te("sampleSourceLoader"),Bt({from:"stack",target:h})].concat(b,g,[$t(h),"fn"===v&&Gt((function(e,t,n){return r(e,n.a)}),1),o&&Gt(Lt),Te("sampleSourceUpward",p)]),e,o);return Rt(n,[k]),Object.assign(k.meta,s,{joint:1}),a},Bn=function(e){return[$t(e),Ut((function(e,t,n){return n.a}),1)]},Kn=function(e,t,n,r,a){var o=ct(e),i=o?Qe(e):Xt(),s=Xt(o);return o||Re({parent:e,node:[Bt({from:"stack",target:i}),Bt({from:"value",store:1,target:s})],family:{owners:[e,t,n],links:t},meta:{op:a},regional:1}),Te("sampleSource",s,i,r),[i,s,o]},Wn=function(e,t,n,r){var a=e[t];a&&De({target:a,params:Array.isArray(a)?a.map((function(){return n})):n,defer:1,stack:r})},Un=function(e){return!e.node.meta.isCombine||e.parent&&"combine"!==e.parent.node.meta.op},$n=function(e){return e};function Gn(e,t){return t.displayName=e,t}function Zn(e,t){var n=or.is.unit(e),r={};n?r={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?r=e["@@unitShape"]():cr("expect @@unitShape to be a function"):r=e;var a=Array.isArray(r),o=lr.useRef({stale:1,justSubscribed:0,scope:t}),i=lr.useMemo((function(){o.current.stale=1;var e=Array.isArray(r)?[]:{},a=[],i=[],s=[],l=[];for(var c in r)if({}.hasOwnProperty.call(r,c)){var u=r[c];or.is.unit(u)||cr("expect useUnit "+(n?"argument":'value in key "'+c+'"')+" to be a unit"),or.is.event(u)||or.is.effect(u)?(e[c]=t?or.scopeBind(u,{scope:t}):u,s.push(c),l.push(u)):(e[c]=null,a.push(c),i.push(u))}return[e,a,i,s,l]}),[o,t].concat(Object.keys(r),Object.values(r))),s=i[0],l=i[1],c=i[2],u=i[3],d=i[4],f=lr.useRef({value:s,storeKeys:l,eventKeys:u,eventValues:d}),p=lr.useCallback((function(e){var n=o.current;return n.justSubscribed=1,or.createWatch({unit:c,fn:function(){n.stale||(n.stale=1,e())},scope:t,batch:1})}),[c,t,f,o]),m=lr.useCallback((function(){var e,r=f.current,i=o.current,p=0,m=r.value,v=r.storeKeys,h=r.eventKeys,g=r.eventValues,x=t!==i.scope;if(i.stale||i.justSubscribed||x){p=!i.justSubscribed||x,e=a?[].concat(s):Object.assign({},s),v.length===l.length&&h.length===u.length||(p=1);for(var y=0;y<l.length;y++){var b=fr(c[y],t),w=l[y];p||(p=v.includes(w)?m[w]!==b:1),e[w]=b}for(var j=0;j<u.length;j++){var k=d[j],S=u[j];p||(p=h.includes(S)?g[h.indexOf(S)]!==k:1)}}return p&&(r.value=e),r.storeKeys=l,r.eventKeys=u,r.eventValues=d,i.stale=0,i.justSubscribed=!p,i.scope=t,n?r.value.unit:r.value}),[p,c,d,t,f,o]);return ir.useSyncExternalStore(p,m,m)}function Xn(e,t){var n,r,a,o,i=e[0],s=e[1],l=pr;if(s)n=s,a=i,o=[];else{n=i.fn,a=i.store,o=i.keys,r=i.defaultValue;var c=i.updateFilter;l=void 0===c?pr:c}or.is.store(a)||cr("useStoreMap expects a store"),Array.isArray(o)||cr("useStoreMap expects an array as keys"),"function"!=typeof n&&cr("useStoreMap expects a function");var u=lr.useCallback((function(e){return or.createWatch({unit:a,fn:e,scope:t})}),[a,t]),d=lr.useCallback((function(){return fr(a,t)}),[a,t]),f=lr.useRef(),p=lr.useRef(),m=lr.useRef(o);return sr.useSyncExternalStoreWithSelector(u,d,d,(function(e){if(f.current!==e||!function(e,t){if(!e||!t||e.length!==t.length)return 0;for(var n=1,r=0;r<e.length;r++)if(e[r]!==t[r]){n=0;break}return n}(m.current,o)){var t=n(e,o);void 0===t&&void 0!==r&&(t=r),f.current=e,m.current=o,void 0!==t&&(p.current=t)}return p.current}),(function(e,t){return!l(t,e)}))}function Yn(e,t,n){void 0===t&&(t={});var r=Zn({open:e.open,close:e.close,set:e.set},n),a=r.open,o=r.close,i=r.set,s=lr.useMemo((function(){return{open:a,close:o,set:i}}),[e,a]),l=lr.useRef({value:null,count:0});ur((function(){return s.open(l.current.value),function(){return s.close(l.current.value)}}),[s]),function(e,t){if(e===t)return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return 0;for(var a=0;a<n.length;a++){var o=n[a];if(e[o]!==t[o])return 0}return 1}return 0}(l.current.value,t)||(l.current.value=t,l.current.count+=1),ur((function(){s.set(l.current.value)}),[l.current.count])}function Jn(e){var t=lr.useContext(mr);return e&&!t&&cr("No scope found, consider adding <Provider> to app root"),t}function Qn(e,t){return function(e,t){dr(1,"useStore","useUnit"),or.is.store(e)||cr("expect useStore argument to be a store");var n=lr.useCallback((function(n){return or.createWatch({unit:e,fn:n,scope:t})}),[e,t]),r=lr.useCallback((function(){return fr(e,t)}),[e,t]);return ir.useSyncExternalStore(n,r,r)}(e,Jn(null==t?void 0:t.forceScope))}function er(e,t){function n(e){var n=lr.useRef(e),a=Qn(r);ur((function(){return o({props:n.current,state:r.getState()}),function(){i({props:n.current,state:r.getState()})}}),[]);var s=t(e,a);return n.current=e,s}var r;vr("createComponent","@effector/reflect"),or.is.store(e)?r=e:"object"==typeof e&&null!==e?r=or.combine(e):cr("shape should be a store or object with stores");var a="Unknown";r&&r.shortName&&(a=r.shortName);var o=or.createEvent(),i=or.createEvent();return n.mounted=o,n.unmounted=i,Gn(a+".View",n)}function tr(e,t){var n,r=t?e:e[0];!function(e){if(!e)throw Error("expect first argument be an object")}(hr(n=r)||function(e){return"function"==typeof e}(n));var a=r.or,o=r.and;if(o){var i=t?o:o[0];if(hr(i)&&"and"in i){var s=tr(o,t);e=s[0],a=Object.assign({},a,s[1])}else e=o}return[e,a]}function nr(e){function t(e){return a(t,e,Jn()),null}var n=e.domain,r=e.defaultState,a=e.hook,o=gr({or:e.maybeConfig,and:e.mainConfig}),i=(n?n.compositeName.fullName+"/":"")+(o.name||"gate"),s=or.createEvent({name:i+".set",sid:o.sid?o.sid+"|set":void 0}),l=or.createEvent({name:i+".open",sid:o.sid?o.sid+"|open":void 0}),c=or.createEvent({name:i+".close",sid:o.sid?o.sid+"|close":void 0}),u=or.createStore(Boolean(0),{name:i+".status",serialize:"ignore"}).on(l,(function(){return Boolean(1)})).on(c,(function(){return Boolean(0)})),d=or.createStore(r,{name:i+".state",sid:o.sid}).on(s,(function(e,t){return t})).on(l,(function(e,t){return t})).reset(c);if(n){var f=n.hooks;or.launch({target:[f.store,f.store,f.event,f.event,f.event],params:[u,d,l,c,s]})}return t.open=l,t.close=c,t.status=u,t.state=d,t.set=s,Gn("Gate:"+i,t)}function rr(e,t){var n,r,a,o=tr(t&&hr(n=t[0])&&(n.and||n.or)?t:[{and:t}]),i=o[0],s=i[0],l=i[1],c={},u={},d=o[1];return"string"==typeof s?(u={name:s},hr(a=l)&&"sid"in a||(c=l||{})):function(e){return hr(e)&&("domain"in e||"defaultState"in e||"name"in e)}(s)&&(u=s,c=s.defaultState||{},r=s.domain),{hook:e,domain:r,defaultState:c,mainConfig:u,maybeConfig:d}}Se.allSettled=function(e,t){var n=void 0===t?{}:t,r=n.scope,a=n.params;if(!st(e))return Promise.reject(new Error("first argument should be unit"));if(!(dt(e)||ut(e)||ct(e)||mt(e)))return Promise.reject(new Error("first argument accepts only effects, events, stores or scopes"));mt(e)&&(r=e);var o=He();o.parentFork=rn;var i=r.fxCount;xt(i.scope.defers,o);var s=[],l=[];return mt(e)||(xt(s,e),xt(l,dt(e)?{params:a,req:{rs:function(e){o.value={status:"done",value:e}},rj:function(e){o.value={status:"fail",value:e}}}}:a)),xt(s,i),xt(l,null),De({target:s,params:l,scope:r}),o.req},Se.attach=function(e){var t,n,r=Ie(e,1);e=r[0];var a=Pe("attach",n=r[1]),o=e.source,i=e.effect,s=e.mapParams,l=e.domain;dt(i)&&Ee(Pt(l),"`domain` can only be used with a plain function",a);var c=qe(e,n);ot(c,"attached",1);var u,d,f=Xe(c).scope.runner,p=function(e,t,n){var r,a=e.params,i=e.req,l=e.handler,u=c.finally,d=Ln(a,i,0,u,n),f=n.a,p=dt(l),m=1;if(s){var v=zn(s,d,[a,f]);m=v[0],r=v[1]}else r=o&&p?f:a;if(m){if(!p)return e.args=[f,r],1;De({target:l,params:{params:r,req:{rs:Ln(a,i,1,u,n),rj:d}},page:n.page,defer:1,meta:n.meta})}};o?(f.scope.runnerFn=p,ct(o)?Rt(d=o,[c]):(d=Ve(o),Rt(c,[d])),u=[Ut((function(e){return e}),0,1),$t(Qe(d))],delete f.seq[1].order):u=[Ut(p,1,1)],(t=f.seq).splice.apply(t,[1,0].concat(u)),c.use(i);var m=nt(i);return m&&(Object.assign(it(c),Oe(c.shortName,m)),c.defaultConfig.parent=m),An(i,c,"effect"),c},Se.clearNode=En,Se.combine=Ve,Se.createApi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ie(t),a=r[0],o=a[0],i=a[1],s=r[1],l={};return Ne(i,(function(e,t){var n=l[t]=ze(t,{parent:nt(o),config:s});o.on(n,e),An(o,n)})),l},Se.createDomain=function e(t,n){var r=kn({or:n,and:"string"==typeof t?{name:t}:t}),a=Re({family:{type:"domain"},regional:1,parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent)}),o={history:{},graphite:a,hooks:{}};a.meta=On("domain",o,{parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent),or:Object.assign({},r,{derived:1})}),Ne({Event:ze,Effect:qe,Store:Fe,Domain:e},(function(e,t){var n=t.toLowerCase(),r=ze({named:"on"+t});o.hooks[n]=r;var a=new Set;o.history[n+"s"]=a,r.create=function(e){return De(r,e),e},xt(Xe(r).seq,Ut((function(e,t,n){return n.scope=null,e}))),r.watch((function(e){Rt(o,[e]),a.add(e),e.ownerSet||(e.ownerSet=a),nt(e)||(e.parent=o)})),Rt(o,[r]),o["onCreate"+t]=function(e){return Ce(a,e),r.watch(e)},o["create"+t]=o[n]=function(t,n){var a=kn({and:n,or:t});return null!=a&&a.domain?e(t,n):r(e(t,{parent:o,or:a}))}}));var i=nt(o);return i&&Ne(o.hooks,(function(e,t){return Rn(e,i.hooks[t])})),null!=r&&r.domain&&r.domain.hooks.domain(o),o},Se.createEffect=qe,Se.createEvent=ze,Se.createNode=Re,Se.createStore=Fe,Se.createWatch=function(e){var t=e.unit,n=e.fn,r=e.scope,a=e.batch,o=[Zt.run({fn:function(e){return n(e)}})];a&&o.unshift(Zt.compute({priority:"sampler",batch:1})),ct(t)&&o.unshift(Zt.mov({store:t.stateRef,to:"stack"}));var i=Array.isArray(t)?t:[t];if(r){var s=[],l=r.additionalLinks;return i.forEach((function(e){var t=l[e.graphite.id]||[];l[e.graphite.id]=t;var n=Re({node:$e(o,e),meta:{watchOp:e.kind}});t.push(n),s.push((function(){var e=t.indexOf(n);-1!==e&&t.splice(e,1),En(n)}))})),_e((function(){s.forEach((function(e){return e()}))}))}var c=Re({node:o,parent:i,family:{owners:i}});return _e((function(){En(c)}))},Se.fork=function(e,t){var n,r=e;pt(e)&&(yt(0,"fork(domain)","fork()"),n=e,r=t);var a=function(e){var t=Re({scope:{defers:[],inFlight:0,fxID:0},node:[Ut((function(e,t,n){n.parent?"dec"===n.parent.node.meta.needFxCounter?t.inFlight-=1:(t.inFlight+=1,t.fxID+=1):t.fxID+=1})),Kt({priority:"sampler",batch:1}),Ut((function(e,t){var n=t.defers,r=t.fxID;t.inFlight>0||0===n.length||Promise.resolve().then((function(){t.fxID===r&&Ce(n.splice(0,n.length),(function(e){hn(e.parentFork),e.rs(e.value)}))}))}),0,1)]}),n=Re({node:[Ut((function(e,t,n){var r=n.parent;if(r){var a=r.node;if(Un(r)){var o=rt(n),i=a.meta.sid;o.sidIdMap[i]=a.scope.state.id,o.values.sidMap[i]=e;var s=a.meta.serialize;s&&o.sidSerializeSettings.set(i,"ignore"===s?{ignore:1}:{ignore:0,write:s.write})}}}))]}),r=Re({node:[Ut((function(e,t,n){var r=rt(n);r&&n.parent&&Un(n.parent)&&(r.warnSerialize=1)}))]}),a={cloneOf:e,reg:{},values:{sidMap:{},idMap:{}},sidIdMap:{},sidSerializeSettings:new Map,getState:function(e){if("current"in e)return yn(vn,a,e,0).current;var t=Xe(e);return yn(vn,a,t.scope.state,1).current},kind:"scope",graphite:Re({family:{type:"domain",links:[t,n,r]},meta:{unit:"fork"},scope:{forkInFlightCounter:t}}),additionalLinks:{},handlers:{sidMap:{},unitMap:new Map},fxCount:t,storeChange:n,warnSerializeNode:r};return a}(n);if(r){if(r.values){var o=Ue(r.values,(function(e){return Ee(ct(e)&&ft(e),"Values map can contain only writable stores as keys")})),i=o.unitMap,s=o.hasSidDoubles;Object.assign(a.values.sidMap,o.sidMap),Ce(i,(function(e,t){if(a.values.idMap[t.stateRef.id]=e,"ignore"===at(t,"serialize")){var n=at(t,"sid");a.sidSerializeSettings.set(n,{ignore:1})}})),a.fromSerialize=!(Array.isArray(r.values)||r.values instanceof Map),a.hasSidDoubles=s}r.handlers&&(yt(r.handlers instanceof Map||Array.isArray(r.handlers),"object with handlers","array"),a.handlers=Ue(r.handlers,(function(e){return Ee(dt(e),"Handlers map can contain only effects as keys")})))}return a},Se.forward=function(e){var t="forward",n=Ie(e,1),r=n[0],a=r.from,o=r.to,i=n[1],s=Pe(t,i);return yt(0,t,"sample",s),Tt(a,s,'"from"'),Tt(o,s,'"to"'),zt(s,o,"to"),Mn(Re({parent:a,child:o,meta:{op:t,config:i},family:{},regional:1}))},Se.fromObservable=function(e){It(e);var t=Ze in e?e[Ze]():e;Ee(t.subscribe,"expect observable to have .subscribe");var n=ze(),r=Mn(n);return t.subscribe({next:n,error:r,complete:r}),n},Se.guard=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ie(t),a=r[0],o=a[0],i=a[1],s=r[1],l=Pe("guard",s);return yt(0,"guard","sample",l),i||(o=(i=o).source),Ke(i,l),qn("guard",i.clock,o,i.filter,i.target,null,i.name,s,!i.greedy,0,1)},Se.hydrate=function(e,t){var n=t.values;Ee(At(n),"values property should be an object");var r=Ue(n),a=r.sidMap,o=r.unitMap,i=Object.getOwnPropertyNames(a),s={};Ce(o,(function(e,t){s[t.stateRef.id]=t}));var l,c,u,d=[],f=[];mt(e)?(u=1,Ee((l=e).cloneOf,"scope should be created from domain"),yt(0,"hydrate(fork(domain), { values })","fork({ values })"),c=Xe(l.cloneOf)):pt(e)?(yt(0,"hydrate(domain, { values })","fork({ values })"),c=Xe(e)):Ee(0,"first argument of hydrate should be domain or scope"),We(c,(function(e,t){if(t&&ht(i,t)){xt(d,e);var n=at(e,"serialize");n&&"ignore"!==n&&(a[t]=n.read(a[t])),xt(f,a[t])}else e.scope.state.id in s&&(xt(d,e),xt(f,o.get(s[e.scope.state.id])))}),1),De({target:d,params:f,scope:l}),u&&Object.assign(l.values.sidMap,a)},Se.is=vt,Se.launch=De,Se.merge=Be,Se.restore=function(e,t,n){var r=Pe("restore",n);if(Ee(!ct(e),"restore($store) is not supported",r),ut(e)||dt(e)){var a=nt(e),o=Fe(t,{parent:a,name:e.shortName,and:n});return Rn(dt(e)?e.doneData:e,o),a&&a.hooks.store(o),o}var i=Array.isArray(e)?[]:{};return Ne(e,(function(e,t){return i[t]=ct(e)?e:Fe(e,{name:t})})),i},Se.sample=function(){for(var e,t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o,i,s=Ie(r),l=s[0],c=l[0],u=l[1],d=l[2],f=s[1],p=1,m=Pe("sample",f);return Pt(u)&&At(c)&&Ke(c,m)&&(u=c.clock,d=c.fn,"batch"in c?p=c.batch:(yt(!("greedy"in c),"greedy in sample","batch",m),p=!c.greedy),i=c.filter,e=c.target,t=c.name,o=c.sid,c=c.source),qn("sample",u,c,i,e,d,t,f,p,1,0,o)},Se.scopeBind=function(e,t){var n=void 0===t?{}:t,r=n.scope;Ee(r||rn||n.safe,"scopeBind: scope not found");var a=r||rn;return function(t){function n(){hn(i)}var r,o=0,i=rn;hn(a);try{r=e(t)}catch(Yn){r=Yn,o=1}if(n(),o)throw r;return r instanceof Promise&&r.then(n,n),r}},Se.serialize=function(e,t){void 0===t&&(t={}),e.warnSerialize&&console.error("There is a store without sid in this scope, its value is omitted"),Ee(!e.hasSidDoubles,"duplicate sid found in this scope");var n=t.ignore?t.ignore.map((function(e){return e.sid})):[],r={};return Ne(e.values.sidMap,(function(t,a){var o;if(!ht(n,a)){var i=e.sidIdMap[a],s=null!==(o=e.sidSerializeSettings.get(a))&&void 0!==o?o:{ignore:0,write:$n};s.ignore||(r[a]=(0,s.write)(i&&i in e.reg?e.reg[i].current:t))}})),"onlyChanges"in t&&(yt(0,"onlyChanges"),t.onlyChanges||(Ee(e.cloneOf,"scope should be created from domain"),We(Xe(e.cloneOf),(function(t,a){a in r||ht(n,a)||at(t,"isCombine")||"ignore"===at(t,"serialize")||(r[a]=e.getState(t))})))),r},Se.setGraphInspector=function(e){Ge=e},Se.setInspector=function(e){an=e},Se.setStoreName=function(e,t){e.shortName=t,Object.assign(it(e),Oe(t,nt(e)))},Se.split=function(){for(var e,t,n="split",r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=Ie(a),s=i[0],l=s[0],c=s[1],u=i[1],d=Pe(n,u),f=!c;f&&(e=l.cases,c=l.match,t=l.clock,l=l.source);var p=ct(c),m=!st(c)&&Ot(c),v=!p&&!m&&At(c);Ee(st(l),"source must be a unit",d),e||(e={}),f?Ne(e,(function(e,t){return zt(d,e,"cases."+t)})):(Ee(v,"match should be an object",d),Ne(c,(function(t,n){return e[n]=ze({derived:1,named:"cases."+n,and:u})})),e.__=ze({derived:1,named:"cases.__",and:u}));var h,g=new Set([].concat(l,t||[],Object.values(e))),x=Object.keys(p||m?e:c);if(p||m)p&&g.add(c),h=[p&&$t(Qe(c),0,1),Kt({safe:p,filter:1,pure:!p,fn:function(e,t,n){var r=String(p?n.a:c(e));Wn(t,ht(x,r)?r:"__",e,n)}})];else if(v){var y=Xt({});y.type="shape";var b,w=[];Ne(c,(function(e,t){if(st(e)){b=1,xt(w,t),g.add(e);var n=Rn(e,[],[$t(y),Ut((function(e,n,r){return r.a[t]=e}))]);if(ct(e)){y.current[t]=e.getState();var r=Qe(e);Jt(y,{from:r,field:t,type:"field"}),Te("splitMatchStore",r,n)}}})),b&&Te("splitBase",y),h=[b&&$t(y,0,1),Gt((function(e,t,n){for(var r=0;r<x.length;r++){var a=x[r];if(ht(w,a)?n.a[a]:c[a](e))return void Wn(t,a,e,n)}Wn(t,"__",e,n)}),1)]}else Ee(0,"expect match to be unit, function or object");var j=Re({meta:{op:n},parent:t?[]:l,scope:e,node:h,family:{owners:Array.from(g)},regional:1});if(t&&qn(n,t,l,null,j,null,n,u,0,0,0),!f)return e},Se.step=Zt,Se.version="23.1.0",Se.withFactory=function(e){var t=e.sid,n=e.name,r=e.loc,a=e.method,o=e.fn;return Me(Re({meta:{sidRoot:Mt(t),sid:t,name:n,loc:r,method:a,type:"factory"}}),o)},Se.withRegion=Me,Object.defineProperty(ke,"__esModule",{value:1});var ar=o,or=Se,ir=r,sr=a,lr=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(ar),cr=function(e){throw Error(e)},ur="undefined"!=typeof window?lr.useLayoutEffect:lr.useEffect,dr=function(e,t,n){ar.useEffect((function(){e&&console.error(t+" is deprecated"+(n?", prefer "+n+" instead":""))}),[e,t,n])},fr=function(e,t){return t?t.getState(e):e.getState()},pr=function(e,t){return e!==t},mr=lr.createContext(null),vr=function(e,t){console.error(e+" is deprecated"+(t?", use "+t+" instead":""))},hr=function(e){return"object"==typeof e&&null!==e},gr=function e(t,n){return void 0===n&&(n={}),hr(t)&&(e(t.or,n),function(e){for(var t in e)a=t,function(e){return void 0===e}(r=e[t])||"or"===a||"and"===a||(n[a]=r);var r,a}(t),e(t.and,n)),n};ke.Provider=mr.Provider,ke.connect=function(e){return vr("connect","useUnit"),function(t){var n=e;return"function"!=typeof e&&(n=t,t=e),Gn("Connect("+(n.displayName||n.name||"Unknown")+")",(function(e){return lr.createElement(n,Object.assign({},e,Qn(t)))}))}},ke.createComponent=er,ke.createGate=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(rr(Yn,t))},ke.createStoreConsumer=function(e){return vr("createStoreConsumer","useUnit"),er(e,(function(e,t){return(0,e.children)(t)}))},ke.useEvent=function(e,t){return function(e,t){if(dr(1,"useEvent","useUnit"),!t)return e;var n=or.is.unit(e)||"object"!=typeof e?{event:e}:e;return lr.useMemo((function(){if(or.is.unit(e))return or.scopeBind(e,{scope:t});var n=Array.isArray(e)?[]:{};for(var r in e)n[r]=or.scopeBind(e[r],{scope:t});return n}),[t].concat(Object.keys(n),Object.values(n)))}(e,Jn(null==t?void 0:t.forceScope))},ke.useGate=function(e,t,n){return void 0===t&&(t={}),Yn(e,t,Jn(null==n?void 0:n.forceScope))},ke.useList=function(e,t,n){return function(e,t,n){var r,a,o,i=[];"object"==typeof t&&null!==t?(t.keys&&(i=t.keys),r=t.fn,a=t.getKey,o=t.placeholder):r=t,or.is.store(e)||cr("expect useList first argument to be a store"),"function"!=typeof r&&cr("expect useList's renderItem to be a function"),Array.isArray(i)||cr("expect useList's keys to be an array");var s=lr.useMemo((function(){var t=Gn((e.shortName||"Unknown")+".Item",(function(t){var r=t.index,a=t.keys;if(l.current[1])return l.current[0](t.value,t.keyVal);var o=Xn([{store:e,keys:[r].concat(a),fn:function(e,t){return e[t[0]]}}],n);return l.current[0](o,r)}));return lr.memo(t)}),[e,n,!!a]),l=lr.useRef([r,a]);l.current=[r,a];var c=lr.useMemo((function(){return i}),i);if(a){var u=Zn(e,n);return 0===u.length&&o?o:u.map((function(e){var t=l.current[1](e);return lr.createElement(s,{keyVal:t,key:t,keys:c,value:e})}))}var d=Xn([{store:e,keys:[e],fn:function(e){return e.length}}],n);return 0===d&&o?o:Array.from({length:d},(function(e,t){return lr.createElement(s,{index:t,key:t,keys:c})}))}(e,t,Jn(null==n?void 0:n.forceScope))},ke.useProvidedScope=function(){return Jn()||null},ke.useStore=Qn,ke.useStoreMap=function(e,t){return Xn([e,t],Jn(null==e?void 0:e.forceScope))},on=ke.useUnit=function(e,t){return Zn(e,Jn(null==t?void 0:t.forceScope))};const xr=o.forwardRef((({className:e,...t},n)=>i.jsx("div",{ref:n,className:s("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})));xr.displayName="Card",o.forwardRef((({className:e,...t},n)=>i.jsx("div",{ref:n,className:s("flex flex-col space-y-1.5 p-6",e),...t}))).displayName="CardHeader",o.forwardRef((({className:e,...t},n)=>i.jsx("h3",{ref:n,className:s("text-2xl font-semibold tracking-tight",e),...t}))).displayName="CardTitle",o.forwardRef((({className:e,...t},n)=>i.jsx("p",{ref:n,className:s("text-sm text-muted-foreground",e),...t}))).displayName="CardDescription",o.forwardRef((({className:e,...t},n)=>i.jsx("div",{ref:n,className:s("p-6 pt-0",e),...t}))).displayName="CardContent",o.forwardRef((({className:e,...t},n)=>i.jsx("div",{ref:n,className:s("flex items-center p-6 pt-0",e),...t}))).displayName="CardFooter";const yr=o.forwardRef((({className:e,...t},n)=>i.jsx("textarea",{className:s("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t})));yr.displayName="Textarea";const br=({leftContent:e,rightContent:t,...n})=>{const r=l(c),a=u(d.$value,(e=>(null==e?void 0:e.rate)||0));return i.jsxs("span",{...n,children:[e,f.format.dateTime(r,{format:"time",asTime:!0}),i.jsx("span",{className:"pl-1 text-xs font-medium text-reverse/60",children:`(${+(a*(r/p(1,"hour"))).toFixed(2)} руб.)`}),t]})},wr=({className:e})=>{const t=on(d),n=on(m),r=o.useRef(null),a=on({finishActiveLog:v,continueActiveLog:h,pauseActiveLog:g,createActiveLog:x});return o.useEffect((()=>{n.value&&r.current&&n.value.meta!==r.current.value&&(r.current.value=n.value.meta)}),[!!n.value]),i.jsxs(xr,{className:y("flex flex-col items-center justify-center gap-2 p-4",e),children:[i.jsxs("h1",{className:"inline-flex w-full flex-1 text-xl font-semibold",children:["Трекер",n.value?` (${n.value.projectName})`:""]}),i.jsx(yr,{ref:r,onChange:e=>{n.value&&n.update({meta:e.target.value})},className:"!h-[40px] bg-card",placeholder:n.value?"Чем занимаешься?":"Чем будешь заниматься?"}),i.jsx("div",{className:"mt-4 flex w-full flex-row items-center gap-2",children:n.value?i.jsxs(i.Fragment,{children:[i.jsx(br,{className:b("relative mr-auto flex items-center text-2xl font-bold",{"text-reverse":"paused"===n.value.status,"text-destructive":"paused"!==n.value.status}),title:"Сохранение лога начинается от 1 минуты",style:{opacity:Math.max(w(n.value.spentTime,0,p(1,"min"))/p(1,"min"),.5)},leftContent:"active"===n.value.status&&i.jsx(i.Fragment,{children:i.jsxs("span",{className:"relative mr-2 flex h-4 w-4",children:[i.jsx("span",{className:"absolute block h-full w-full animate-ping rounded-full bg-destructive opacity-75"}),i.jsx("span",{className:"relative block h-4 w-4 rounded-full bg-destructive"})]})})}),i.jsx(j,{variant:(n.value.status,"destructive"),disabled:"active"===n.value.status,onClick:()=>{a.finishActiveLog(),r.current&&(r.current.value="")},children:"ЗАВЕРШИТЬ"}),"paused"===n.value.status?i.jsx(j,{style:{width:150},variant:"positive",onClick:a.continueActiveLog,children:"ПРОДОЛЖИТЬ"}):i.jsx(j,{style:{width:150},variant:"outline",className:"bg-card",onClick:a.pauseActiveLog,children:"ПАУЗА"})]}):i.jsx(j,{disabled:!t.value,className:"ml-auto",variant:"positive",onClick:()=>{var e,n;a.createActiveLog({meta:(null===(e=r.current)||void 0===e?void 0:e.value)||"",lastTickDate:null,startDate:(new Date).toISOString(),spentTime:0,projectName:(null===(n=t.value)||void 0===n?void 0:n.name)||"",status:"active"})},children:"ПРИСТУПИТЬ К РАБОТЕ"})})]})};function jr(e,[t,n]){return Math.min(n,Math.max(t,e))}const kr=o.createContext(void 0),Sr=[" ","Enter","ArrowUp","ArrowDown"],Nr=[" ","Enter"],Cr="Select",[Er,Mr,Rr]=function(e){const t=e+"CollectionProvider",[n,r]=k(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=e+"CollectionSlot",s=e+"CollectionItemSlot",l="data-radix-collection-item";return[{Provider:e=>{const{scope:t,children:n}=e,r=S.useRef(null),o=S.useRef(new Map).current;return S.createElement(a,{scope:t,itemMap:o,collectionRef:r},n)},Slot:S.forwardRef(((e,t)=>{const{scope:n,children:r}=e,a=o(i,n),s=N(t,a.collectionRef);return S.createElement(C,{ref:s},r)})),ItemSlot:S.forwardRef(((e,t)=>{const{scope:n,children:r,...a}=e,i=S.useRef(null),c=N(t,i),u=o(s,n);return S.useEffect((()=>(u.itemMap.set(i,{ref:i,...a}),()=>{u.itemMap.delete(i)}))),S.createElement(C,{[l]:"",ref:c},r)}))},function(t){const n=o(e+"CollectionConsumer",t),r=S.useCallback((()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${l}]`)),r=Array.from(n.itemMap.values()).sort(((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current)));return r}),[n.collectionRef,n.itemMap]);return r},r]}(Cr),[Dr,Ar]=k(Cr,[Rr,E]),Or=E(),[Pr,Ir]=Dr(Cr),[_r,Tr]=Dr(Cr),zr=o.forwardRef(((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Or(n),s=Ir("SelectTrigger",n),l=s.disabled||r,c=N(t,s.onTriggerChange),u=Mr(n),[d,f,p]=ha((e=>{const t=u().filter((e=>!e.disabled)),n=t.find((e=>e.value===s.value)),r=ga(t,e,n);void 0!==r&&s.onValueChange(r.value)})),m=()=>{l||(s.onOpenChange(!0),p())};return o.createElement(M,R({asChild:!0},i),o.createElement(D.button,R({type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ma(s.value)?"":void 0},a,{ref:c,onClick:A(a.onClick,(e=>{e.currentTarget.focus()})),onPointerDown:A(a.onPointerDown,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&(m(),s.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)},e.preventDefault())})),onKeyDown:A(a.onKeyDown,(e=>{const t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||f(e.key),t&&" "===e.key||Sr.includes(e.key)&&(m(),e.preventDefault())}))})))})),Lr=o.forwardRef(((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...l}=e,c=Ir("SelectValue",n),{onValueNodeHasChildrenChange:u}=c,d=void 0!==i,f=N(t,c.onValueNodeChange);return O((()=>{u(d)}),[u,d]),o.createElement(D.span,R({},l,{ref:f,style:{pointerEvents:"none"}}),ma(c.value)?o.createElement(o.Fragment,null,s):i)})),Fr=o.forwardRef(((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return o.createElement(D.span,R({"aria-hidden":!0},a,{ref:t}),r||"▼")})),Vr="SelectContent",Hr=o.forwardRef(((e,t)=>{const n=Ir(Vr,e.__scopeSelect),[r,a]=o.useState();if(O((()=>{a(new DocumentFragment)}),[]),!n.open){const t=r;return t?P.createPortal(o.createElement(Br,{scope:e.__scopeSelect},o.createElement(Er.Slot,{scope:e.__scopeSelect},o.createElement("div",null,e.children))),t):null}return o.createElement(Wr,R({},e,{ref:t}))})),qr=10,[Br,Kr]=Dr(Vr),Wr=o.forwardRef(((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:v,hideWhenDetached:h,avoidCollisions:g,...x}=e,y=Ir(Vr,n),[b,w]=o.useState(null),[j,k]=o.useState(null),S=N(t,(e=>w(e))),[E,M]=o.useState(null),[D,O]=o.useState(null),P=Mr(n),[F,V]=o.useState(!1),H=o.useRef(!1);o.useEffect((()=>{if(b)return I(b)}),[b]),_();const q=o.useCallback((e=>{const[t,...n]=P().map((e=>e.ref.current)),[r]=n.slice(-1),a=document.activeElement;for(const o of e){if(o===a)return;if(null==o||o.scrollIntoView({block:"nearest"}),o===t&&j&&(j.scrollTop=0),o===r&&j&&(j.scrollTop=j.scrollHeight),null==o||o.focus(),document.activeElement!==a)return}}),[P,j]),B=o.useCallback((()=>q([E,b])),[q,E,b]);o.useEffect((()=>{F&&B()}),[F,B]);const{onOpenChange:K,triggerPointerDownPosRef:W}=y;o.useEffect((()=>{if(b){let e={x:0,y:0};const t=t=>{var n,r,a,o;e={x:Math.abs(Math.round(t.pageX)-(null!==(n=null===(r=W.current)||void 0===r?void 0:r.x)&&void 0!==n?n:0)),y:Math.abs(Math.round(t.pageY)-(null!==(a=null===(o=W.current)||void 0===o?void 0:o.y)&&void 0!==a?a:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():b.contains(n.target)||K(!1),document.removeEventListener("pointermove",t),W.current=null};return null!==W.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}}),[b,K,W]),o.useEffect((()=>{const e=()=>K(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[K]);const[U,$]=ha((e=>{const t=P().filter((e=>!e.disabled)),n=t.find((e=>e.ref.current===document.activeElement)),r=ga(t,e,n);r&&setTimeout((()=>r.ref.current.focus()))})),G=o.useCallback(((e,t,n)=>{const r=!H.current&&!n;(void 0!==y.value&&y.value===t||r)&&(M(e),r&&(H.current=!0))}),[y.value]),Z=o.useCallback((()=>null==b?void 0:b.focus()),[b]),X=o.useCallback(((e,t,n)=>{const r=!H.current&&!n;(void 0!==y.value&&y.value===t||r)&&O(e)}),[y.value]),Y="popper"===r?$r:Ur,J=Y===$r?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:v,hideWhenDetached:h,avoidCollisions:g}:{};return o.createElement(Br,{scope:n,content:b,viewport:j,onViewportChange:k,itemRefCallback:G,selectedItem:E,onItemLeave:Z,itemTextRefCallback:X,focusSelectedItem:B,selectedItemText:D,position:r,isPositioned:F,searchRef:U},o.createElement(T,{as:C,allowPinchZoom:!0},o.createElement(z,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:A(a,(e=>{var t;null===(t=y.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()}))},o.createElement(L,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},o.createElement(Y,R({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault()},x,J,{onPlaced:()=>V(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:A(x.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||$(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=P().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout((()=>q(t))),e.preventDefault()}}))}))))))})),Ur=o.forwardRef(((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=Ir(Vr,n),s=Kr(Vr,n),[l,c]=o.useState(null),[u,d]=o.useState(null),f=N(t,(e=>d(e))),p=Mr(n),m=o.useRef(!1),v=o.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:x,focusSelectedItem:y}=s,b=o.useCallback((()=>{if(i.trigger&&i.valueNode&&l&&u&&h&&g&&x){const e=i.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),n=i.valueNode.getBoundingClientRect(),a=x.getBoundingClientRect();if("rtl"!==i.dir){const r=a.left-t.left,o=n.left-r,i=e.left-o,s=e.width+i,c=Math.max(s,t.width),u=window.innerWidth-qr,d=jr(o,[qr,u-c]);l.style.minWidth=s+"px",l.style.left=d+"px"}else{const r=t.right-a.right,o=window.innerWidth-n.right-r,i=window.innerWidth-e.right-o,s=e.width+i,c=Math.max(s,t.width),u=window.innerWidth-qr,d=jr(o,[qr,u-c]);l.style.minWidth=s+"px",l.style.right=d+"px"}const o=p(),s=window.innerHeight-2*qr,c=h.scrollHeight,d=window.getComputedStyle(u),f=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),y=parseInt(d.borderBottomWidth,10),b=f+v+c+parseInt(d.paddingBottom,10)+y,w=Math.min(5*g.offsetHeight,b),j=window.getComputedStyle(h),k=parseInt(j.paddingTop,10),S=parseInt(j.paddingBottom,10),N=e.top+e.height/2-qr,C=s-N,E=g.offsetHeight/2,M=f+v+(g.offsetTop+E),R=b-M;if(M<=N){const e=g===o[o.length-1].ref.current;l.style.bottom="0px";const t=u.clientHeight-h.offsetTop-h.offsetHeight,n=M+Math.max(C,E+(e?S:0)+t+y);l.style.height=n+"px"}else{const e=g===o[0].ref.current;l.style.top="0px";const t=Math.max(N,f+h.offsetTop+(e?k:0)+E)+R;l.style.height=t+"px",h.scrollTop=M-N+h.offsetTop}l.style.margin=`${qr}px 0`,l.style.minHeight=w+"px",l.style.maxHeight=s+"px",null==r||r(),requestAnimationFrame((()=>m.current=!0))}}),[p,i.trigger,i.valueNode,l,u,h,g,x,i.dir,r]);O((()=>b()),[b]);const[w,j]=o.useState();O((()=>{u&&j(window.getComputedStyle(u).zIndex)}),[u]);const k=o.useCallback((e=>{e&&!0===v.current&&(b(),null==y||y(),v.current=!1)}),[b,y]);return o.createElement(Gr,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:k},o.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w}},o.createElement(D.div,R({},a,{ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}}))))})),$r=o.forwardRef(((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=qr,...i}=e,s=Or(n);return o.createElement(B,R({},s,i,{ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))})),[Gr,Zr]=Dr(Vr,{}),Xr="SelectViewport",Yr=o.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e,a=Kr(Xr,n),i=Zr(Xr,n),s=N(t,a.onViewportChange),l=o.useRef(0);return o.createElement(o.Fragment,null,o.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),o.createElement(Er.Slot,{scope:n},o.createElement(D.div,R({"data-radix-select-viewport":"",role:"presentation"},r,{ref:s,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:A(r.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=i;if(null!=r&&r.current&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*qr,a=parseFloat(n.style.minHeight),o=parseFloat(n.style.height),i=Math.max(a,o);if(i<r){const a=i+e,o=Math.min(r,a),s=a-o;n.style.height=o+"px","0px"===n.style.bottom&&(t.scrollTop=s>0?s:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop}))}))))})),[Jr,Qr]=Dr("SelectGroup"),ea=o.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e,a=Qr("SelectLabel",n);return o.createElement(D.div,R({id:a.id},r,{ref:t}))})),ta="SelectItem",[na,ra]=Dr(ta),aa=o.forwardRef(((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,l=Ir(ta,n),c=Kr(ta,n),u=l.value===r,[d,f]=o.useState(null!=i?i:""),[p,m]=o.useState(!1),v=N(t,(e=>{var t;return null===(t=c.itemRefCallback)||void 0===t?void 0:t.call(c,e,r,a)})),h=F(),g=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(""===r)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.createElement(na,{scope:n,value:r,disabled:a,textId:h,isSelected:u,onItemTextChange:o.useCallback((e=>{f((t=>{var n;return t||(null!==(n=null==e?void 0:e.textContent)&&void 0!==n?n:"").trim()}))}),[])},o.createElement(Er.ItemSlot,{scope:n,value:r,disabled:a,textValue:d},o.createElement(D.div,R({role:"option","aria-labelledby":h,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},s,{ref:v,onFocus:A(s.onFocus,(()=>m(!0))),onBlur:A(s.onBlur,(()=>m(!1))),onPointerUp:A(s.onPointerUp,g),onPointerMove:A(s.onPointerMove,(e=>{var t;a?null===(t=c.onItemLeave)||void 0===t||t.call(c):e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:A(s.onPointerLeave,(e=>{var t;e.currentTarget===document.activeElement&&(null===(t=c.onItemLeave)||void 0===t||t.call(c))})),onKeyDown:A(s.onKeyDown,(e=>{var t;""!==(null===(t=c.searchRef)||void 0===t?void 0:t.current)&&" "===e.key||(Nr.includes(e.key)&&g()," "===e.key&&e.preventDefault())}))}))))})),oa="SelectItemText",ia=o.forwardRef(((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=Ir(oa,n),l=Kr(oa,n),c=ra(oa,n),u=Tr(oa,n),[d,f]=o.useState(null),p=N(t,(e=>f(e)),c.onItemTextChange,(e=>{var t;return null===(t=l.itemTextRefCallback)||void 0===t?void 0:t.call(l,e,c.value,c.disabled)})),m=null==d?void 0:d.textContent,v=o.useMemo((()=>o.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},m)),[c.disabled,c.value,m]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=u;return O((()=>(h(v),()=>g(v))),[h,g,v]),o.createElement(o.Fragment,null,o.createElement(D.span,R({id:c.textId},i,{ref:p})),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?P.createPortal(i.children,s.valueNode):null)})),sa=o.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e;return ra("SelectItemIndicator",n).isSelected?o.createElement(D.span,R({"aria-hidden":!0},r,{ref:t})):null})),la="SelectScrollUpButton",ca=o.forwardRef(((e,t)=>{const n=Kr(la,e.__scopeSelect),r=Zr(la,e.__scopeSelect),[a,i]=o.useState(!1),s=N(t,r.onScrollButtonChange);return O((()=>{if(n.viewport&&n.isPositioned){const e=n.viewport;function t(){const t=e.scrollTop>0;i(t)}return t(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[n.viewport,n.isPositioned]),a?o.createElement(fa,R({},e,{ref:s,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null})),ua="SelectScrollDownButton",da=o.forwardRef(((e,t)=>{const n=Kr(ua,e.__scopeSelect),r=Zr(ua,e.__scopeSelect),[a,i]=o.useState(!1),s=N(t,r.onScrollButtonChange);return O((()=>{if(n.viewport&&n.isPositioned){const e=n.viewport;function t(){const t=e.scrollHeight-e.clientHeight,n=Math.ceil(e.scrollTop)<t;i(n)}return t(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[n.viewport,n.isPositioned]),a?o.createElement(fa,R({},e,{ref:s,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null})),fa=o.forwardRef(((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Kr("SelectScrollButton",n),s=o.useRef(null),l=Mr(n),c=o.useCallback((()=>{null!==s.current&&(window.clearInterval(s.current),s.current=null)}),[]);return o.useEffect((()=>()=>c()),[c]),O((()=>{var e;const t=l().find((e=>e.ref.current===document.activeElement));null==t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})}),[l]),o.createElement(D.div,R({"aria-hidden":!0},a,{ref:t,style:{flexShrink:0,...a.style},onPointerDown:A(a.onPointerDown,(()=>{null===s.current&&(s.current=window.setInterval(r,50))})),onPointerMove:A(a.onPointerMove,(()=>{var e;null===(e=i.onItemLeave)||void 0===e||e.call(i),null===s.current&&(s.current=window.setInterval(r,50))})),onPointerLeave:A(a.onPointerLeave,(()=>{c()}))}))})),pa=o.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e;return o.createElement(D.div,R({"aria-hidden":!0},r,{ref:t}))}));function ma(e){return""===e||void 0===e}const va=o.forwardRef(((e,t)=>{const{value:n,...r}=e,a=o.useRef(null),i=N(t,a),s=function(e){const t=o.useRef({value:e,previous:e});return o.useMemo((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}(n);return o.useEffect((()=>{const e=a.current,t=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(s!==n&&r){const t=new Event("change",{bubbles:!0});r.call(e,n),e.dispatchEvent(t)}}),[s,n]),o.createElement(V,{asChild:!0},o.createElement("select",R({},r,{ref:i,defaultValue:n})))}));function ha(e){const t=H(e),n=o.useRef(""),r=o.useRef(0),a=o.useCallback((e=>{const a=n.current+e;t(a),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout((()=>e("")),1e3))}(a)}),[t]),i=o.useCallback((()=>{n.current="",window.clearTimeout(r.current)}),[]);return o.useEffect((()=>()=>window.clearTimeout(r.current)),[]),[n,a,i]}function ga(e,t,n){const r=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,a=n?e.indexOf(n):-1;let o=(i=e,s=Math.max(a,0),i.map(((e,t)=>i[(s+t)%i.length])));var i,s;1===r.length&&(o=o.filter((e=>e!==n)));const l=o.find((e=>e.textValue.toLowerCase().startsWith(r.toLowerCase())));return l!==n?l:void 0}va.displayName="BubbleSelect";const xa=zr,ya=Fr,ba=e=>o.createElement(q,R({asChild:!0},e)),wa=Hr,ja=Yr,ka=ea,Sa=aa,Na=ia,Ca=sa,Ea=ca,Ma=da,Ra=pa,Da=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:p,required:m}=e,v=Or(t),[h,g]=o.useState(null),[x,y]=o.useState(null),[b,w]=o.useState(!1),j=function(e){const t=o.useContext(kr);return e||t||"ltr"}(u),[k=!1,S]=K({prop:r,defaultProp:a,onChange:i}),[N,C]=K({prop:s,defaultProp:l,onChange:c}),E=o.useRef(null),M=!h||Boolean(h.closest("form")),[R,D]=o.useState(new Set),A=Array.from(R).map((e=>e.props.value)).join(";");return o.createElement(W,v,o.createElement(Pr,{required:m,scope:t,trigger:h,onTriggerChange:g,valueNode:x,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:F(),value:N,onValueChange:C,open:k,onOpenChange:S,dir:j,triggerPointerDownPosRef:E,disabled:p},o.createElement(Er.Provider,{scope:t},o.createElement(_r,{scope:e.__scopeSelect,onNativeOptionAdd:o.useCallback((e=>{D((t=>new Set(t).add(e)))}),[]),onNativeOptionRemove:o.useCallback((e=>{D((t=>{const n=new Set(t);return n.delete(e),n}))}),[])},n)),M?o.createElement(va,{key:A,"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:N,onChange:e=>C(e.target.value),disabled:p},void 0===N?o.createElement("option",{value:""}):null,Array.from(R)):null))},Aa=Lr,Oa=o.forwardRef((({className:e,children:t,...n},r)=>i.jsxs(xa,{ref:r,className:s("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(ya,{asChild:!0,children:i.jsx(pe,{className:"h-4 w-4 opacity-50"})})]})));Oa.displayName=xa.displayName;const Pa=o.forwardRef((({className:e,...t},n)=>i.jsx(Ea,{ref:n,className:s("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(me,{className:"h-4 w-4"})})));Pa.displayName=Ea.displayName;const Ia=o.forwardRef((({className:e,...t},n)=>i.jsx(Ma,{ref:n,className:s("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(pe,{className:"h-4 w-4"})})));Ia.displayName=Ma.displayName;const _a=o.forwardRef((({className:e,children:t,position:n="popper",...r},a)=>i.jsx(ba,{children:i.jsxs(wa,{ref:a,className:s("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(Pa,{}),i.jsx(ja,{className:s("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(Ia,{})]})})));_a.displayName=wa.displayName,o.forwardRef((({className:e,...t},n)=>i.jsx(ka,{ref:n,className:s("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}))).displayName=ka.displayName;const Ta=o.forwardRef((({className:e,children:n,...r},a)=>i.jsxs(Sa,{ref:a,className:s("relative flex w-full cursor-default items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Ca,{children:i.jsx(t,{className:"h-4 w-4"})})}),i.jsx(Na,{children:n})]})));Ta.displayName=Sa.displayName,o.forwardRef((({className:e,...t},n)=>i.jsx(Ra,{ref:n,className:s("-mx-1 my-1 h-px bg-muted",e),...t}))).displayName=Ra.displayName;const za=()=>{var e;const t=on(U),n=on(d),r=on($);return i.jsxs(Da,{value:null===(e=n.value)||void 0===e?void 0:e.name,disabled:t.empty,onValueChange:e=>r(t.value.find((t=>t.name===e))),children:[i.jsx(Oa,{className:"max-w-[250px]",children:i.jsx(Aa,{placeholder:"Выберите проект..."})}),i.jsx(_a,{children:t.value.map((e=>i.jsx(Ta,{value:e.name||"-",children:e.name||"-"},e.name)))})]})},La=e=>{const[t,n]=o.useState(!!e);return[t,o.useCallback((()=>n((e=>!e))),[]),n]},Fa=G("flex rounded-md border border-input bg-background ring-offset-background file:border-0 file:bg-transparent placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{size:{default:"h-10 w-full px-3 py-2 text-sm file:text-sm file:font-medium",sm:"h-8 w-full px-1.5 text-sm file:text-sm file:font-medium"}},defaultVariants:{size:"default"}}),Va=o.forwardRef((({className:e,type:t,size:n,...r},a)=>i.jsx("input",{type:t,className:s(Fa({size:n,className:e})),ref:a,...r})));Va.displayName="Input";const Ha=o.forwardRef(((e,t)=>o.createElement(D.label,R({},e,{ref:t,onMouseDown:t=>{var n;null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))),qa=G("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ba=o.forwardRef((({className:e,...t},n)=>i.jsx(Ha,{ref:n,className:s(qa(),e),...t})));Ba.displayName=Ha.displayName;const Ka=()=>{const[e,,t]=La(!1),n=o.useRef(null);return o.useLayoutEffect((()=>{var t;e||null===(t=n.current)||void 0===t||t.reset()}),[e]),i.jsxs(Z,{open:e,onOpenChange:t,children:[i.jsx(X,{asChild:!0,children:i.jsx(j,{variant:"outline",size:"icon",className:"shrink-0",children:i.jsx(xe,{className:"h-4 w-4"})})}),i.jsxs(Y,{className:"sm:max-w-[425px]",children:[i.jsxs(J,{children:[i.jsx(Q,{children:"Создание проекта"}),i.jsx(ee,{children:"Создавай давай"})]}),i.jsxs("form",{ref:n,onSubmit:e=>{e.preventDefault(),e.stopPropagation();const r=n.current,a=Object.fromEntries(new FormData(r));te({logs:[],rate:0,name:a.name}),r.reset(),t(!1),ne({type:"success",message:"Проект успешно сделан!"})},children:[i.jsx("div",{className:"grid gap-4 py-4",children:i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Ba,{htmlFor:"name",className:"text-right",children:"Имя"}),i.jsx(Va,{id:"name",name:"name",required:!0,className:"col-span-3"})]})}),i.jsx(re,{children:i.jsx(j,{type:"submit",children:"Создать"})})]})]})]})},Wa=()=>{const e=l(ae),t=u(oe,(e=>!e));return i.jsx(j,{variant:"outline",size:"icon",className:"shrink-0",disabled:t,onClick:e,children:i.jsx(he,{className:"h-4 w-4"})})},Ua=({index:e,onDelete:t})=>{const[n,,r]=La(!1),[a]=l([ie]),s=o.useRef(null);return o.useLayoutEffect((()=>{var e;n||null===(e=s.current)||void 0===e||e.reset()}),[n]),i.jsxs(Z,{open:n,onOpenChange:r,children:[i.jsx(X,{asChild:!0,children:i.jsx(j,{className:"mt-auto h-5 w-5",size:"icon",variant:"destructive",children:i.jsx(we,{className:"h-3 w-3"})})}),i.jsxs(Y,{className:"sm:max-w-[425px]",children:[i.jsxs(J,{children:[i.jsx(Q,{children:"Удаление лога"}),i.jsx(ee,{children:"Нужно подтвердить удаление"})]}),i.jsx("form",{ref:s,onSubmit:n=>{n.preventDefault(),n.stopPropagation();const o=s.current;a({index:e}),o.reset(),t(),r(!1),ne({type:"success",message:"Лог удалён!"})},children:i.jsxs(re,{children:[i.jsx(j,{type:"submit",variant:"destructive",children:"УДАЛИТЬ"}),i.jsx(j,{type:"button",variant:"ghost",onClick:()=>{r(!1)},children:"НЕ НАДО"})]})})]})]})},$a=e=>ce(e).replace(/(https?:\/\/[-a-zA-Z0-9@:%._\\+~#?&//=]*)/g,(e=>`<a href="${e}" target="_blank" rel="nofollow" class="text-link">${e}</a>`)),Ga=({log:e,index:t})=>{const[n,r,a]=La(!1),[s]=l([se]),[c,u]=o.useState(e.meta),[d,m]=o.useState((()=>{const t=f.parser.msDuration(e.spentTime);return{hours:t.hours,minutes:t.minutes}}));return o.useLayoutEffect((()=>{if(!n){const t=f.parser.msDuration(e.spentTime);u(e.meta),m({hours:t.hours,minutes:t.minutes})}}),[e,n]),i.jsx(i.Fragment,{children:i.jsxs("div",{className:"group relative my-1 select-text","data-active":n||void 0,children:[i.jsx("div",{className:"absolute left-0 top-0 h-full w-1 select-text rounded-sm "+(n?"bg-reverse/70":"bg-accent")}),i.jsx("span",{className:"ml-3 select-text text-sm text-foreground/70",children:f.format.dateTime(e.startDate,{format:"dddd, D, HH:mm A"})}),i.jsx("span",{className:"ml-1 inline-flex select-text text-sm text-foreground/70 "+(n?"mb-1.5":""),children:n?i.jsx(Va,{size:"sm",type:"time",className:"h-6.5 px-1.5 font-semibold text-foreground",value:`${d.hours.toString().padStart(2,"0")}:${d.minutes.toString().padStart(2,"0")}`,onChange:e=>{const[t,n]=e.target.value.split(":");m({hours:+t||0,minutes:+n||0})}}):i.jsx(i.Fragment,{children:i.jsx("span",{className:"select-text font-semibold text-foreground",children:f.format.dateTime(e.spentTime,{format:"time-short",asTime:!0})})})}),n?i.jsx(yr,{className:"ml-3",value:c,onChange:e=>u(e.target.value)}):i.jsx("div",{className:"ml-3 select-text whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:$a(c)}}),i.jsx("div",{className:"absolute -left-6 top-0 flex flex-col gap-2 opacity-10 group-hover:opacity-100 group-data-[active]:opacity-100",children:n?i.jsxs(i.Fragment,{children:[i.jsx(j,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:r,children:i.jsx(le,{className:"h-3 w-3"})}),i.jsx(j,{size:"icon",variant:"positive",className:"mb-4 h-5 w-5",onClick:()=>{s({...e,meta:c,index:t,spentTime:d.hours*p(1,"hour")+d.minutes*p(1,"min")}),r()},children:i.jsx(ye,{className:"h-3 w-3"})}),i.jsx(Ua,{index:t,onDelete:()=>a(!1)})]}):i.jsx(i.Fragment,{children:i.jsx(j,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:r,children:i.jsx(be,{className:"h-3 w-3"})})})})]})})},Za=()=>{const e=u(d.$value,(e=>{if(!e)return null;if(!e.logs.length)return[];const t={};return e.logs.slice().map(((e,t)=>({...e,index:t}))).sort(((e,t)=>new Date(t.startDate).getTime()-new Date(e.startDate).getTime())).forEach((e=>{const n=f.format.dateTime(e.startDate,{format:"month"});t[n]||(t[n]={label:n,logs:[]}),t[n].logs.push(e)})),Object.values(t)}));return e?e.length?i.jsx("div",{className:"max-w-[540px] select-text",children:e.map((e=>i.jsxs("div",{className:"relative select-text py-4",children:[i.jsx("h1",{className:"sticky top-0 z-10 mb-2 select-text bg-custom-background/50 text-lg backdrop-blur-md",children:e.label}),i.jsx("div",{className:"flex select-text flex-col",children:e.logs.map(((e,t)=>i.jsx(Ga,{log:e,index:e.index},t)))})]},e.label)))}):i.jsx("div",{className:"my-40 text-center text-2xl text-accent",children:"Нет логов"}):i.jsx("div",{className:"my-40 text-center text-2xl text-accent",children:"Проект не выбран"})},Xa=()=>{const e=l(oe);return e?i.jsx("div",{className:"select-text p-1 text-sm font-semibold",children:e}):null},Ya=({className:e})=>{const[t,,n]=La(!1),r=o.useRef(null);return o.useLayoutEffect((()=>{var e;t||null===(e=r.current)||void 0===e||e.reset()}),[t]),i.jsxs(Z,{open:t,onOpenChange:n,children:[i.jsx(X,{asChild:!0,children:i.jsx(j,{variant:"outline",size:"icon",className:y("shrink-0",e),children:i.jsx(ve,{className:"h-4 w-4"})})}),i.jsxs(Y,{className:"sm:max-w-[425px]",children:[i.jsx(J,{children:i.jsx(Q,{children:"Ручное добавление лога"})}),i.jsxs("form",{ref:r,onSubmit:e=>{e.preventDefault(),e.stopPropagation();const t=r.current,a=Object.fromEntries(new FormData(t));console.info("fff",a);const[o,i]=a.time.split(":"),s=+o*p(1,"hour")+ +i*p(1,"min"),l=new Date(a.date).toISOString();ue({startDate:l,spentTime:s,meta:a.description||""}),t.reset(),n(!1),ne({type:"success",message:"Лог добавлен!"})},children:[i.jsx("div",{className:"grid gap-4 py-4",children:i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Ba,{htmlFor:"date",className:"text-right",children:"Дата"}),i.jsx(Va,{id:"date",name:"date",type:"date",required:!0,className:"col-span-3"})]})}),i.jsx("div",{className:"grid gap-4 py-4",children:i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Ba,{htmlFor:"time",className:"text-right",children:"Время"}),i.jsx(Va,{id:"time",name:"time",type:"time",required:!0,className:"col-span-3"})]})}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsx("div",{className:"grid grid-cols-4 items-center gap-4",children:i.jsx(Ba,{htmlFor:"description",className:"text-right",children:"Описание"})}),i.jsx(yr,{id:"description",name:"description"})]}),i.jsx(re,{children:i.jsx(j,{type:"submit",children:"Создать"})})]})]})]})},Ja=()=>{const e=l(d);return e.value?i.jsx(Va,{type:"number",placeholder:"0",className:"max-w-[140px]",value:e.value.rate||"",onChange:t=>{e.update({rate:+t.target.value||0})}}):null},Qa=()=>{const[e,,t]=La(!1),n=o.useRef(null),r=u(oe,(e=>!e));return o.useLayoutEffect((()=>{var t;e||null===(t=n.current)||void 0===t||t.reset()}),[e]),i.jsxs(Z,{open:e,onOpenChange:t,children:[i.jsx(X,{asChild:!0,disabled:r,children:i.jsx(j,{variant:"outline",size:"icon",className:"shrink-0",disabled:r,children:i.jsx(ge,{className:"h-4 w-4"})})}),i.jsxs(Y,{className:"sm:max-w-[425px]",children:[i.jsxs(J,{children:[i.jsx(Q,{children:"Сброс данных по трекингу"}),i.jsx(ee,{children:"Все логи по текущему проекту будут удалены"})]}),i.jsx("form",{ref:n,onSubmit:e=>{e.preventDefault(),e.stopPropagation();const r=n.current;d.update({logs:[]}),r.reset(),t(!1),ne({type:"success",message:"Всё сброшено!"})},children:i.jsx(re,{children:i.jsx(j,{type:"submit",children:"ОК"})})})]})]})};e("HomePage",(()=>{const e=l(fe);return i.jsx(de,{className:"flex flex-col",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-row justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"проект:"}),i.jsxs("div",{className:"flex w-[260px] flex-row gap-2",children:[i.jsx(za,{}),i.jsx(Ka,{})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"ставка:"}),i.jsx(Ja,{})]})]}),i.jsx(wr,{className:"mb-6 mr-auto mt-10 w-full"}),e&&i.jsxs("div",{className:"mb-4 flex flex-1 flex-row gap-2",children:[i.jsx(Ya,{className:"mr-auto"}),i.jsx(Qa,{}),i.jsx(Wa,{})]}),i.jsx(Xa,{}),i.jsx(Za,{})]})})}))}}}));
