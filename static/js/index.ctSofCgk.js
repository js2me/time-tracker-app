import{c as Te,s as Qr,w as Jr,r as v,j as f,a as Q,b as Ke,$ as eo,d as Lt,e as at,h as Qe,m as Ue,f as to,g as no,i as ro,p as oo,k as ao,t as ir,l as so,n as io,B as X,o as cr,q as Ee,u as be,v as fn,x as lr,y as co,_ as U,z as ye,A as ne,C as He,D as ur,E as lo,F as uo,G as fo,H as po,I as mo,J as dr,K as vo,L as ho,M as go,N as xo,O as Hn,P as bo,Q as yo,R as wo,S as fr,T as zt,U as Ht,V as Ft,W as Bt,X as Vt,Y as Mn,Z as $o,a0 as Wt,a1 as Ut,a2 as So,a3 as Tn,a4 as Co,a5 as ko,a6 as No,a7 as jo,a8 as Eo,a9 as Ro,aa as Mo}from"./entry.Jf_LroVC.js";/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=Te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Te("CircleFadingPlus",[["path",{d:"M12 2a10 10 0 0 1 7.38 16.75",key:"175t95"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M2.5 8.875a10 10 0 0 0-.5 3",key:"1vce0s"}],["path",{d:"M2.83 16a10 10 0 0 0 2.43 3.4",key:"o3fkw4"}],["path",{d:"M4.636 5.235a10 10 0 0 1 .891-.857",key:"1szpfk"}],["path",{d:"M8.644 21.42a10 10 0 0 0 7.631-.38",key:"9yhvd4"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Te("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Te("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Ho=!0,Ss=Object.freeze(Object.defineProperty({__proto__:null,skip:Ho},Symbol.toStringTag,{value:"Module"}));var ie={},E={};function Ce(e,t){for(var n in e)t(e[n],n)}function W(e,t){e.forEach(t)}function j(e,t,n){if(!e)throw Error((n?n+": ":"")+t)}function Fn(e,t){var n=q(e).meta||{};re={id:q(e).id,parent:re,value:e,template:n.template||st(),sidRoot:n.sidRoot||re&&re.sidRoot,meta:n};try{return t()}finally{In("region"),re=le(re)}}function K(e){var t=e===void 0?{}:e,n=t.node,r=n===void 0?[]:n,o=t.parent,a=t.child,s=a===void 0?t.to||t.target:a,i=t.scope,l=i===void 0?{}:i,c=t.meta,p=c===void 0?{}:c,y=t.family,h=y===void 0?{type:"regular"}:y,x=t.regional,d=ft(o===void 0?t.from||t.source:o),g=ft(h.links),b=ft(h.owners),u=[];W(r,function(w){return w&&V(u,w)});var m={id:Uo(),seq:u,next:ft(s),meta:p,scope:l,family:{type:h.type||"crosslink",links:g,owners:b}};return W(g,function(w){return V(gt(w),m)}),W(b,function(w){return V(xt(w),m)}),W(d,function(w){return V(w.next,m)}),x&&re&&ze(mt(re),[m]),m}function ke(e,t,n){var r,o=xe,a=null,s=P;if(e.target&&(t=e.params,n=e.defer,r=e.meta,o="page"in e?e.page:o,e.stack&&(a=e.stack),s=Le(e)||s,e=e.target),s&&P&&s!==P&&(P=null),Array.isArray(e))for(var i=0;i<e.length;i++)Be("pure",o,q(e[i]),a,t[i],s,r);else Be("pure",o,q(e),a,t,s,r);if(!n||St){var l,c,p,y,h,x,d={isRoot:St,currentPage:xe,scope:P,isWatch:kt,isPure:Nt};St=0;for(var g=function(){var b=y.idx,u=y.stack,m=y.type;p=u.node,xe=h=u.page,P=Le(u),h?x=h.reg:P&&(x=P.reg);var w=!!h,$=!!P,S={fail:0,scope:p.scope};l=c=0;for(var T=b;T<p.seq.length&&!l;T++){var C=p.seq[T];if(C.order){var k=C.order,R=k.priority,M=k.barrierID,A=M?h?h.fullID+"_"+M:M:0;if(T!==b||m!==R)return M?an.has(A)||(an.add(A),wn(T,u,R,M)):wn(T,u,R,0),"continue|kernelLoop";M&&an.delete(A)}switch(C.type){case"mov":var I=C.data,B=void 0;switch(I.from){case"stack":B=mt(u);break;case"a":case"b":B=u[I.from];break;case"value":B=I.store;break;case"store":if(x&&!x[I.store.id])if(w){var ve=wr(h,I.store.id);u.page=h=ve,ve?x=ve.reg:$?(_t(P,I.store,0,1,I.softRead),x=P.reg):x=void 0}else $&&_t(P,I.store,0,1,I.softRead);B=vt(x&&x[I.store.id]||I.store)}switch(I.to){case"stack":u.value=B;break;case"a":case"b":u[I.to]=B;break;case"store":Sn(h,P,I.target,0).current=B}break;case"compute":var F=C.data;if(F.fn){kt=p.meta.op==="watch",Nt=F.pure;var ae=F.safe?(0,F.fn)(mt(u),S.scope,u):Xo(S,F.fn,u);F.filter?c=!ae:u.value=ae,kt=d.isWatch,Nt=d.isPure}}l=S.fail||c}if(yn&&yn(u,S),!l){var ee=mt(u),Y=Le(u);if(W(p.next,function(Fe){Be("child",h,Fe,u,ee,Y)}),Y){p.meta.needFxCounter&&Be("child",h,Y.fxCount,u,ee,Y),p.meta.storeChange&&Be("child",h,Y.storeChange,u,ee,Y),p.meta.warnSerialize&&Be("child",h,Y.warnSerializeNode,u,ee,Y);var we=Y.additionalLinks[p.id];we&&W(we,function(Fe){Be("child",h,Fe,u,ee,Y)})}}};y=Yo();)g();St=d.isRoot,xe=d.currentPage,P=Le(d)}}function mr(e,t){t===void 0&&(t="combine");var n=t+"(",r="",o=0;return Ce(e,function(a){o<25&&(a!=null&&(n+=r,n+=ue(a)?Tt(a).fullName:a.toString()),o+=1,r=", ")}),n+")"}function pn(e,t){var n,r,o=e;if(t){var a=Tt(t);e.length===0?(n=a.path,r=a.fullName):(n=a.path.concat([e]),r=a.fullName.length===0?e:a.fullName+"/"+e)}else n=e.length===0?[]:[e],r=e;return{shortName:o,fullName:r,path:n}}function ce(e,t){if(!t||!t.name&&!t.named&&!t.loc)return e;var n="["+e+"]",r=t.named||t.name;r&&(n+=" unit '"+r+"'");var o=t.loc;return!r&&o&&(n+=" ("+o.file+":"+o.line+":"+o.column+")"),n}function Ae(e,t){var n=t?e:e[0];Pn(n);var r=n.or,o=n.and;if(o){var a=t?o:o[0];if(me(a)&&"and"in a){var s=Ae(o,t);e=s[0],r=Object.assign({},r,s[1])}else e=o}return[e,r]}function mn(e){var t=function(){return e()};return t.unsubscribe=function(){return e()},t}function fe(e){var t=st();if(t){for(var n=t.handlers[e],r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(n)return n.apply(void 0,[t].concat(o))}}function Fo(e,t,n,r){var o=xe,a=null;if(t)for(a=xe;a&&a.template!==t;)a=le(a);Yn(a);var s=e.create(n,r);return Yn(o),s}function te(e,t){var n=nt({or:t,and:typeof e=="string"?{name:e}:e}),r=ce("event",n),o=function i(l){j(!J(i,"derived"),"call of derived event is not supported, use createEvent instead",r),j(!Nt,"unit call from pure function is not supported, use operators like sample instead",r);for(var c=arguments.length,p=new Array(c>1?c-1:0),y=1;y<c;y++)p[y-1]=arguments[y];return xe?Fo(i,a,l,p):i.create(l,p)},a=st(),s=Object.assign(o,{graphite:K({meta:On(n.actualOp||"event",o,n),regional:1}),create:function(i){return ke({target:o,params:i,scope:P}),i},watch:function(i){return $r(o,i)},map:function(i){return sn(o,"map",i,[Me()])},filter:function(i){return sn(o,"filter",i.fn?i:i.fn,[Me(qt,1)])},filterMap:function(i){return sn(o,"filterMap",i,[Me(),Z(function(l){return!de(l)},1)])},prepend:function(i){j(o.targetable,".prepend of derived event is not supported, call source event instead",r);var l=te("* → "+o.shortName,{parent:le(o)});return fe("eventPrepend",q(l)),_e(l,o,[Me()],"prepend",i),Cn(o,l),l}});return n!=null&&n.domain&&n.domain.hooks.event(s),Re(s,"id",s.graphite.id),In(s.graphite),s}function Bn(e,t,n,r,o){return tt(n,o+" "+t,"first argument"),j(oe(r),"second argument should be a function",o),he(!J(e,"derived"),t+" in derived store",t+" in store created via createStore",o),W(Array.isArray(n)?n:[n],function(a){e.off(a),Mt(e).set(a,At(Sr(a,e,"on",Ko,r)))}),e}function De(e,t){var n=nt(t),r=qe(e),o=ce("store",n),a=te({named:"updates",derived:1});fe("storeBase",r);var s=r.id,i="skipVoid"in n,l=i&&!n.skipVoid;he(!(i&&n.skipVoid),"{skipVoid: true}","updateFilter",o);var c={subscribers:new Map,updates:a,defaultState:e,stateRef:r,getState:function(){var u,m=r;if(xe){for(var w=xe;w&&!w.reg[s];)w=le(w);w&&(u=w)}return!u&&P&&(_t(P,r,1),u=P),u&&(m=u.reg[s]),vt(m)},setState:function(u){return ke({target:c,params:u,defer:1,scope:P})},reset:function(){j(c.targetable,".reset of derived store is not supported",o);for(var u=arguments.length,m=new Array(u),w=0;w<u;w++)m[w]=arguments[w];return W(m,function($){return Bn(c,".reset",$,function(){return c.defaultState},o)}),c},on:function(u,m){return j(c.targetable,".on of derived store is not supported",o),Bn(c,".on",u,m,o)},off:function(u){var m=Mt(c).get(u);return m&&(m(),Mt(c).delete(u)),c},map:function(u,m){var w,$;me(u)&&(w=u,u=u.fn);var S=c.getState(),T=de(S);st()?$=null:(!T||T&&l)&&($=u(S));var C=De($,Object.assign({name:c.shortName+" → *",derived:1},m,{and:w})),k=Sr(c,C,"map",qt,u);return Pt(pe(C),{type:"map",fn:u,from:r}),pe(C).noInit=1,fe("storeMap",r,k),C},watch:function(u,m){if(he(!m,"watch second argument","sample",o),!m||!ue(u)){var w=$r(c,u);return fe("storeWatch",r,u)||u(c.getState()),w}return j(oe(m),"second argument should be a function",o),u.watch(function($){return m(c.getState(),$)})}},p=On("store",c,n),y=c.defaultConfig.updateFilter;c.graphite=K({scope:{state:r,fn:y},node:[Z(function(u,m,w){return w.scope&&!w.scope.reg[r.id]&&(w.b=1),u}),Ne(r),Z(function(u,m,w){var $=w.a,S=w.b,T=de(u);return T&&!i&&console.error(o+": "+Rt),(T&&l||!T)&&(u!==$||S)},1),y&&Me(br,1),ge({from:"stack",target:r})],child:a,meta:Object.assign({},p,{defaultState:e}),regional:1}),Re(c,"id",c.graphite.id),Re(c,"rootStateRefId",s);var h=J(c,"serialize"),x=J(c,"derived"),d=h==="ignore",g=J(c,"sid");g&&(Re(c,"storeChange",1),r.sid=g),g||d||x||Re(c,"warnSerialize",1);var b=de(e);return j(x||!b||b&&l,Rt,o),x&&b&&!i&&console.error(o+": "+Rt),ze(c,[a]),n!=null&&n.domain&&n.domain.hooks.store(c),x||(c.reinit=te({named:"reinit"}),c.reset(c.reinit)),r.meta=c.graphite.meta,In(c.graphite),c}function vn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o,a,s=Ae(t);t=s[0];var i,l,c,p=ce("combine",a=s[1]),y=t[t.length-1],h=!G(y)&&me(y),x=h&&y,d=h?t[t.length-2]:y;if(oe(d)?(o=t.slice(0,h?-2:-1),r=d):o=t,o.length===1){var g=o[0];G(g)||(i=g,l=1)}if(!l&&(i=o,r)){c=1;var b=r;r=function(u){return b.apply(void 0,u)}}return j(me(i),p+": shape should be an object"),Jo(Array.isArray(i),!c,i,a,r,x)}function vr(){var e={};return e.req=new Promise(function(t,n){e.rs=t,e.rj=n}),e.req.catch(function(){}),e}function nn(e,t){t===void 0&&(t={});var n=nt(oe(e)?{handler:e}:e,t),r=ce("effect",n),o=te(oe(e)?{handler:e}:e,Object.assign({},t,{actualOp:"effect"})),a=q(o);Re(a,"op",o.kind="effect"),o.use=function(d){return j(oe(d),".use argument should be a function",r),y.scope.handler=d,o},o.use.getCurrent=function(){return y.scope.handler};var s=o.finally=te({named:"finally",derived:1}),i=o.done=s.filterMap({named:"done",fn:function(d){if(d.status==="done")return{params:d.params,result:d.result}}}),l=o.fail=s.filterMap({named:"fail",fn:function(d){if(d.status==="fail")return{params:d.params,error:d.error}}}),c=o.doneData=i.map({named:"doneData",fn:function(d){return d.result}}),p=o.failData=l.map({named:"failData",fn:function(d){return d.error}}),y=K({scope:{handler:o.defaultConfig.handler||function(){return j(0,"no handler used in "+o.compositeName.fullName)}},node:[Z(function(d,g,b){var u=g.handler,m=Le(b);if(m){var w=m.handlers.unitMap.get(o)||m.handlers.sidMap[o.sid];w&&(u=w)}return d.handler=u,d},0,1),Z(function(d,g,b){if(!g.runnerFn||g.runnerFn(d,null,b)){var u=d.params,m=d.req,w=d.handler,$=d.args,S=$===void 0?[u]:$,T=Ot(u,m,1,s,b),C=Ot(u,m,0,s,b),k=Cr(w,C,S),R=k[1];k[0]&&(me(R)&&oe(R.then)?R.then(T,C):T(R))}},0,1)],meta:{op:"fx",fx:"runner"}});a.scope.runner=y,V(a.seq,Z(function(d,g,b){var u=g.runner,m=le(b)?{params:d,req:{rs:function(){},rj:function(){}}}:d;return b.meta||(b.meta={fxID:qo()}),ke({target:u,params:m,defer:1,scope:Le(b),meta:b.meta}),m.params})),o.create=function(d){var g=vr(),b={params:d,req:g};if(P&&!kt){var u=P;g.req.finally(function(){jt(u)}).catch(function(){})}return ke({target:o,params:b,scope:P}),g.req};var h=o.inFlight=De(0,{serialize:"ignore",named:(J(o,"name")||o.graphite.id)+".inFlight"}).on(o,function(d){return d+1}).on(s,function(d){return d-1}).map({fn:function(d){return d},named:"inFlight"});Re(s,"needFxCounter","dec"),Re(o,"needFxCounter",1);var x=o.pending=h.map({fn:function(d){return d>0},named:"pending"});return ze(o,[s,i,l,c,p,x,h]),n!=null&&n.domain&&n.domain.hooks.effect(o),o}function hr(e,t){var n=ce("merge",t);tt(e,n,"first argument");var r=te({name:mr(e,"merge"),derived:1,and:t});return _e(e,r,[],"merge"),r}function Vn(e,t){var n=0;return W(ta,function(r){r in e&&(j(e[r]!=null,kr(t,r)),n=1)}),n}function Wn(e,t,n){var r=[];(function o(a){Xe(r,a)||(V(r,a),J(a,"op")==="store"&&(n||J(a,"sid"))&&t(a,J(a,"sid")),W(a.next,o),W(gt(a),o),W(xt(a),o))})(e)}function rn(e,t){var n=Array.isArray(e)?new Map(e):e,r=new Map,o=0;if(n instanceof Map){var a={};return W(n,function(s,i){j(ue(i),"Map key should be a unit"),t&&t(i,s),i.sid&&(i.sid in a&&(o=1),a[i.sid]=s),r.set(i,s)}),{sidMap:a,unitMap:r,hasSidDoubles:o}}return{sidMap:n,unitMap:r}}function Bo(e,t){return G(t)?[pt.mov({store:t.stateRef,to:"stack"})].concat(e):e}Object.defineProperty(E,"__esModule",{value:1});for(var hn,gn=typeof Symbol<"u"&&Symbol.observable||"@@observable",q=function(e){return e.graphite||e},gt=function(e){return e.family.owners},xt=function(e){return e.family.links},pe=function(e){return e.stateRef},mt=function(e){return e.value},Mt=function(e){return e.subscribers},le=function(e){return e.parent},Le=function(e){return e.scope},J=function(e,t){return q(e).meta[t]},Re=function(e,t,n){return q(e).meta[t]=n},Tt=function(e){return e.compositeName},ue=function(e){return(oe(e)||me(e))&&"kind"in e},lt=function(e){return function(t){return ue(t)&&t.kind===e}},G=lt("store"),xn=lt("event"),Ie=lt("effect"),gr=function(e){return ue(e)&&!!e.targetable},It=lt("domain"),dt=lt("scope"),Vo={__proto__:null,unit:ue,store:G,event:xn,effect:Ie,targetable:gr,domain:It,scope:dt,attached:function(e){return Ie(e)&&J(e,"attached")==1}},Xe=function(e,t){return e.includes(t)},on=function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},V=function(e,t){return e.push(t)},he=function(e,t,n,r){return!e&&console.error((r?r+": ":"")+t+" is deprecated"+(n?", use "+n+" instead":""))},$t=function(){var e=0;return function(){return""+ ++e}},Wo=$t(),Un=$t(),Uo=$t(),qo=$t(),re=null,In=function(e){hn&&hn(e,re)},st=function(){return re&&re.template},xr=function(e){return e&&re&&re.sidRoot&&(e=re.sidRoot+"|"+e),e},ze=function(e,t){var n=q(e);W(t,function(r){var o=q(r);n.family.type!=="domain"&&(o.family.type="crosslink"),V(gt(o),n),V(xt(n),o)})},ft=function(e){return e===void 0&&(e=[]),(Array.isArray(e)?e:[e]).flat().map(q)},me=function(e){return typeof e=="object"&&e!==null},oe=function(e){return typeof e=="function"},de=function(e){return e===void 0},Pn=function(e){return j(me(e)||oe(e),"expect first argument be an object")},qn=function(e,t,n,r){return j(!(!me(e)&&!oe(e)||!("family"in e)&&!("graphite"in e)),t+": expect "+n+" to be a unit (store, event or effect)"+r)},tt=function(e,t,n){Array.isArray(e)?W(e,function(r,o){return qn(r,t,o+" item of "+n,"")}):qn(e,t,n," or array of units")},bn=function(e,t,n){return n===void 0&&(n="target"),W(ft(t),function(r){return j(!J(r,"derived"),e+': derived unit in "'+n+'" is not supported, use createStore/createEvent instead"')})},br=function(e,t,n){return(0,t.fn)(e,n.a)},Ko=function(e,t,n){return(0,t.fn)(n.a,e)},qt=function(e,t){return(0,t.fn)(e)},Kn=function(e,t,n,r){var o={id:Un(),type:e,data:t};return n&&(o.order={priority:n},r&&(o.order.barrierID=++Go)),o},Go=0,ge=function(e){var t=e.from,n=e.target,r=e.to;return Kn("mov",{from:t===void 0?"store":t,store:e.store,to:r===void 0?n?"store":"stack":r,target:n},e.priority,e.batch)},Ve=function(e){var t=e.safe,n=e.filter,r=e.pure;return Kn("compute",{fn:e.fn,safe:t===void 0?0:t,filter:n===void 0?0:n,pure:r===void 0?0:r},e.priority,e.batch)},_n=function(e){return Ve({fn:e.fn,priority:"effect"})},Z=function(e,t,n){return Ve({fn:e,safe:1,filter:t,priority:n&&"effect"})},Ne=function(e,t,n){return ge({store:e,to:t?"stack":"a",priority:n&&"sampler",batch:1})},Me=function(e,t){return e===void 0&&(e=qt),Ve({fn:e,pure:1,filter:t})},pt={mov:ge,compute:Ve,filter:function(e){return Ve({fn:e.fn,filter:1,pure:e.pure})},run:_n},qe=function(e){return{id:Un(),current:e,initial:e}},vt=function(e){return e.current},Pt=function(e,t){e.before||(e.before=[]),V(e.before,t)},Je=null,yr=function e(t,n){return t?(n&&((t.v.type===n.v.type&&t.v.id>n.v.id||$n(t.v.type)>$n(n.v.type))&&(r=t,t=n,n=r),r=e(t.r,n),t.r=t.l,t.l=r),t):n;var r},An=[],Gn=0;Gn<6;)V(An,{first:null,last:null,size:0}),Gn+=1;var P,yn,Yo=function(){for(var e=0;e<6;e++){var t=An[e];if(t.size>0){if(e===3||e===4){t.size-=1;var n=Je.v;return Je=yr(Je.l,Je.r),n}t.size===1&&(t.last=null);var r=t.first;return t.first=r.r,t.size-=1,r.v}}},Be=function(e,t,n,r,o,a,s){return wn(0,{a:null,b:null,node:n,parent:r,value:o,page:t,scope:a,meta:s},e,0)},wn=function(e,t,n,r){var o=$n(n),a=An[o],s={v:{idx:e,stack:t,type:n,id:r},l:null,r:null};o===3||o===4?Je=yr(Je,s):(a.size===0?a.first=s:a.last.r=s,a.last=s),a.size+=1},$n=function(e){switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},an=new Set,St=1,kt=0,Nt=0,xe=null,jt=function(e){P=e},Yn=function(e){xe=e},wr=function(e,t){if(e){for(;e&&!e.reg[t];)e=e.parent;if(e)return e}return null},Sn=function(e,t,n,r){var o=wr(e,n.id);return o?o.reg[n.id]:t?(_t(t,n,r),t.reg[n.id]):n},Zo=function(e){return e},_t=function e(t,n,r,o,a){var s=t.reg;if(!s[n.id]){var i=n.sid,l={id:n.id,current:n.initial,meta:n.meta};if(l.id in t.values.idMap)l.current=t.values.idMap[l.id];else if(i&&i in t.values.sidMap&&!(i in t.sidIdMap)){var c,p=n==null||(c=n.meta)===null||c===void 0?void 0:c.serialize;l.current=(t.fromSerialize&&p!=="ignore"&&(p==null?void 0:p.read)||Zo)(t.values.sidMap[i])}else if(n.before&&!a){var y=0,h=r||!n.noInit||o;W(n.before,function(x){switch(x.type){case"map":var d=x.from;if((d||x.fn)&&(d&&e(t,d,r,o),h)){var g=d&&s[d.id].current;l.current=x.fn?x.fn(g):g}break;case"field":e(t,x.from,r,o),y||(y=1,l.current=Array.isArray(l.current)?[].concat(l.current):Object.assign({},l.current)),h&&(l.current[x.field]=s[s[x.from.id].id].current)}})}i&&(t.sidIdMap[i]=n.id),s[n.id]=l}},Xo=function(e,t,n){try{return t(mt(n),e.scope,n)}catch(r){console.error(r),e.fail=1,e.failReason=r}},nt=function e(t,n){return n===void 0&&(n={}),me(t)&&(e(t.or,n),Ce(t,function(r,o){de(r)||o==="or"||o==="and"||(n[o]=r)}),e(t.and,n)),n},Zn=function(e,t){on(e.next,t),on(gt(e),t),on(xt(e),t)},Qo=function e(t,n,r){var o;t.next.length=0,t.seq.length=0,t.scope=null;for(var a=xt(t);o=a.pop();)Zn(o,t),(n||r&&t.meta.op!=="sample"||o.family.type==="crosslink")&&e(o,n,o.meta.op!=="on"&&r);for(a=gt(t);o=a.pop();)Zn(o,t),r&&o.family.type==="crosslink"&&e(o,n,o.meta.op!=="on"&&r)},ut=function(e){return e.clear()},Et=function(e,t){var n=(t===void 0?{}:t).deep,r=0;if(e.ownerSet&&e.ownerSet.delete(e),G(e))ut(Mt(e));else if(It(e)){r=1;var o=e.history;ut(o.events),ut(o.effects),ut(o.stores),ut(o.domains)}Qo(q(e),!!n,r)},At=function(e){return mn(function(){return Et(e)})},_e=function(e,t,n,r,o){return K({node:n,parent:e,child:t,scope:{fn:o},meta:{op:r},family:{owners:[e,t],links:t},regional:1})},$r=function(e,t){return j(oe(t),".watch argument should be a function"),At(K({scope:{fn:t},node:[_n({fn:qt})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))},Cn=function(e,t,n){n===void 0&&(n="event"),le(e)&&le(e).hooks[n](t)},On=function(e,t,n){var r=nt(n),o=e==="domain",a=Wo(),s=r.sid,i=s===void 0?null:s,l=r.named,c=l===void 0?null:l,p=r.domain,y=r.parent,h=y===void 0?p===void 0?null:p:y,x=c||r.name||(o?"":a),d=pn(x,h),g={op:t.kind=e,name:t.shortName=x,sid:t.sid=xr(i),named:c,unitId:t.id=a,serialize:r.serialize,derived:r.derived,config:r};if(t.targetable=!r.derived,t.parent=h,t.compositeName=d,t.defaultConfig=r,t.getType=function(){return he(0,"getType","compositeName.fullName"),d.fullName},!o){t.subscribe=function(u){return Pn(u),t.watch(oe(u)?u:function(m){return u.next&&u.next(m)})},t[gn]=function(){return t};var b=st();b&&(g.nativeTemplate=b)}return g},sn=function(e,t,n,r){var o;me(n)&&(o=n,n=n.fn);var a=te({name:e.shortName+" → *",derived:1,and:o});return _e(e,a,r,t,n),a},Rt="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",Sr=function(e,t,n,r,o){var a=pe(t),s=ge({store:a,to:"a",priority:"read"});n==="map"&&(s.data.softRead=1);var i=[s,Me(r)];return fe("storeOnMap",a,i,G(e)&&pe(e)),_e(e,t,i,n,o)},Jo=function(e,t,n,r,o,a){var s=ce("combine",r),i=e?function(m){return[].concat(m)}:function(m){return Object.assign({},m)},l=e?[]:{},c=i(l),p=qe(c),y=qe(1);p.type=e?"list":"shape",p.noInit=1,fe("combineBase",p,y);var h=De(c,Object.assign({name:mr(n),derived:1},a,{and:r})),x=pe(h);x.noInit=1,Re(h,"isCombine",1);var d=Ne(p);d.order={priority:"barrier"};var g=ge({store:x,to:"b",priority:"read"});g.data.softRead=1;var b=[Z(function(m,w,$){return $.scope&&!$.scope.reg[p.id]&&($.c=1),m}),d,ge({store:y,to:"b"}),Z(function(m,w,$){var S=w.key;if($.c||m!==$.a[S])return t&&$.b&&($.a=i($.a)),$.a[S]=m,1},1),ge({from:"a",target:p}),ge({from:"value",store:0,target:y}),ge({from:"value",store:1,target:y,priority:"barrier",batch:1}),Ne(p,1,1),o&&Me(),g];if(Ce(n,function(m,w){if(!G(m))return j(!ue(m)&&!de(m),"combine expects a store in a field "+w,s),void(c[w]=l[w]=m);l[w]=m.defaultState,c[w]=m.getState();var $=_e(m,h,b,"combine",o);$.scope.key=w;var S=pe(m);Pt(p,{type:"field",field:w,from:S}),fe("combineField",S,$)}),h.defaultShape=n,Pt(x,{type:"map",from:p,fn:o}),!st())if(o){var u=o(c);!de(u)||a&&"skipVoid"in a||console.error(s+": "+Rt),x.current=u,x.initial=u,h.defaultState=u}else h.defaultState=l;return h},Cr=function(e,t,n){try{return[1,e.apply(void 0,n)]}catch(r){return t(r),[0,null]}},Ot=function(e,t,n,r,o){return function(a){ke({target:[r,ea],params:[n?{status:"done",params:e,result:a}:{status:"fail",params:e,error:a},{value:a,fn:n?t.rs:t.rj}],defer:1,page:o.page,scope:o.scope,meta:o.meta})}},ea=K({node:[_n({fn:function(e){return(0,e.fn)(e.value)}})],meta:{op:"fx",fx:"sidechain"}}),ta=["source","clock","target"],kr=function(e,t){return e+": "+t+" should be defined"},cn=function(e,t,n,r,o,a,s,i,l,c,p,y){var h=ce(e,i),x=!!o;j(!de(n)||!de(t),kr(h,"either source or clock"));var d=0;de(n)?d=1:ue(n)||(n=vn(n)),de(t)?t=n:(tt(t,h,"clock"),Array.isArray(t)&&(t=hr(t))),d&&(n=t),i||s||(s=n.shortName);var g="none";(p||r)&&(ue(r)?g="unit":(j(oe(r),"`filter` should be function or unit"),g="fn")),o?(tt(o,h,"target"),bn(h,o)):g==="none"&&c&&G(n)&&G(t)?o=De(a?a(vt(pe(n)),vt(pe(t))):vt(pe(n)),{name:s,sid:y,or:i}):(o=te({name:s,derived:1,or:i}),fe("sampleTarget",q(o)));var b=qe(),u=[];if(g==="unit"){var m=Xn(r,o,t,b,e),w=m[0];m[2]||u.push.apply(u,ln(m[1])),u.push.apply(u,ln(w))}var $=[];if(d)l&&$.push(Ne(b,1,1));else{var S=Xn(n,o,t,b,e),T=S[0];S[2]||$.push.apply($,ln(S[1])),$.push(Ne(T,1,l))}var C=_e(t,o,[fe("sampleSourceLoader"),ge({from:"stack",target:b})].concat($,u,[Ne(b),g==="fn"&&Me(function(k,R,M){return r(k,M.a)},1),a&&Me(br),fe("sampleSourceUpward",x)]),e,a);return ze(n,[C]),Object.assign(C.meta,i,{joint:1}),o},ln=function(e){return[Ne(e),Z(function(t,n,r){return r.a},1)]},Xn=function(e,t,n,r,o){var a=G(e),s=a?pe(e):qe(),i=qe(a);return a||K({parent:e,node:[ge({from:"stack",target:s}),ge({from:"value",store:1,target:i})],family:{owners:[e,t,n],links:t},meta:{op:o},regional:1}),fe("sampleSource",i,s,r),[s,i,a]},un=function(e,t,n,r){var o=e[t];o&&ke({target:o,params:Array.isArray(o)?o.map(function(){return n}):n,defer:1,stack:r})},Qn=function(e){return!e.node.meta.isCombine||e.parent&&e.parent.node.meta.op!=="combine"},na=function(e){return e};E.allSettled=function(e,t){var n=t===void 0?{}:t,r=n.scope,o=n.params;if(!ue(e))return Promise.reject(new Error("first argument should be unit"));if(!(Ie(e)||xn(e)||G(e)||dt(e)))return Promise.reject(new Error("first argument accepts only effects, events, stores or scopes"));dt(e)&&(r=e);var a=vr();a.parentFork=P;var s=r.fxCount;V(s.scope.defers,a);var i=[],l=[];return dt(e)||(V(i,e),V(l,Ie(e)?{params:o,req:{rs:function(c){a.value={status:"done",value:c}},rj:function(c){a.value={status:"fail",value:c}}}}:o)),V(i,s),V(l,null),ke({target:i,params:l,scope:r}),a.req},E.attach=function(e){var t,n,r=Ae(e,1);e=r[0];var o=ce("attach",n=r[1]),a=e.source,s=e.effect,i=e.mapParams,l=e.domain;Ie(s)&&j(de(l),"`domain` can only be used with a plain function",o);var c=nn(e,n);Re(c,"attached",1);var p,y,h=q(c).scope.runner,x=function(g,b,u){var m,w=g.params,$=g.req,S=g.handler,T=c.finally,C=Ot(w,$,0,T,u),k=u.a,R=Ie(S),M=1;if(i){var A=Cr(i,C,[w,k]);M=A[0],m=A[1]}else m=a&&R?k:w;if(M){if(!R)return g.args=[k,m],1;ke({target:S,params:{params:m,req:{rs:Ot(w,$,1,T,u),rj:C}},page:u.page,defer:1,meta:u.meta})}};a?(h.scope.runnerFn=x,G(a)?ze(y=a,[c]):(y=vn(a),ze(c,[y])),p=[Z(function(g){return g},0,1),Ne(pe(y))],delete h.seq[1].order):p=[Z(x,1,1)],(t=h.seq).splice.apply(t,[1,0].concat(p)),c.use(s);var d=le(s);return d&&(Object.assign(Tt(c),pn(c.shortName,d)),c.defaultConfig.parent=d),Cn(s,c,"effect"),c},E.clearNode=Et,E.combine=vn,E.createApi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ae(t),o=r[0],a=o[0],s=o[1],i=r[1],l={};return Ce(s,function(c,p){var y=l[p]=te(p,{parent:le(a),config:i});a.on(y,c),Cn(a,y)}),l},E.createDomain=function e(t,n){var r=nt({or:n,and:typeof t=="string"?{name:t}:t}),o=K({family:{type:"domain"},regional:1,parent:(r==null?void 0:r.domain)||(r==null?void 0:r.parent)}),a={history:{},graphite:o,hooks:{}};o.meta=On("domain",a,{parent:(r==null?void 0:r.domain)||(r==null?void 0:r.parent),or:Object.assign({},r,{derived:1})}),Ce({Event:te,Effect:nn,Store:De,Domain:e},function(i,l){var c=l.toLowerCase(),p=te({named:"on"+l});a.hooks[c]=p;var y=new Set;a.history[c+"s"]=y,p.create=function(h){return ke(p,h),h},V(q(p).seq,Z(function(h,x,d){return d.scope=null,h})),p.watch(function(h){ze(a,[h]),y.add(h),h.ownerSet||(h.ownerSet=y),le(h)||(h.parent=a)}),ze(a,[p]),a["onCreate"+l]=function(h){return W(y,h),p.watch(h)},a["create"+l]=a[c]=function(h,x){var d=nt({and:x,or:h});return d!=null&&d.domain?i(h,x):p(i(h,{parent:a,or:d}))}});var s=le(a);return s&&Ce(a.hooks,function(i,l){return _e(i,s.hooks[l])}),r!=null&&r.domain&&r.domain.hooks.domain(a),a},E.createEffect=nn,E.createEvent=te,E.createNode=K,E.createStore=De,E.createWatch=function(e){var t=e.unit,n=e.fn,r=e.scope,o=e.batch,a=[pt.run({fn:function(p){return n(p)}})];o&&a.unshift(pt.compute({priority:"sampler",batch:1})),G(t)&&a.unshift(pt.mov({store:t.stateRef,to:"stack"}));var s=Array.isArray(t)?t:[t];if(r){var i=[],l=r.additionalLinks;return s.forEach(function(p){var y=l[p.graphite.id]||[];l[p.graphite.id]=y;var h=K({node:Bo(a,p),meta:{watchOp:p.kind}});y.push(h),i.push(function(){var x=y.indexOf(h);x!==-1&&y.splice(x,1),Et(h)})}),mn(function(){i.forEach(function(p){return p()})})}var c=K({node:a,parent:s,family:{owners:s}});return mn(function(){Et(c)})},E.fork=function(e,t){var n,r=e;It(e)&&(he(0,"fork(domain)","fork()"),n=e,r=t);var o=function(l){var c=K({scope:{defers:[],inFlight:0,fxID:0},node:[Z(function(x,d,g){g.parent?g.parent.node.meta.needFxCounter==="dec"?d.inFlight-=1:(d.inFlight+=1,d.fxID+=1):d.fxID+=1}),Ve({priority:"sampler",batch:1}),Z(function(x,d){var g=d.defers,b=d.fxID;d.inFlight>0||g.length===0||Promise.resolve().then(function(){d.fxID===b&&W(g.splice(0,g.length),function(u){jt(u.parentFork),u.rs(u.value)})})},0,1)]}),p=K({node:[Z(function(x,d,g){var b=g.parent;if(b){var u=b.node;if(Qn(b)){var m=Le(g),w=u.meta.sid;m.sidIdMap[w]=u.scope.state.id,m.values.sidMap[w]=x;var $=u.meta.serialize;$&&m.sidSerializeSettings.set(w,$==="ignore"?{ignore:1}:{ignore:0,write:$.write})}}})]}),y=K({node:[Z(function(x,d,g){var b=Le(g);b&&g.parent&&Qn(g.parent)&&(b.warnSerialize=1)})]}),h={cloneOf:l,reg:{},values:{sidMap:{},idMap:{}},sidIdMap:{},sidSerializeSettings:new Map,getState:function(x){if("current"in x)return Sn(xe,h,x,0).current;var d=q(x);return Sn(xe,h,d.scope.state,1).current},kind:"scope",graphite:K({family:{type:"domain",links:[c,p,y]},meta:{unit:"fork"},scope:{forkInFlightCounter:c}}),additionalLinks:{},handlers:{sidMap:{},unitMap:new Map},fxCount:c,storeChange:p,warnSerializeNode:y};return h}(n);if(r){if(r.values){var a=rn(r.values,function(l){return j(G(l)&&gr(l),"Values map can contain only writable stores as keys")}),s=a.unitMap,i=a.hasSidDoubles;Object.assign(o.values.sidMap,a.sidMap),W(s,function(l,c){if(o.values.idMap[c.stateRef.id]=l,J(c,"serialize")==="ignore"){var p=J(c,"sid");o.sidSerializeSettings.set(p,{ignore:1})}}),o.fromSerialize=!(Array.isArray(r.values)||r.values instanceof Map),o.hasSidDoubles=i}r.handlers&&(he(r.handlers instanceof Map||Array.isArray(r.handlers),"object with handlers","array"),o.handlers=rn(r.handlers,function(l){return j(Ie(l),"Handlers map can contain only effects as keys")}))}return o},E.forward=function(e){var t="forward",n=Ae(e,1),r=n[0],o=r.from,a=r.to,s=n[1],i=ce(t,s);return he(0,t,"sample",i),tt(o,i,'"from"'),tt(a,i,'"to"'),bn(i,a,"to"),At(K({parent:o,child:a,meta:{op:t,config:s},family:{},regional:1}))},E.fromObservable=function(e){Pn(e);var t=gn in e?e[gn]():e;j(t.subscribe,"expect observable to have .subscribe");var n=te(),r=At(n);return t.subscribe({next:n,error:r,complete:r}),n},E.guard=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ae(t),o=r[0],a=o[0],s=o[1],i=r[1],l=ce("guard",i);return he(0,"guard","sample",l),s||(a=(s=a).source),Vn(s,l),cn("guard",s.clock,a,s.filter,s.target,null,s.name,i,!s.greedy,0,1)},E.hydrate=function(e,t){var n=t.values;j(me(n),"values property should be an object");var r=rn(n),o=r.sidMap,a=r.unitMap,s=Object.getOwnPropertyNames(o),i={};W(a,function(x,d){i[d.stateRef.id]=d});var l,c,p,y=[],h=[];dt(e)?(p=1,j((l=e).cloneOf,"scope should be created from domain"),he(0,"hydrate(fork(domain), { values })","fork({ values })"),c=q(l.cloneOf)):It(e)?(he(0,"hydrate(domain, { values })","fork({ values })"),c=q(e)):j(0,"first argument of hydrate should be domain or scope"),Wn(c,function(x,d){if(d&&Xe(s,d)){V(y,x);var g=J(x,"serialize");g&&g!=="ignore"&&(o[d]=g.read(o[d])),V(h,o[d])}else x.scope.state.id in i&&(V(y,x),V(h,a.get(i[x.scope.state.id])))},1),ke({target:y,params:h,scope:l}),p&&Object.assign(l.values.sidMap,o)},E.is=Vo,E.launch=ke,E.merge=hr,E.restore=function(e,t,n){var r=ce("restore",n);if(j(!G(e),"restore($store) is not supported",r),xn(e)||Ie(e)){var o=le(e),a=De(t,{parent:o,name:e.shortName,and:n});return _e(Ie(e)?e.doneData:e,a),o&&o.hooks.store(a),a}var s=Array.isArray(e)?[]:{};return Ce(e,function(i,l){return s[l]=G(i)?i:De(i,{name:l})}),s},E.sample=function(){for(var e,t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a,s,i=Ae(r),l=i[0],c=l[0],p=l[1],y=l[2],h=i[1],x=1,d=ce("sample",h);return de(p)&&me(c)&&Vn(c,d)&&(p=c.clock,y=c.fn,"batch"in c?x=c.batch:(he(!("greedy"in c),"greedy in sample","batch",d),x=!c.greedy),s=c.filter,e=c.target,t=c.name,a=c.sid,c=c.source),cn("sample",p,c,s,e,y,t,h,x,1,0,a)},E.scopeBind=function(e,t){var n=t===void 0?{}:t,r=n.scope;j(r||P||n.safe,"scopeBind: scope not found");var o=r||P;return function(a){function s(){jt(c)}var i,l=0,c=P;jt(o);try{i=e(a)}catch(p){i=p,l=1}if(s(),l)throw i;return i instanceof Promise&&i.then(s,s),i}},E.serialize=function(e,t){t===void 0&&(t={}),e.warnSerialize&&console.error("There is a store without sid in this scope, its value is omitted"),j(!e.hasSidDoubles,"duplicate sid found in this scope");var n=t.ignore?t.ignore.map(function(o){return o.sid}):[],r={};return Ce(e.values.sidMap,function(o,a){var s;if(!Xe(n,a)){var i=e.sidIdMap[a],l=(s=e.sidSerializeSettings.get(a))!==null&&s!==void 0?s:{ignore:0,write:na};l.ignore||(r[a]=(0,l.write)(i&&i in e.reg?e.reg[i].current:o))}}),"onlyChanges"in t&&(he(0,"onlyChanges"),t.onlyChanges||(j(e.cloneOf,"scope should be created from domain"),Wn(q(e.cloneOf),function(o,a){a in r||Xe(n,a)||J(o,"isCombine")||J(o,"serialize")==="ignore"||(r[a]=e.getState(o))}))),r},E.setGraphInspector=function(e){hn=e},E.setInspector=function(e){yn=e},E.setStoreName=function(e,t){e.shortName=t,Object.assign(Tt(e),pn(t,le(e)))},E.split=function(){for(var e,t,n="split",r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=Ae(o),i=s[0],l=i[0],c=i[1],p=s[1],y=ce(n,p),h=!c;h&&(e=l.cases,c=l.match,t=l.clock,l=l.source);var x=G(c),d=!ue(c)&&oe(c),g=!x&&!d&&me(c);j(ue(l),"source must be a unit",y),e||(e={}),h?Ce(e,function(C,k){return bn(y,C,"cases."+k)}):(j(g,"match should be an object",y),Ce(c,function(C,k){return e[k]=te({derived:1,named:"cases."+k,and:p})}),e.__=te({derived:1,named:"cases.__",and:p}));var b,u=new Set([].concat(l,t||[],Object.values(e))),m=Object.keys(x||d?e:c);if(x||d)x&&u.add(c),b=[x&&Ne(pe(c),0,1),Ve({safe:x,filter:1,pure:!x,fn:function(C,k,R){var M=String(x?R.a:c(C));un(k,Xe(m,M)?M:"__",C,R)}})];else if(g){var w=qe({});w.type="shape";var $,S=[];Ce(c,function(C,k){if(ue(C)){$=1,V(S,k),u.add(C);var R=_e(C,[],[Ne(w),Z(function(A,I,B){return B.a[k]=A})]);if(G(C)){w.current[k]=C.getState();var M=pe(C);Pt(w,{from:M,field:k,type:"field"}),fe("splitMatchStore",M,R)}}}),$&&fe("splitBase",w),b=[$&&Ne(w,0,1),Me(function(C,k,R){for(var M=0;M<m.length;M++){var A=m[M];if(Xe(S,A)?R.a[A]:c[A](C))return void un(k,A,C,R)}un(k,"__",C,R)},1)]}else j(0,"expect match to be unit, function or object");var T=K({meta:{op:n},parent:t?[]:l,scope:e,node:b,family:{owners:Array.from(u)},regional:1});if(t&&cn(n,t,l,null,T,null,n,p,0,0,0),!h)return e},E.step=pt,E.version="23.1.0",E.withFactory=function(e){var t=e.sid,n=e.name,r=e.loc,o=e.method,a=e.fn;return Fn(K({meta:{sidRoot:xr(t),sid:t,name:n,loc:r,method:o,type:"factory"}}),a)},E.withRegion=Fn;var We;function ra(e){return e&&typeof e=="object"&&"default"in e?e.default:e}function Dt(e,t){return t.displayName=e,t}function kn(e,t){var n=L.is.unit(e),r={};n?r={unit:e}:"@@unitShape"in e?typeof e["@@unitShape"]=="function"?r=e["@@unitShape"]():je("expect @@unitShape to be a function"):r=e;var o=Array.isArray(r),a=_.useRef({stale:1,justSubscribed:0,scope:t}),s=_.useMemo(function(){a.current.stale=1;var g=Array.isArray(r)?[]:{},b=[],u=[],m=[],w=[];for(var $ in r)if({}.hasOwnProperty.call(r,$)){var S=r[$];L.is.unit(S)||je("expect useUnit "+(n?"argument":'value in key "'+$+'"')+" to be a unit"),L.is.event(S)||L.is.effect(S)?(g[$]=t?L.scopeBind(S,{scope:t}):S,m.push($),w.push(S)):(g[$]=null,b.push($),u.push(S))}return[g,b,u,m,w]},[a,t].concat(Object.keys(r),Object.values(r))),i=s[0],l=s[1],c=s[2],p=s[3],y=s[4],h=_.useRef({value:i,storeKeys:l,eventKeys:p,eventValues:y}),x=_.useCallback(function(g){var b=a.current;return b.justSubscribed=1,L.createWatch({unit:c,fn:function(){b.stale||(b.stale=1,g())},scope:t,batch:1})},[c,t,h,a]),d=_.useCallback(function(){var g,b=h.current,u=a.current,m=0,w=b.value,$=b.storeKeys,S=b.eventKeys,T=b.eventValues,C=t!==u.scope;if(u.stale||u.justSubscribed||C){m=!u.justSubscribed||C,g=o?[].concat(i):Object.assign({},i),$.length===l.length&&S.length===p.length||(m=1);for(var k=0;k<l.length;k++){var R=Dn(c[k],t),M=l[k];m||(m=$.includes(M)?w[M]!==R:1),g[M]=R}for(var A=0;A<p.length;A++){var I=y[A],B=p[A];m||(m=S.includes(B)?T[S.indexOf(B)]!==I:1)}}return m&&(b.value=g),b.storeKeys=l,b.eventKeys=p,b.eventValues=y,u.stale=0,u.justSubscribed=!m,u.scope=t,n?b.value.unit:b.value},[x,c,y,t,h,a]);return Er.useSyncExternalStore(x,d,d)}function dn(e,t){var n,r,o,a,s=e[0],i=e[1],l=tr;if(i)n=i,o=s,a=[];else{n=s.fn,o=s.store,a=s.keys,r=s.defaultValue;var c=s.updateFilter;l=c===void 0?tr:c}L.is.store(o)||je("useStoreMap expects a store"),Array.isArray(a)||je("useStoreMap expects an array as keys"),typeof n!="function"&&je("useStoreMap expects a function");var p=_.useCallback(function(g){return L.createWatch({unit:o,fn:g,scope:t})},[o,t]),y=_.useCallback(function(){return Dn(o,t)},[o,t]),h=_.useRef(),x=_.useRef(),d=_.useRef(a);return sa.useSyncExternalStoreWithSelector(p,y,y,function(g){if(h.current!==g||!function(u,m){if(!u||!m||u.length!==m.length)return 0;for(var w=1,$=0;$<u.length;$++)if(u[$]!==m[$]){w=0;break}return w}(d.current,a)){var b=n(g,a);b===void 0&&r!==void 0&&(b=r),h.current=g,d.current=a,b!==void 0&&(x.current=b)}return x.current},function(g,b){return!l(b,g)})}function Jn(e,t,n){t===void 0&&(t={});var r=kn({open:e.open,close:e.close,set:e.set},n),o=r.open,a=r.close,s=r.set,i=_.useMemo(function(){return{open:o,close:a,set:s}},[e,o]),l=_.useRef({value:null,count:0});jn(function(){return i.open(l.current.value),function(){return i.close(l.current.value)}},[i]),function(c,p){if(c===p)return 1;if(typeof c=="object"&&c!==null&&typeof p=="object"&&p!==null){var y=Object.keys(c),h=Object.keys(p);if(y.length!==h.length)return 0;for(var x=0;x<y.length;x++){var d=y[x];if(c[d]!==p[d])return 0}return 1}return 0}(l.current.value,t)||(l.current.value=t,l.current.count+=1),jn(function(){i.set(l.current.value)},[l.current.count])}function Oe(e){var t=_.useContext(Mr);return e&&!t&&je("No scope found, consider adding <Provider> to app root"),t}function Nn(e,t){return function(n,r){Rr(1,"useStore","useUnit"),L.is.store(n)||je("expect useStore argument to be a store");var o=_.useCallback(function(s){return L.createWatch({unit:n,fn:s,scope:r})},[n,r]),a=_.useCallback(function(){return Dn(n,r)},[n,r]);return Er.useSyncExternalStore(o,a,a)}(e,Oe(t==null?void 0:t.forceScope))}function er(e,t){function n(i){var l=_.useRef(i),c=Nn(r);jn(function(){return a({props:l.current,state:r.getState()}),function(){s({props:l.current,state:r.getState()})}},[]);var p=t(i,c);return l.current=i,p}var r;En("createComponent","@effector/reflect"),L.is.store(e)?r=e:typeof e=="object"&&e!==null?r=L.combine(e):je("shape should be a store or object with stores");var o="Unknown";r&&r.shortName&&(o=r.shortName);var a=L.createEvent(),s=L.createEvent();return n.mounted=a,n.unmounted=s,Dt(o+".View",n)}function Nr(e,t){var n,r=t?e:e[0];(function(l){if(!l)throw Error("expect first argument be an object")})(et(n=r)||function(l){return typeof l=="function"}(n));var o=r.or,a=r.and;if(a){var s=t?a:a[0];if(et(s)&&"and"in s){var i=Nr(a,t);e=i[0],o=Object.assign({},o,i[1])}else e=a}return[e,o]}function oa(e){function t(x){return o(t,x,Oe()),null}var n=e.domain,r=e.defaultState,o=e.hook,a=ia({or:e.maybeConfig,and:e.mainConfig}),s=(n?n.compositeName.fullName+"/":"")+(a.name||"gate"),i=L.createEvent({name:s+".set",sid:a.sid?a.sid+"|set":void 0}),l=L.createEvent({name:s+".open",sid:a.sid?a.sid+"|open":void 0}),c=L.createEvent({name:s+".close",sid:a.sid?a.sid+"|close":void 0}),p=L.createStore(!1,{name:s+".status",serialize:"ignore"}).on(l,function(){return!0}).on(c,function(){return!1}),y=L.createStore(r,{name:s+".state",sid:a.sid}).on(i,function(x,d){return d}).on(l,function(x,d){return d}).reset(c);if(n){var h=n.hooks;L.launch({target:[h.store,h.store,h.event,h.event,h.event],params:[p,y,l,c,i]})}return t.open=l,t.close=c,t.status=p,t.state=y,t.set=i,Dt("Gate:"+s,t)}function aa(e,t){var n,r,o,a=Nr(t&&et(n=t[0])&&(n.and||n.or)?t:[{and:t}]),s=a[0],i=s[0],l=s[1],c={},p={},y=a[1];return typeof i=="string"?(p={name:i},et(o=l)&&"sid"in o||(c=l||{})):function(h){return et(h)&&("domain"in h||"defaultState"in h||"name"in h)}(i)&&(p=i,c=i.defaultState||{},r=i.domain),{hook:e,domain:r,defaultState:c,mainConfig:p,maybeConfig:y}}Object.defineProperty(ie,"__esModule",{value:1});var jr=v,L=E,Er=Qr,sa=Jr,_=ra(jr),je=function(e){throw Error(e)},jn=typeof window<"u"?_.useLayoutEffect:_.useEffect,Rr=function(e,t,n){jr.useEffect(function(){e&&console.error(t+" is deprecated"+(n?", prefer "+n+" instead":""))},[e,t,n])},Dn=function(e,t){return t?t.getState(e):e.getState()},tr=function(e,t){return e!==t},Mr=_.createContext(null),En=function(e,t){console.error(e+" is deprecated"+(t?", use "+t+" instead":""))},et=function(e){return typeof e=="object"&&e!==null},ia=function e(t,n){return n===void 0&&(n={}),et(t)&&(e(t.or,n),function(r){for(var o in r)s=o,function(i){return i===void 0}(a=r[o])||s==="or"||s==="and"||(n[s]=a);var a,s}(t),e(t.and,n)),n};ie.Provider=Mr.Provider,ie.connect=function(e){return En("connect","useUnit"),function(t){var n=e;return typeof e!="function"&&(n=t,t=e),Dt("Connect("+(n.displayName||n.name||"Unknown")+")",function(r){return _.createElement(n,Object.assign({},r,Nn(t)))})}},ie.createComponent=er,ie.createGate=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oa(aa(Jn,t))},ie.createStoreConsumer=function(e){return En("createStoreConsumer","useUnit"),er(e,function(t,n){return(0,t.children)(n)})},ie.useEvent=function(e,t){return function(n,r){if(Rr(1,"useEvent","useUnit"),!r)return n;var o=L.is.unit(n)||typeof n!="object"?{event:n}:n;return _.useMemo(function(){if(L.is.unit(n))return L.scopeBind(n,{scope:r});var a=Array.isArray(n)?[]:{};for(var s in n)a[s]=L.scopeBind(n[s],{scope:r});return a},[r].concat(Object.keys(o),Object.values(o)))}(e,Oe(t==null?void 0:t.forceScope))},ie.useGate=function(e,t,n){return t===void 0&&(t={}),Jn(e,t,Oe(n==null?void 0:n.forceScope))},ie.useList=function(e,t,n){return function(r,o,a){var s,i,l,c=[];typeof o=="object"&&o!==null?(o.keys&&(c=o.keys),s=o.fn,i=o.getKey,l=o.placeholder):s=o,L.is.store(r)||je("expect useList first argument to be a store"),typeof s!="function"&&je("expect useList's renderItem to be a function"),Array.isArray(c)||je("expect useList's keys to be an array");var p=_.useMemo(function(){var g=Dt((r.shortName||"Unknown")+".Item",function(b){var u=b.index,m=b.keys;if(y.current[1])return y.current[0](b.value,b.keyVal);var w=dn([{store:r,keys:[u].concat(m),fn:function($,S){return $[S[0]]}}],a);return y.current[0](w,u)});return _.memo(g)},[r,a,!!i]),y=_.useRef([s,i]);y.current=[s,i];var h=_.useMemo(function(){return c},c);if(i){var x=kn(r,a);return x.length===0&&l?l:x.map(function(g){var b=y.current[1](g);return _.createElement(p,{keyVal:b,key:b,keys:h,value:g})})}var d=dn([{store:r,keys:[r],fn:function(g){return g.length}}],a);return d===0&&l?l:Array.from({length:d},function(g,b){return _.createElement(p,{index:b,key:b,keys:h})})}(e,t,Oe(n==null?void 0:n.forceScope))},ie.useProvidedScope=function(){return Oe()||null},ie.useStore=Nn,ie.useStoreMap=function(e,t){return dn([e,t],Oe(e==null?void 0:e.forceScope))},We=ie.useUnit=function(e,t){return kn(e,Oe(t==null?void 0:t.forceScope))};const Tr=v.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Tr.displayName="Card";const ca=v.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t}));ca.displayName="CardHeader";const la=v.forwardRef(({className:e,...t},n)=>f.jsx("h3",{ref:n,className:Q("text-2xl font-semibold tracking-tight",e),...t}));la.displayName="CardTitle";const ua=v.forwardRef(({className:e,...t},n)=>f.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));ua.displayName="CardDescription";const da=v.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t}));da.displayName="CardContent";const fa=v.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,className:Q("flex items-center p-6 pt-0",e),...t}));fa.displayName="CardFooter";const Kt=v.forwardRef(({className:e,...t},n)=>f.jsx("textarea",{className:Q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Kt.displayName="Textarea";const pa=({leftContent:e,rightContent:t,...n})=>{const r=Ke(eo),o=Lt(at.$value,a=>(a==null?void 0:a.rate)||0);return f.jsxs("span",{...n,children:[e,Qe.format.dateTime(r,{format:"time",asTime:!0}),f.jsx("span",{className:"pl-1 text-xs font-medium text-reverse/60",children:"(".concat(+(o*(r/Ue(1,"hour"))).toFixed(2)," руб.)")}),t]})},ma=({className:e})=>{const t=We(at),n=We(to),r=v.useRef(null),o=We({finishActiveLog:no,continueActiveLog:ro,pauseActiveLog:oo,createActiveLog:ao});return v.useEffect(()=>{n.value&&r.current&&n.value.meta!==r.current.value&&(r.current.value=n.value.meta)},[!!n.value]),f.jsxs(Tr,{className:ir("flex flex-col items-center justify-center gap-2 p-4",e),children:[f.jsxs("h1",{className:"inline-flex w-full flex-1 text-xl font-semibold",children:["Трекер",n.value?" (".concat(n.value.projectName,")"):""]}),f.jsx(Kt,{ref:r,onChange:a=>{n.value&&n.update({meta:a.target.value})},className:"!h-[40px] bg-card",placeholder:n.value?"Чем занимаешься?":"Чем будешь заниматься?"}),f.jsx("div",{className:"mt-4 flex w-full flex-row items-center gap-2",children:n.value?f.jsxs(f.Fragment,{children:[f.jsx(pa,{className:so("relative mr-auto flex items-center text-2xl font-bold",{"text-reverse":n.value.status==="paused","text-destructive":n.value.status!=="paused"}),title:"Сохранение лога начинается от 1 минуты",style:{opacity:Math.max(io(n.value.spentTime,0,Ue(1,"min"))/Ue(1,"min"),.5)},leftContent:n.value.status==="active"&&f.jsx(f.Fragment,{children:f.jsxs("span",{className:"relative mr-2 flex h-4 w-4",children:[f.jsx("span",{className:"absolute block h-full w-full animate-ping rounded-full bg-destructive opacity-75"}),f.jsx("span",{className:"relative block h-4 w-4 rounded-full bg-destructive"})]})})}),f.jsx(X,{variant:(n.value.status==="active","destructive"),disabled:n.value.status==="active",onClick:()=>{o.finishActiveLog(),r.current&&(r.current.value="")},children:"ЗАВЕРШИТЬ"}),n.value.status==="paused"?f.jsx(X,{style:{width:150},variant:"positive",onClick:o.continueActiveLog,children:"ПРОДОЛЖИТЬ"}):f.jsx(X,{style:{width:150},variant:"outline",className:"bg-card",onClick:o.pauseActiveLog,children:"ПАУЗА"})]}):f.jsx(X,{disabled:!t.value,className:"ml-auto",variant:"positive",onClick:()=>{var a,s;o.createActiveLog({meta:((a=r.current)==null?void 0:a.value)||"",lastTickDate:null,startDate:new Date().toISOString(),spentTime:0,projectName:((s=t.value)==null?void 0:s.name)||"",status:"active"})},children:"ПРИСТУПИТЬ К РАБОТЕ"})})]})};function nr(e,[t,n]){return Math.min(n,Math.max(t,e))}function va(e){const t=e+"CollectionProvider",[n,r]=cr(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=x=>{const{scope:d,children:g}=x,b=Ee.useRef(null),u=Ee.useRef(new Map).current;return Ee.createElement(o,{scope:d,itemMap:u,collectionRef:b},g)},i=e+"CollectionSlot",l=Ee.forwardRef((x,d)=>{const{scope:g,children:b}=x,u=a(i,g),m=be(d,u.collectionRef);return Ee.createElement(fn,{ref:m},b)}),c=e+"CollectionItemSlot",p="data-radix-collection-item",y=Ee.forwardRef((x,d)=>{const{scope:g,children:b,...u}=x,m=Ee.useRef(null),w=be(d,m),$=a(c,g);return Ee.useEffect(()=>($.itemMap.set(m,{ref:m,...u}),()=>void $.itemMap.delete(m))),Ee.createElement(fn,{[p]:"",ref:w},b)});function h(x){const d=a(e+"CollectionConsumer",x);return Ee.useCallback(()=>{const b=d.collectionRef.current;if(!b)return[];const u=Array.from(b.querySelectorAll("[".concat(p,"]")));return Array.from(d.itemMap.values()).sort(($,S)=>u.indexOf($.ref.current)-u.indexOf(S.ref.current))},[d.collectionRef,d.itemMap])}return[{Provider:s,Slot:l,ItemSlot:y},h,r]}const ha=v.createContext(void 0);function ga(e){const t=v.useContext(ha);return e||t||"ltr"}function xa(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const ba=[" ","Enter","ArrowUp","ArrowDown"],ya=[" ","Enter"],Gt="Select",[Yt,Zt,wa]=va(Gt),[it,Cs]=cr(Gt,[wa,lr]),Ln=lr(),[$a,Ge]=it(Gt),[Sa,Ca]=it(Gt),ka=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:s,defaultValue:i,onValueChange:l,dir:c,name:p,autoComplete:y,disabled:h,required:x}=e,d=Ln(t),[g,b]=v.useState(null),[u,m]=v.useState(null),[w,$]=v.useState(!1),S=ga(c),[T=!1,C]=Hn({prop:r,defaultProp:o,onChange:a}),[k,R]=Hn({prop:s,defaultProp:i,onChange:l}),M=v.useRef(null),A=g?!!g.closest("form"):!0,[I,B]=v.useState(new Set),ve=Array.from(I).map(F=>F.props.value).join(";");return v.createElement(bo,d,v.createElement($a,{required:x,scope:t,trigger:g,onTriggerChange:b,valueNode:u,onValueNodeChange:m,valueNodeHasChildren:w,onValueNodeHasChildrenChange:$,contentId:dr(),value:k,onValueChange:R,open:T,onOpenChange:C,dir:S,triggerPointerDownPosRef:M,disabled:h},v.createElement(Yt.Provider,{scope:t},v.createElement(Sa,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(F=>{B(ae=>new Set(ae).add(F))},[]),onNativeOptionRemove:v.useCallback(F=>{B(ae=>{const ee=new Set(ae);return ee.delete(F),ee})},[])},n)),A?v.createElement(Or,{key:ve,"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:y,value:k,onChange:F=>R(F.target.value),disabled:h},k===void 0?v.createElement("option",{value:""}):null,Array.from(I)):null))},Na="SelectTrigger",ja=v.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Ln(n),s=Ge(Na,n),i=s.disabled||r,l=be(t,s.onTriggerChange),c=Zt(n),[p,y,h]=Dr(d=>{const g=c().filter(m=>!m.disabled),b=g.find(m=>m.value===s.value),u=Lr(g,d,b);u!==void 0&&s.onValueChange(u.value)}),x=()=>{i||(s.onOpenChange(!0),h())};return v.createElement(co,U({asChild:!0},a),v.createElement(ye.button,U({type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":Ar(s.value)?"":void 0},o,{ref:l,onClick:ne(o.onClick,d=>{d.currentTarget.focus()}),onPointerDown:ne(o.onPointerDown,d=>{const g=d.target;g.hasPointerCapture(d.pointerId)&&g.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&(x(),s.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)},d.preventDefault())}),onKeyDown:ne(o.onKeyDown,d=>{const g=p.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&y(d.key),!(g&&d.key===" ")&&ba.includes(d.key)&&(x(),d.preventDefault())})})))}),Ea="SelectValue",Ra=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:s="",...i}=e,l=Ge(Ea,n),{onValueNodeHasChildrenChange:c}=l,p=a!==void 0,y=be(t,l.onValueNodeChange);return He(()=>{c(p)},[c,p]),v.createElement(ye.span,U({},i,{ref:y,style:{pointerEvents:"none"}}),Ar(l.value)?v.createElement(v.Fragment,null,s):a)}),Ma=v.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return v.createElement(ye.span,U({"aria-hidden":!0},o,{ref:t}),r||"▼")}),Ta=e=>v.createElement(go,U({asChild:!0},e)),rt="SelectContent",Ia=v.forwardRef((e,t)=>{const n=Ge(rt,e.__scopeSelect),[r,o]=v.useState();if(He(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?ur.createPortal(v.createElement(Ir,{scope:e.__scopeSelect},v.createElement(Yt.Slot,{scope:e.__scopeSelect},v.createElement("div",null,e.children))),a):null}return v.createElement(Pa,U({},e,{ref:t}))}),Pe=10,[Ir,Ye]=it(rt),Pa=v.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:s,side:i,sideOffset:l,align:c,alignOffset:p,arrowPadding:y,collisionBoundary:h,collisionPadding:x,sticky:d,hideWhenDetached:g,avoidCollisions:b,...u}=e,m=Ge(rt,n),[w,$]=v.useState(null),[S,T]=v.useState(null),C=be(t,N=>$(N)),[k,R]=v.useState(null),[M,A]=v.useState(null),I=Zt(n),[B,ve]=v.useState(!1),F=v.useRef(!1);v.useEffect(()=>{if(w)return lo(w)},[w]),uo();const ae=v.useCallback(N=>{const[z,...se]=I().map(D=>D.ref.current),[H]=se.slice(-1),O=document.activeElement;for(const D of N)if(D===O||(D==null||D.scrollIntoView({block:"nearest"}),D===z&&S&&(S.scrollTop=0),D===H&&S&&(S.scrollTop=S.scrollHeight),D==null||D.focus(),document.activeElement!==O))return},[I,S]),ee=v.useCallback(()=>ae([k,w]),[ae,k,w]);v.useEffect(()=>{B&&ee()},[B,ee]);const{onOpenChange:Y,triggerPointerDownPosRef:we}=m;v.useEffect(()=>{if(w){let N={x:0,y:0};const z=H=>{var O,D,$e,Se;N={x:Math.abs(Math.round(H.pageX)-((O=(D=we.current)===null||D===void 0?void 0:D.x)!==null&&O!==void 0?O:0)),y:Math.abs(Math.round(H.pageY)-(($e=(Se=we.current)===null||Se===void 0?void 0:Se.y)!==null&&$e!==void 0?$e:0))}},se=H=>{N.x<=10&&N.y<=10?H.preventDefault():w.contains(H.target)||Y(!1),document.removeEventListener("pointermove",z),we.current=null};return we.current!==null&&(document.addEventListener("pointermove",z),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",se,{capture:!0})}}},[w,Y,we]),v.useEffect(()=>{const N=()=>Y(!1);return window.addEventListener("blur",N),window.addEventListener("resize",N),()=>{window.removeEventListener("blur",N),window.removeEventListener("resize",N)}},[Y]);const[Fe,yt]=Dr(N=>{const z=I().filter(O=>!O.disabled),se=z.find(O=>O.ref.current===document.activeElement),H=Lr(z,N,se);H&&setTimeout(()=>H.ref.current.focus())}),Xt=v.useCallback((N,z,se)=>{const H=!F.current&&!se;(m.value!==void 0&&m.value===z||H)&&(R(N),H&&(F.current=!0))},[m.value]),Qt=v.useCallback(()=>w==null?void 0:w.focus(),[w]),Ze=v.useCallback((N,z,se)=>{const H=!F.current&&!se;(m.value!==void 0&&m.value===z||H)&&A(N)},[m.value]),wt=r==="popper"?rr:_a,ct=wt===rr?{side:i,sideOffset:l,align:c,alignOffset:p,arrowPadding:y,collisionBoundary:h,collisionPadding:x,sticky:d,hideWhenDetached:g,avoidCollisions:b}:{};return v.createElement(Ir,{scope:n,content:w,viewport:S,onViewportChange:T,itemRefCallback:Xt,selectedItem:k,onItemLeave:Qt,itemTextRefCallback:Ze,focusSelectedItem:ee,selectedItemText:M,position:r,isPositioned:B,searchRef:Fe},v.createElement(fo,{as:fn,allowPinchZoom:!0},v.createElement(po,{asChild:!0,trapped:m.open,onMountAutoFocus:N=>{N.preventDefault()},onUnmountAutoFocus:ne(o,N=>{var z;(z=m.trigger)===null||z===void 0||z.focus({preventScroll:!0}),N.preventDefault()})},v.createElement(mo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:N=>N.preventDefault(),onDismiss:()=>m.onOpenChange(!1)},v.createElement(wt,U({role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:N=>N.preventDefault()},u,ct,{onPlaced:()=>ve(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...u.style},onKeyDown:ne(u.onKeyDown,N=>{const z=N.ctrlKey||N.altKey||N.metaKey;if(N.key==="Tab"&&N.preventDefault(),!z&&N.key.length===1&&yt(N.key),["ArrowUp","ArrowDown","Home","End"].includes(N.key)){let H=I().filter(O=>!O.disabled).map(O=>O.ref.current);if(["ArrowUp","End"].includes(N.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(N.key)){const O=N.target,D=H.indexOf(O);H=H.slice(D+1)}setTimeout(()=>ae(H)),N.preventDefault()}})}))))))}),_a=v.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=Ge(rt,n),s=Ye(rt,n),[i,l]=v.useState(null),[c,p]=v.useState(null),y=be(t,C=>p(C)),h=Zt(n),x=v.useRef(!1),d=v.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:u,focusSelectedItem:m}=s,w=v.useCallback(()=>{if(a.trigger&&a.valueNode&&i&&c&&g&&b&&u){const C=a.trigger.getBoundingClientRect(),k=c.getBoundingClientRect(),R=a.valueNode.getBoundingClientRect(),M=u.getBoundingClientRect();if(a.dir!=="rtl"){const O=M.left-k.left,D=R.left-O,$e=C.left-D,Se=C.width+$e,Jt=Math.max(Se,k.width),en=window.innerWidth-Pe,tn=nr(D,[Pe,en-Jt]);i.style.minWidth=Se+"px",i.style.left=tn+"px"}else{const O=k.right-M.right,D=window.innerWidth-R.right-O,$e=window.innerWidth-C.right-D,Se=C.width+$e,Jt=Math.max(Se,k.width),en=window.innerWidth-Pe,tn=nr(D,[Pe,en-Jt]);i.style.minWidth=Se+"px",i.style.right=tn+"px"}const A=h(),I=window.innerHeight-Pe*2,B=g.scrollHeight,ve=window.getComputedStyle(c),F=parseInt(ve.borderTopWidth,10),ae=parseInt(ve.paddingTop,10),ee=parseInt(ve.borderBottomWidth,10),Y=parseInt(ve.paddingBottom,10),we=F+ae+B+Y+ee,Fe=Math.min(b.offsetHeight*5,we),yt=window.getComputedStyle(g),Xt=parseInt(yt.paddingTop,10),Qt=parseInt(yt.paddingBottom,10),Ze=C.top+C.height/2-Pe,wt=I-Ze,ct=b.offsetHeight/2,N=b.offsetTop+ct,z=F+ae+N,se=we-z;if(z<=Ze){const O=b===A[A.length-1].ref.current;i.style.bottom="0px";const D=c.clientHeight-g.offsetTop-g.offsetHeight,$e=Math.max(wt,ct+(O?Qt:0)+D+ee),Se=z+$e;i.style.height=Se+"px"}else{const O=b===A[0].ref.current;i.style.top="0px";const $e=Math.max(Ze,F+g.offsetTop+(O?Xt:0)+ct)+se;i.style.height=$e+"px",g.scrollTop=z-Ze+g.offsetTop}i.style.margin="".concat(Pe,"px 0"),i.style.minHeight=Fe+"px",i.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[h,a.trigger,a.valueNode,i,c,g,b,u,a.dir,r]);He(()=>w(),[w]);const[$,S]=v.useState();He(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const T=v.useCallback(C=>{C&&d.current===!0&&(w(),m==null||m(),d.current=!1)},[w,m]);return v.createElement(Aa,{scope:n,contentWrapper:i,shouldExpandOnScrollRef:x,onScrollButtonChange:T},v.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$}},v.createElement(ye.div,U({},o,{ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}}))))}),rr=v.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Pe,...a}=e,s=Ln(n);return v.createElement(xo,U({},s,a,{ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Aa,zn]=it(rt,{}),or="SelectViewport",Oa=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Ye(or,n),a=zn(or,n),s=be(t,o.onViewportChange),i=v.useRef(0);return v.createElement(v.Fragment,null,v.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),v.createElement(Yt.Slot,{scope:n},v.createElement(ye.div,U({"data-radix-select-viewport":"",role:"presentation"},r,{ref:s,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ne(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=a;if(y!=null&&y.current&&p){const h=Math.abs(i.current-c.scrollTop);if(h>0){const x=window.innerHeight-Pe*2,d=parseFloat(p.style.minHeight),g=parseFloat(p.style.height),b=Math.max(d,g);if(b<x){const u=b+h,m=Math.min(x,u),w=u-m;p.style.height=m+"px",p.style.bottom==="0px"&&(c.scrollTop=w>0?w:0,p.style.justifyContent="flex-end")}}}i.current=c.scrollTop})}))))}),Da="SelectGroup",[ks,La]=it(Da),za="SelectLabel",Ha=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=La(za,n);return v.createElement(ye.div,U({id:o.id},r,{ref:t}))}),Rn="SelectItem",[Fa,Pr]=it(Rn),Ba=v.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...s}=e,i=Ge(Rn,n),l=Ye(Rn,n),c=i.value===r,[p,y]=v.useState(a!=null?a:""),[h,x]=v.useState(!1),d=be(t,u=>{var m;return(m=l.itemRefCallback)===null||m===void 0?void 0:m.call(l,u,r,o)}),g=dr(),b=()=>{o||(i.onValueChange(r),i.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.createElement(Fa,{scope:n,value:r,disabled:o,textId:g,isSelected:c,onItemTextChange:v.useCallback(u=>{y(m=>{var w;return m||((w=u==null?void 0:u.textContent)!==null&&w!==void 0?w:"").trim()})},[])},v.createElement(Yt.ItemSlot,{scope:n,value:r,disabled:o,textValue:p},v.createElement(ye.div,U({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},s,{ref:d,onFocus:ne(s.onFocus,()=>x(!0)),onBlur:ne(s.onBlur,()=>x(!1)),onPointerUp:ne(s.onPointerUp,b),onPointerMove:ne(s.onPointerMove,u=>{if(o){var m;(m=l.onItemLeave)===null||m===void 0||m.call(l)}else u.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ne(s.onPointerLeave,u=>{if(u.currentTarget===document.activeElement){var m;(m=l.onItemLeave)===null||m===void 0||m.call(l)}}),onKeyDown:ne(s.onKeyDown,u=>{var m;((m=l.searchRef)===null||m===void 0?void 0:m.current)!==""&&u.key===" "||(ya.includes(u.key)&&b(),u.key===" "&&u.preventDefault())})}))))}),Ct="SelectItemText",Va=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,s=Ge(Ct,n),i=Ye(Ct,n),l=Pr(Ct,n),c=Ca(Ct,n),[p,y]=v.useState(null),h=be(t,u=>y(u),l.onItemTextChange,u=>{var m;return(m=i.itemTextRefCallback)===null||m===void 0?void 0:m.call(i,u,l.value,l.disabled)}),x=p==null?void 0:p.textContent,d=v.useMemo(()=>v.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},x),[l.disabled,l.value,x]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=c;return He(()=>(g(d),()=>b(d)),[g,b,d]),v.createElement(v.Fragment,null,v.createElement(ye.span,U({id:l.textId},a,{ref:h})),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?ur.createPortal(a.children,s.valueNode):null)}),Wa="SelectItemIndicator",Ua=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Pr(Wa,n).isSelected?v.createElement(ye.span,U({"aria-hidden":!0},r,{ref:t})):null}),ar="SelectScrollUpButton",qa=v.forwardRef((e,t)=>{const n=Ye(ar,e.__scopeSelect),r=zn(ar,e.__scopeSelect),[o,a]=v.useState(!1),s=be(t,r.onScrollButtonChange);return He(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=i.scrollTop>0;a(c)};const i=n.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?v.createElement(_r,U({},e,{ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=n;i&&l&&(i.scrollTop=i.scrollTop-l.offsetHeight)}})):null}),sr="SelectScrollDownButton",Ka=v.forwardRef((e,t)=>{const n=Ye(sr,e.__scopeSelect),r=zn(sr,e.__scopeSelect),[o,a]=v.useState(!1),s=be(t,r.onScrollButtonChange);return He(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=i.scrollHeight-i.clientHeight,p=Math.ceil(i.scrollTop)<c;a(p)};const i=n.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?v.createElement(_r,U({},e,{ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=n;i&&l&&(i.scrollTop=i.scrollTop+l.offsetHeight)}})):null}),_r=v.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=Ye("SelectScrollButton",n),s=v.useRef(null),i=Zt(n),l=v.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return v.useEffect(()=>()=>l(),[l]),He(()=>{var c;const p=i().find(y=>y.ref.current===document.activeElement);p==null||(c=p.ref.current)===null||c===void 0||c.scrollIntoView({block:"nearest"})},[i]),v.createElement(ye.div,U({"aria-hidden":!0},o,{ref:t,style:{flexShrink:0,...o.style},onPointerDown:ne(o.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:ne(o.onPointerMove,()=>{var c;(c=a.onItemLeave)===null||c===void 0||c.call(a),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:ne(o.onPointerLeave,()=>{l()})}))}),Ga=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return v.createElement(ye.div,U({"aria-hidden":!0},r,{ref:t}))});function Ar(e){return e===""||e===void 0}const Or=v.forwardRef((e,t)=>{const{value:n,...r}=e,o=v.useRef(null),a=be(t,o),s=xa(n);return v.useEffect(()=>{const i=o.current,l=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==n&&p){const y=new Event("change",{bubbles:!0});p.call(i,n),i.dispatchEvent(y)}},[s,n]),v.createElement(vo,{asChild:!0},v.createElement("select",U({},r,{ref:a,defaultValue:n})))});Or.displayName="BubbleSelect";function Dr(e){const t=ho(e),n=v.useRef(""),r=v.useRef(0),o=v.useCallback(s=>{const i=n.current+s;t(i),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(i)},[t]),a=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function Lr(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let s=Ya(e,Math.max(a,0));o.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function Ya(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const Za=ka,zr=ja,Xa=Ra,Qa=Ma,Ja=Ta,Hr=Ia,es=Oa,Fr=Ha,Br=Ba,ts=Va,ns=Ua,Vr=qa,Wr=Ka,Ur=Ga,rs=Za,os=Xa,qr=v.forwardRef(({className:e,children:t,...n},r)=>f.jsxs(zr,{ref:r,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,f.jsx(Qa,{asChild:!0,children:f.jsx(pr,{className:"h-4 w-4 opacity-50"})})]}));qr.displayName=zr.displayName;const Kr=v.forwardRef(({className:e,...t},n)=>f.jsx(Vr,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(Io,{className:"h-4 w-4"})}));Kr.displayName=Vr.displayName;const Gr=v.forwardRef(({className:e,...t},n)=>f.jsx(Wr,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(pr,{className:"h-4 w-4"})}));Gr.displayName=Wr.displayName;const Yr=v.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>f.jsx(Ja,{children:f.jsxs(Hr,{ref:o,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[f.jsx(Kr,{}),f.jsx(es,{className:Q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),f.jsx(Gr,{})]})}));Yr.displayName=Hr.displayName;const as=v.forwardRef(({className:e,...t},n)=>f.jsx(Fr,{ref:n,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));as.displayName=Fr.displayName;const Zr=v.forwardRef(({className:e,children:t,...n},r)=>f.jsxs(Br,{ref:r,className:Q("relative flex w-full cursor-default items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(ns,{children:f.jsx(To,{className:"h-4 w-4"})})}),f.jsx(ts,{children:t})]}));Zr.displayName=Br.displayName;const ss=v.forwardRef(({className:e,...t},n)=>f.jsx(Ur,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));ss.displayName=Ur.displayName;const is=()=>{var r;const e=We(yo),t=We(at),n=We(wo);return f.jsxs(rs,{value:(r=t.value)==null?void 0:r.name,disabled:e.empty,onValueChange:o=>n(e.value.find(a=>a.name===o)),children:[f.jsx(qr,{className:"max-w-[250px]",children:f.jsx(os,{placeholder:"Выберите проект..."})}),f.jsx(Yr,{children:e.value.map(o=>f.jsx(Zr,{value:o.name||"-",children:o.name||"-"},o.name))})]})},bt=e=>{const[t,n]=v.useState(!!e),r=v.useCallback(()=>n(o=>!o),[]);return[t,r,n]},cs=fr("flex rounded-md border border-input bg-background ring-offset-background file:border-0 file:bg-transparent placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{size:{default:"h-10 w-full px-3 py-2 text-sm file:text-sm file:font-medium",sm:"h-8 w-full px-1.5 text-sm file:text-sm file:font-medium"}},defaultVariants:{size:"default"}}),ot=v.forwardRef(({className:e,type:t,size:n,...r},o)=>f.jsx("input",{type:t,className:Q(cs({size:n,className:e})),ref:o,...r}));ot.displayName="Input";const ls=v.forwardRef((e,t)=>v.createElement(ye.label,U({},e,{ref:t,onMouseDown:n=>{var r;(r=e.onMouseDown)===null||r===void 0||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),Xr=ls,us=fr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ht=v.forwardRef(({className:e,...t},n)=>f.jsx(Xr,{ref:n,className:Q(us(),e),...t}));ht.displayName=Xr.displayName;const ds=()=>{const[e,,t]=bt(!1),n=v.useRef(null);return v.useLayoutEffect(()=>{var r;e||(r=n.current)==null||r.reset()},[e]),f.jsxs(zt,{open:e,onOpenChange:t,children:[f.jsx(Ht,{asChild:!0,children:f.jsx(X,{variant:"outline",size:"icon",className:"shrink-0",children:f.jsx(Oo,{className:"h-4 w-4"})})}),f.jsxs(Ft,{className:"sm:max-w-[425px]",children:[f.jsxs(Bt,{children:[f.jsx(Vt,{children:"Создание проекта"}),f.jsx(Mn,{children:"Создавай давай"})]}),f.jsxs("form",{ref:n,onSubmit:r=>{r.preventDefault(),r.stopPropagation();const o=n.current,a=Object.fromEntries(new FormData(o));$o({logs:[],rate:0,name:a.name}),o.reset(),t(!1),Wt({type:"success",message:"Проект успешно сделан!"})},children:[f.jsx("div",{className:"grid gap-4 py-4",children:f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(ht,{htmlFor:"name",className:"text-right",children:"Имя"}),f.jsx(ot,{id:"name",name:"name",required:!0,className:"col-span-3"})]})}),f.jsx(Ut,{children:f.jsx(X,{type:"submit",children:"Создать"})})]})]})]})},fs=()=>{const e=Ke(So),t=Lt(Tn,n=>!n);return f.jsx(X,{variant:"outline",size:"icon",className:"shrink-0",disabled:t,onClick:e,children:f.jsx(_o,{className:"h-4 w-4"})})},ps=({index:e,onDelete:t})=>{const[n,,r]=bt(!1),[o]=Ke([Co]),a=v.useRef(null);return v.useLayoutEffect(()=>{var s;n||(s=a.current)==null||s.reset()},[n]),f.jsxs(zt,{open:n,onOpenChange:r,children:[f.jsx(Ht,{asChild:!0,children:f.jsx(X,{className:"mt-auto h-5 w-5",size:"icon",variant:"destructive",children:f.jsx(zo,{className:"h-3 w-3"})})}),f.jsxs(Ft,{className:"sm:max-w-[425px]",children:[f.jsxs(Bt,{children:[f.jsx(Vt,{children:"Удаление лога"}),f.jsx(Mn,{children:"Нужно подтвердить удаление"})]}),f.jsx("form",{ref:a,onSubmit:s=>{s.preventDefault(),s.stopPropagation();const i=a.current;o({index:e}),i.reset(),t(),r(!1),Wt({type:"success",message:"Лог удалён!"})},children:f.jsxs(Ut,{children:[f.jsx(X,{type:"submit",variant:"destructive",children:"УДАЛИТЬ"}),f.jsx(X,{type:"button",variant:"ghost",onClick:()=>{r(!1)},children:"НЕ НАДО"})]})})]})]})};function ms(e){const t=/(https?:\/\/[-a-zA-Z0-9@:%._\\+~#?&//=]*)/g;return e.replace(t,n=>'<a href="'.concat(n,'" target="_blank" rel="nofollow" class="text-link">').concat(n,"</a>"))}const vs=e=>ms(jo(e)),hs=({log:e,index:t})=>{const[n,r,o]=bt(!1),[a]=Ke([ko]),[s,i]=v.useState(e.meta),[l,c]=v.useState(()=>{const p=Qe.parser.msDuration(e.spentTime);return{hours:p.hours,minutes:p.minutes}});return v.useLayoutEffect(()=>{if(!n){const p=Qe.parser.msDuration(e.spentTime);i(e.meta),c({hours:p.hours,minutes:p.minutes})}},[e,n]),f.jsx(f.Fragment,{children:f.jsxs("div",{className:"group relative my-1 select-text","data-active":n||void 0,children:[f.jsx("div",{className:"absolute left-0 top-0 h-full w-1 select-text rounded-sm ".concat(n?"bg-reverse/70":"bg-accent")}),f.jsx("span",{className:"ml-3 select-text text-sm text-foreground/70",children:Qe.format.dateTime(e.startDate,{format:"dddd, D, HH:mm A"})}),f.jsx("span",{className:"ml-1 inline-flex select-text text-sm text-foreground/70 ".concat(n?"mb-1.5":""),children:n?f.jsx(ot,{size:"sm",type:"time",className:"h-6.5 px-1.5 font-semibold text-foreground",value:"".concat(l.hours.toString().padStart(2,"0"),":").concat(l.minutes.toString().padStart(2,"0")),onChange:p=>{const[y,h]=p.target.value.split(":");c({hours:+y||0,minutes:+h||0})}}):f.jsx(f.Fragment,{children:f.jsx("span",{className:"select-text font-semibold text-foreground",children:Qe.format.dateTime(e.spentTime,{format:"time-short",asTime:!0})})})}),n?f.jsx(Kt,{className:"ml-3",value:s,onChange:p=>i(p.target.value)}):f.jsx("div",{className:"ml-3 select-text whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:vs(s)}}),f.jsx("div",{className:"absolute -left-6 top-0 flex flex-col gap-2 opacity-10 group-hover:opacity-100 group-data-[active]:opacity-100",children:n?f.jsxs(f.Fragment,{children:[f.jsx(X,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:r,children:f.jsx(No,{className:"h-3 w-3"})}),f.jsx(X,{size:"icon",variant:"positive",className:"mb-4 h-5 w-5",onClick:()=>{a({...e,meta:s,index:t,spentTime:l.hours*Ue(1,"hour")+l.minutes*Ue(1,"min")}),r()},children:f.jsx(Do,{className:"h-3 w-3"})}),f.jsx(ps,{index:t,onDelete:()=>o(!1)})]}):f.jsx(f.Fragment,{children:f.jsx(X,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:r,children:f.jsx(Lo,{className:"h-3 w-3"})})})})]})})},gs=()=>{const e=Lt(at.$value,t=>{if(!t)return null;if(!t.logs.length)return[];const n={};return t.logs.slice().map((r,o)=>({...r,index:o})).sort((r,o)=>new Date(o.startDate).getTime()-new Date(r.startDate).getTime()).forEach(r=>{const o=Qe.format.dateTime(r.startDate,{format:"month"});n[o]||(n[o]={label:o,logs:[]}),n[o].logs.push(r)}),Object.values(n)});return e?e.length?f.jsx("div",{className:"max-w-[540px] select-text",children:e.map(t=>f.jsxs("div",{className:"relative select-text py-4",children:[f.jsx("h1",{className:"sticky top-0 z-10 mb-2 select-text bg-custom-background/50 text-lg backdrop-blur-md",children:t.label}),f.jsx("div",{className:"flex select-text flex-col",children:t.logs.map((n,r)=>f.jsx(hs,{log:n,index:n.index},r))})]},t.label))}):f.jsx("div",{className:"my-40 text-center text-2xl text-accent",children:"Нет логов"}):f.jsx("div",{className:"my-40 text-center text-2xl text-accent",children:"Проект не выбран"})},xs=()=>{const e=Ke(Tn);return e?f.jsx("div",{className:"select-text p-1 text-sm font-semibold",children:e}):null},bs=({className:e})=>{const[t,,n]=bt(!1),r=v.useRef(null);return v.useLayoutEffect(()=>{var o;t||(o=r.current)==null||o.reset()},[t]),f.jsxs(zt,{open:t,onOpenChange:n,children:[f.jsx(Ht,{asChild:!0,children:f.jsx(X,{variant:"outline",size:"icon",className:ir("shrink-0",e),children:f.jsx(Po,{className:"h-4 w-4"})})}),f.jsxs(Ft,{className:"sm:max-w-[425px]",children:[f.jsx(Bt,{children:f.jsx(Vt,{children:"Ручное добавление лога"})}),f.jsxs("form",{ref:r,onSubmit:o=>{o.preventDefault(),o.stopPropagation();const a=r.current,s=Object.fromEntries(new FormData(a));console.info("fff",s);const[i,l]=s.time.split(":"),c=+i*Ue(1,"hour")+ +l*Ue(1,"min"),p=new Date(s.date).toISOString();Eo({startDate:p,spentTime:c,meta:s.description||""}),a.reset(),n(!1),Wt({type:"success",message:"Лог добавлен!"})},children:[f.jsx("div",{className:"grid gap-4 py-4",children:f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(ht,{htmlFor:"date",className:"text-right",children:"Дата"}),f.jsx(ot,{id:"date",name:"date",type:"date",required:!0,className:"col-span-3"})]})}),f.jsx("div",{className:"grid gap-4 py-4",children:f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(ht,{htmlFor:"time",className:"text-right",children:"Время"}),f.jsx(ot,{id:"time",name:"time",type:"time",required:!0,className:"col-span-3"})]})}),f.jsxs("div",{className:"grid gap-4 py-4",children:[f.jsx("div",{className:"grid grid-cols-4 items-center gap-4",children:f.jsx(ht,{htmlFor:"description",className:"text-right",children:"Описание"})}),f.jsx(Kt,{id:"description",name:"description"})]}),f.jsx(Ut,{children:f.jsx(X,{type:"submit",children:"Создать"})})]})]})]})},ys=()=>{const e=Ke(at);return e.value?f.jsx(ot,{type:"number",placeholder:"0",className:"max-w-[140px]",value:e.value.rate||"",onChange:t=>{e.update({rate:+t.target.value||0})}}):null},ws=()=>{const[e,,t]=bt(!1),n=v.useRef(null),r=Lt(Tn,o=>!o);return v.useLayoutEffect(()=>{var o;e||(o=n.current)==null||o.reset()},[e]),f.jsxs(zt,{open:e,onOpenChange:t,children:[f.jsx(Ht,{asChild:!0,disabled:r,children:f.jsx(X,{variant:"outline",size:"icon",className:"shrink-0",disabled:r,children:f.jsx(Ao,{className:"h-4 w-4"})})}),f.jsxs(Ft,{className:"sm:max-w-[425px]",children:[f.jsxs(Bt,{children:[f.jsx(Vt,{children:"Сброс данных по трекингу"}),f.jsx(Mn,{children:"Все логи по текущему проекту будут удалены"})]}),f.jsx("form",{ref:n,onSubmit:o=>{o.preventDefault(),o.stopPropagation();const a=n.current;at.update({logs:[]}),a.reset(),t(!1),Wt({type:"success",message:"Всё сброшено!"})},children:f.jsx(Ut,{children:f.jsx(X,{type:"submit",children:"ОК"})})})]})]})},Ns=()=>{const e=Ke(Mo);return f.jsx(Ro,{className:"flex flex-col",children:f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-row justify-between",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"проект:"}),f.jsxs("div",{className:"flex w-[260px] flex-row gap-2",children:[f.jsx(is,{}),f.jsx(ds,{})]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"ставка:"}),f.jsx(ys,{})]})]}),f.jsx(ma,{className:"mb-6 mr-auto mt-10 w-full"}),e&&f.jsxs("div",{className:"mb-4 flex flex-1 flex-row gap-2",children:[f.jsx(bs,{className:"mr-auto"}),f.jsx(ws,{}),f.jsx(fs,{})]}),f.jsx(xs,{}),f.jsx(gs,{})]})})};export{Ns as HomePage,Ss as homePageModel};
