var h=Object.defineProperty;var g=(s,e,r)=>e in s?h(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var n=(s,e,r)=>g(s,typeof e!="symbol"?e+"":e,r);import{m as x,a as m,r as k,c as b,P as R,b as a,_ as T,t as f}from"./bundle.DTo207aS.js";const C=s=>{let e;const r=b.default,o=c=>{const i=c!=null?c:null;r(t.current,i)||k(()=>{var l;const p=e;e=(l=t.current)!=null?l:void 0,t.current=i;let u=!1;t.listeners.forEach(d=>{d(t.current,e)===!1&&(u=!0)}),u?(e=p,t.current=e!=null?e:null):t.current===null&&e!==void 0&&(e=void 0)})},t=o;return t.set=o,t.listeners=new Set([]),t.current=null,t.meta={},x(t,{current:m.ref,meta:m}),t};class I extends R{constructor(){super(...arguments);n(this,"timeTracker",a.inject(T));n(this,"router",a.inject(f.router));n(this,"toasts",a.inject(f.toaster));n(this,"importContentRef",C());n(this,"handleExportClick",()=>{navigator.clipboard.writeText(JSON.stringify(this.timeTracker.export())),this.toasts.create({type:"success",message:"Скопировано в буффер!"})});n(this,"handleImportClick",()=>{if(this.importContentRef.current)try{const r=JSON.parse(this.importContentRef.current.value);if(!(r!=null&&r.projects))return;this.timeTracker.import(r),this.toasts.create({type:"success",message:"Импортировано!"})}catch(r){}})}mount(){super.mount(),document.title="Импорт/экспорт"}}export{I as ImportExportPageVM};
