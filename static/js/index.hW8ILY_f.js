import{c as Ie,s as Yr,w as Xr,r as v,j as f,a as Q,b as qe,$ as Qr,h as Xe,d as ar,e as ye,_ as U,D as Lt,f as Bt,B as X,t as sr,g as Ht,i as zt,k as Vt,l as Jr,m as Ft,n as Wt,o as Rt,p as vt,q as eo,u as to,v as no,x as ro,y as oo,z as ir,A as Ee,C as be,E as dn,F as cr,G as ao,H as ne,I as He,J as lr,K as so,L as io,M as co,N as lo,O as uo,P as ur,Q as fo,R as po,S as mo,T as vo,U as Ln,V as ho,W as go,X as xo,Y as Rn,Z as bo,a0 as yo,a1 as wo,a2 as $o,a3 as So,a4 as Co,a5 as jo,a6 as No,a7 as ko,a8 as Eo}from"./entry.MYF3TrxY.js";/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Ie("BadgePlus",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"16",key:"10p56q"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Ie("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Ie("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Lo=!0,ws=Object.freeze(Object.defineProperty({__proto__:null,skip:Lo},Symbol.toStringTag,{value:"Module"}));var ie={},E={};function Ce(e,t){for(var n in e)t(e[n],n)}function W(e,t){e.forEach(t)}function k(e,t,n){if(!e)throw Error((n?n+": ":"")+t)}function Bn(e,t){var n=q(e).meta||{};re={id:q(e).id,parent:re,value:e,template:n.template||ot(),sidRoot:n.sidRoot||re&&re.sidRoot,meta:n};try{return t()}finally{Tn("region"),re=le(re)}}function K(e){var t=e===void 0?{}:e,n=t.node,r=n===void 0?[]:n,o=t.parent,a=t.child,s=a===void 0?t.to||t.target:a,i=t.scope,l=i===void 0?{}:i,c=t.meta,p=c===void 0?{}:c,y=t.family,h=y===void 0?{type:"regular"}:y,x=t.regional,d=ut(o===void 0?t.from||t.source:o),g=ut(h.links),b=ut(h.owners),u=[];W(r,function(w){return w&&F(u,w)});var m={id:Fo(),seq:u,next:ut(s),meta:p,scope:l,family:{type:h.type||"crosslink",links:g,owners:b}};return W(g,function(w){return F(ht(w),m)}),W(b,function(w){return F(gt(w),m)}),W(d,function(w){return F(w.next,m)}),x&&re&&Be(ft(re),[m]),m}function je(e,t,n){var r,o=xe,a=null,s=M;if(e.target&&(t=e.params,n=e.defer,r=e.meta,o="page"in e?e.page:o,e.stack&&(a=e.stack),s=Le(e)||s,e=e.target),s&&M&&s!==M&&(M=null),Array.isArray(e))for(var i=0;i<e.length;i++)Ve("pure",o,q(e[i]),a,t[i],s,r);else Ve("pure",o,q(e),a,t,s,r);if(!n||$t){var l,c,p,y,h,x,d={isRoot:$t,currentPage:xe,scope:M,isWatch:Ct,isPure:jt};$t=0;for(var g=function(){var b=y.idx,u=y.stack,m=y.type;p=u.node,xe=h=u.page,M=Le(u),h?x=h.reg:M&&(x=M.reg);var w=!!h,$=!!M,S={fail:0,scope:p.scope};l=c=0;for(var I=b;I<p.seq.length&&!l;I++){var C=p.seq[I];if(C.order){var j=C.order,R=j.priority,T=j.barrierID,A=T?h?h.fullID+"_"+T:T:0;if(I!==b||m!==R)return T?on.has(A)||(on.add(A),yn(I,u,R,T)):yn(I,u,R,0),"continue|kernelLoop";T&&on.delete(A)}switch(C.type){case"mov":var P=C.data,V=void 0;switch(P.from){case"stack":V=ft(u);break;case"a":case"b":V=u[P.from];break;case"value":V=P.store;break;case"store":if(x&&!x[P.store.id])if(w){var ve=br(h,P.store.id);u.page=h=ve,ve?x=ve.reg:$?(_t(M,P.store,0,1,P.softRead),x=M.reg):x=void 0}else $&&_t(M,P.store,0,1,P.softRead);V=pt(x&&x[P.store.id]||P.store)}switch(P.to){case"stack":u.value=V;break;case"a":case"b":u[P.to]=V;break;case"store":$n(h,M,P.target,0).current=V}break;case"compute":var z=C.data;if(z.fn){Ct=p.meta.op==="watch",jt=z.pure;var ae=z.safe?(0,z.fn)(ft(u),S.scope,u):Zo(S,z.fn,u);z.filter?c=!ae:u.value=ae,Ct=d.isWatch,jt=d.isPure}}l=S.fail||c}if(bn&&bn(u,S),!l){var ee=ft(u),Z=Le(u);if(W(p.next,function(ze){Ve("child",h,ze,u,ee,Z)}),Z){p.meta.needFxCounter&&Ve("child",h,Z.fxCount,u,ee,Z),p.meta.storeChange&&Ve("child",h,Z.storeChange,u,ee,Z),p.meta.warnSerialize&&Ve("child",h,Z.warnSerializeNode,u,ee,Z);var we=Z.additionalLinks[p.id];we&&W(we,function(ze){Ve("child",h,ze,u,ee,Z)})}}};y=Ko();)g();$t=d.isRoot,xe=d.currentPage,M=Le(d)}}function fr(e,t){t===void 0&&(t="combine");var n=t+"(",r="",o=0;return Ce(e,function(a){o<25&&(a!=null&&(n+=r,n+=ue(a)?It(a).fullName:a.toString()),o+=1,r=", ")}),n+")"}function fn(e,t){var n,r,o=e;if(t){var a=It(t);e.length===0?(n=a.path,r=a.fullName):(n=a.path.concat([e]),r=a.fullName.length===0?e:a.fullName+"/"+e)}else n=e.length===0?[]:[e],r=e;return{shortName:o,fullName:r,path:n}}function ce(e,t){if(!t||!t.name&&!t.named&&!t.loc)return e;var n="["+e+"]",r=t.named||t.name;r&&(n+=" unit '"+r+"'");var o=t.loc;return!r&&o&&(n+=" ("+o.file+":"+o.line+":"+o.column+")"),n}function Ae(e,t){var n=t?e:e[0];In(n);var r=n.or,o=n.and;if(o){var a=t?o:o[0];if(me(a)&&"and"in a){var s=Ae(o,t);e=s[0],r=Object.assign({},r,s[1])}else e=o}return[e,r]}function pn(e){var t=function(){return e()};return t.unsubscribe=function(){return e()},t}function fe(e){var t=ot();if(t){for(var n=t.handlers[e],r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(n)return n.apply(void 0,[t].concat(o))}}function Bo(e,t,n,r){var o=xe,a=null;if(t)for(a=xe;a&&a.template!==t;)a=le(a);Kn(a);var s=e.create(n,r);return Kn(o),s}function te(e,t){var n=tt({or:t,and:typeof e=="string"?{name:e}:e}),r=ce("event",n),o=function i(l){k(!J(i,"derived"),"call of derived event is not supported, use createEvent instead",r),k(!jt,"unit call from pure function is not supported, use operators like sample instead",r);for(var c=arguments.length,p=new Array(c>1?c-1:0),y=1;y<c;y++)p[y-1]=arguments[y];return xe?Bo(i,a,l,p):i.create(l,p)},a=ot(),s=Object.assign(o,{graphite:K({meta:_n(n.actualOp||"event",o,n),regional:1}),create:function(i){return je({target:o,params:i,scope:M}),i},watch:function(i){return yr(o,i)},map:function(i){return an(o,"map",i,[Te()])},filter:function(i){return an(o,"filter",i.fn?i:i.fn,[Te(Ut,1)])},filterMap:function(i){return an(o,"filterMap",i,[Te(),Y(function(l){return!de(l)},1)])},prepend:function(i){k(o.targetable,".prepend of derived event is not supported, call source event instead",r);var l=te("* → "+o.shortName,{parent:le(o)});return fe("eventPrepend",q(l)),_e(l,o,[Te()],"prepend",i),Sn(o,l),l}});return n!=null&&n.domain&&n.domain.hooks.event(s),Re(s,"id",s.graphite.id),Tn(s.graphite),s}function Hn(e,t,n,r,o){return et(n,o+" "+t,"first argument"),k(oe(r),"second argument should be a function",o),he(!J(e,"derived"),t+" in derived store",t+" in store created via createStore",o),W(Array.isArray(n)?n:[n],function(a){e.off(a),Tt(e).set(a,At(wr(a,e,"on",Uo,r)))}),e}function De(e,t){var n=tt(t),r=Ue(e),o=ce("store",n),a=te({named:"updates",derived:1});fe("storeBase",r);var s=r.id,i="skipVoid"in n,l=i&&!n.skipVoid;he(!(i&&n.skipVoid),"{skipVoid: true}","updateFilter",o);var c={subscribers:new Map,updates:a,defaultState:e,stateRef:r,getState:function(){var u,m=r;if(xe){for(var w=xe;w&&!w.reg[s];)w=le(w);w&&(u=w)}return!u&&M&&(_t(M,r,1),u=M),u&&(m=u.reg[s]),pt(m)},setState:function(u){return je({target:c,params:u,defer:1,scope:M})},reset:function(){k(c.targetable,".reset of derived store is not supported",o);for(var u=arguments.length,m=new Array(u),w=0;w<u;w++)m[w]=arguments[w];return W(m,function($){return Hn(c,".reset",$,function(){return c.defaultState},o)}),c},on:function(u,m){return k(c.targetable,".on of derived store is not supported",o),Hn(c,".on",u,m,o)},off:function(u){var m=Tt(c).get(u);return m&&(m(),Tt(c).delete(u)),c},map:function(u,m){var w,$;me(u)&&(w=u,u=u.fn);var S=c.getState(),I=de(S);ot()?$=null:(!I||I&&l)&&($=u(S));var C=De($,Object.assign({name:c.shortName+" → *",derived:1},m,{and:w})),j=wr(c,C,"map",Ut,u);return Mt(pe(C),{type:"map",fn:u,from:r}),pe(C).noInit=1,fe("storeMap",r,j),C},watch:function(u,m){if(he(!m,"watch second argument","sample",o),!m||!ue(u)){var w=yr(c,u);return fe("storeWatch",r,u)||u(c.getState()),w}return k(oe(m),"second argument should be a function",o),u.watch(function($){return m(c.getState(),$)})}},p=_n("store",c,n),y=c.defaultConfig.updateFilter;c.graphite=K({scope:{state:r,fn:y},node:[Y(function(u,m,w){return w.scope&&!w.scope.reg[r.id]&&(w.b=1),u}),Ne(r),Y(function(u,m,w){var $=w.a,S=w.b,I=de(u);return I&&!i&&console.error(o+": "+Et),(I&&l||!I)&&(u!==$||S)},1),y&&Te(gr,1),ge({from:"stack",target:r})],child:a,meta:Object.assign({},p,{defaultState:e}),regional:1}),Re(c,"id",c.graphite.id),Re(c,"rootStateRefId",s);var h=J(c,"serialize"),x=J(c,"derived"),d=h==="ignore",g=J(c,"sid");g&&(Re(c,"storeChange",1),r.sid=g),g||d||x||Re(c,"warnSerialize",1);var b=de(e);return k(x||!b||b&&l,Et,o),x&&b&&!i&&console.error(o+": "+Et),Be(c,[a]),n!=null&&n.domain&&n.domain.hooks.store(c),x||(c.reinit=te({named:"reinit"}),c.reset(c.reinit)),r.meta=c.graphite.meta,Tn(c.graphite),c}function mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o,a,s=Ae(t);t=s[0];var i,l,c,p=ce("combine",a=s[1]),y=t[t.length-1],h=!G(y)&&me(y),x=h&&y,d=h?t[t.length-2]:y;if(oe(d)?(o=t.slice(0,h?-2:-1),r=d):o=t,o.length===1){var g=o[0];G(g)||(i=g,l=1)}if(!l&&(i=o,r)){c=1;var b=r;r=function(u){return b.apply(void 0,u)}}return k(me(i),p+": shape should be an object"),Xo(Array.isArray(i),!c,i,a,r,x)}function pr(){var e={};return e.req=new Promise(function(t,n){e.rs=t,e.rj=n}),e.req.catch(function(){}),e}function tn(e,t){t===void 0&&(t={});var n=tt(oe(e)?{handler:e}:e,t),r=ce("effect",n),o=te(oe(e)?{handler:e}:e,Object.assign({},t,{actualOp:"effect"})),a=q(o);Re(a,"op",o.kind="effect"),o.use=function(d){return k(oe(d),".use argument should be a function",r),y.scope.handler=d,o},o.use.getCurrent=function(){return y.scope.handler};var s=o.finally=te({named:"finally",derived:1}),i=o.done=s.filterMap({named:"done",fn:function(d){if(d.status==="done")return{params:d.params,result:d.result}}}),l=o.fail=s.filterMap({named:"fail",fn:function(d){if(d.status==="fail")return{params:d.params,error:d.error}}}),c=o.doneData=i.map({named:"doneData",fn:function(d){return d.result}}),p=o.failData=l.map({named:"failData",fn:function(d){return d.error}}),y=K({scope:{handler:o.defaultConfig.handler||function(){return k(0,"no handler used in "+o.compositeName.fullName)}},node:[Y(function(d,g,b){var u=g.handler,m=Le(b);if(m){var w=m.handlers.unitMap.get(o)||m.handlers.sidMap[o.sid];w&&(u=w)}return d.handler=u,d},0,1),Y(function(d,g,b){if(!g.runnerFn||g.runnerFn(d,null,b)){var u=d.params,m=d.req,w=d.handler,$=d.args,S=$===void 0?[u]:$,I=Ot(u,m,1,s,b),C=Ot(u,m,0,s,b),j=$r(w,C,S),R=j[1];j[0]&&(me(R)&&oe(R.then)?R.then(I,C):I(R))}},0,1)],meta:{op:"fx",fx:"runner"}});a.scope.runner=y,F(a.seq,Y(function(d,g,b){var u=g.runner,m=le(b)?{params:d,req:{rs:function(){},rj:function(){}}}:d;return b.meta||(b.meta={fxID:Wo()}),je({target:u,params:m,defer:1,scope:Le(b),meta:b.meta}),m.params})),o.create=function(d){var g=pr(),b={params:d,req:g};if(M&&!Ct){var u=M;g.req.finally(function(){Nt(u)}).catch(function(){})}return je({target:o,params:b,scope:M}),g.req};var h=o.inFlight=De(0,{serialize:"ignore",named:(J(o,"name")||o.graphite.id)+".inFlight"}).on(o,function(d){return d+1}).on(s,function(d){return d-1}).map({fn:function(d){return d},named:"inFlight"});Re(s,"needFxCounter","dec"),Re(o,"needFxCounter",1);var x=o.pending=h.map({fn:function(d){return d>0},named:"pending"});return Be(o,[s,i,l,c,p,x,h]),n!=null&&n.domain&&n.domain.hooks.effect(o),o}function mr(e,t){var n=ce("merge",t);et(e,n,"first argument");var r=te({name:fr(e,"merge"),derived:1,and:t});return _e(e,r,[],"merge"),r}function zn(e,t){var n=0;return W(Jo,function(r){r in e&&(k(e[r]!=null,Sr(t,r)),n=1)}),n}function Vn(e,t,n){var r=[];(function o(a){Ye(r,a)||(F(r,a),J(a,"op")==="store"&&(n||J(a,"sid"))&&t(a,J(a,"sid")),W(a.next,o),W(ht(a),o),W(gt(a),o))})(e)}function nn(e,t){var n=Array.isArray(e)?new Map(e):e,r=new Map,o=0;if(n instanceof Map){var a={};return W(n,function(s,i){k(ue(i),"Map key should be a unit"),t&&t(i,s),i.sid&&(i.sid in a&&(o=1),a[i.sid]=s),r.set(i,s)}),{sidMap:a,unitMap:r,hasSidDoubles:o}}return{sidMap:n,unitMap:r}}function Ho(e,t){return G(t)?[dt.mov({store:t.stateRef,to:"stack"})].concat(e):e}Object.defineProperty(E,"__esModule",{value:1});for(var vn,hn=typeof Symbol<"u"&&Symbol.observable||"@@observable",q=function(e){return e.graphite||e},ht=function(e){return e.family.owners},gt=function(e){return e.family.links},pe=function(e){return e.stateRef},ft=function(e){return e.value},Tt=function(e){return e.subscribers},le=function(e){return e.parent},Le=function(e){return e.scope},J=function(e,t){return q(e).meta[t]},Re=function(e,t,n){return q(e).meta[t]=n},It=function(e){return e.compositeName},ue=function(e){return(oe(e)||me(e))&&"kind"in e},it=function(e){return function(t){return ue(t)&&t.kind===e}},G=it("store"),gn=it("event"),Pe=it("effect"),vr=function(e){return ue(e)&&!!e.targetable},Pt=it("domain"),lt=it("scope"),zo={__proto__:null,unit:ue,store:G,event:gn,effect:Pe,targetable:vr,domain:Pt,scope:lt,attached:function(e){return Pe(e)&&J(e,"attached")==1}},Ye=function(e,t){return e.includes(t)},rn=function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},F=function(e,t){return e.push(t)},he=function(e,t,n,r){return!e&&console.error((r?r+": ":"")+t+" is deprecated"+(n?", use "+n+" instead":""))},wt=function(){var e=0;return function(){return""+ ++e}},Vo=wt(),Fn=wt(),Fo=wt(),Wo=wt(),re=null,Tn=function(e){vn&&vn(e,re)},ot=function(){return re&&re.template},hr=function(e){return e&&re&&re.sidRoot&&(e=re.sidRoot+"|"+e),e},Be=function(e,t){var n=q(e);W(t,function(r){var o=q(r);n.family.type!=="domain"&&(o.family.type="crosslink"),F(ht(o),n),F(gt(n),o)})},ut=function(e){return e===void 0&&(e=[]),(Array.isArray(e)?e:[e]).flat().map(q)},me=function(e){return typeof e=="object"&&e!==null},oe=function(e){return typeof e=="function"},de=function(e){return e===void 0},In=function(e){return k(me(e)||oe(e),"expect first argument be an object")},Wn=function(e,t,n,r){return k(!(!me(e)&&!oe(e)||!("family"in e)&&!("graphite"in e)),t+": expect "+n+" to be a unit (store, event or effect)"+r)},et=function(e,t,n){Array.isArray(e)?W(e,function(r,o){return Wn(r,t,o+" item of "+n,"")}):Wn(e,t,n," or array of units")},xn=function(e,t,n){return n===void 0&&(n="target"),W(ut(t),function(r){return k(!J(r,"derived"),e+': derived unit in "'+n+'" is not supported, use createStore/createEvent instead"')})},gr=function(e,t,n){return(0,t.fn)(e,n.a)},Uo=function(e,t,n){return(0,t.fn)(n.a,e)},Ut=function(e,t){return(0,t.fn)(e)},Un=function(e,t,n,r){var o={id:Fn(),type:e,data:t};return n&&(o.order={priority:n},r&&(o.order.barrierID=++qo)),o},qo=0,ge=function(e){var t=e.from,n=e.target,r=e.to;return Un("mov",{from:t===void 0?"store":t,store:e.store,to:r===void 0?n?"store":"stack":r,target:n},e.priority,e.batch)},Fe=function(e){var t=e.safe,n=e.filter,r=e.pure;return Un("compute",{fn:e.fn,safe:t===void 0?0:t,filter:n===void 0?0:n,pure:r===void 0?0:r},e.priority,e.batch)},Pn=function(e){return Fe({fn:e.fn,priority:"effect"})},Y=function(e,t,n){return Fe({fn:e,safe:1,filter:t,priority:n&&"effect"})},Ne=function(e,t,n){return ge({store:e,to:t?"stack":"a",priority:n&&"sampler",batch:1})},Te=function(e,t){return e===void 0&&(e=Ut),Fe({fn:e,pure:1,filter:t})},dt={mov:ge,compute:Fe,filter:function(e){return Fe({fn:e.fn,filter:1,pure:e.pure})},run:Pn},Ue=function(e){return{id:Fn(),current:e,initial:e}},pt=function(e){return e.current},Mt=function(e,t){e.before||(e.before=[]),F(e.before,t)},Qe=null,xr=function e(t,n){return t?(n&&((t.v.type===n.v.type&&t.v.id>n.v.id||wn(t.v.type)>wn(n.v.type))&&(r=t,t=n,n=r),r=e(t.r,n),t.r=t.l,t.l=r),t):n;var r},Mn=[],qn=0;qn<6;)F(Mn,{first:null,last:null,size:0}),qn+=1;var M,bn,Ko=function(){for(var e=0;e<6;e++){var t=Mn[e];if(t.size>0){if(e===3||e===4){t.size-=1;var n=Qe.v;return Qe=xr(Qe.l,Qe.r),n}t.size===1&&(t.last=null);var r=t.first;return t.first=r.r,t.size-=1,r.v}}},Ve=function(e,t,n,r,o,a,s){return yn(0,{a:null,b:null,node:n,parent:r,value:o,page:t,scope:a,meta:s},e,0)},yn=function(e,t,n,r){var o=wn(n),a=Mn[o],s={v:{idx:e,stack:t,type:n,id:r},l:null,r:null};o===3||o===4?Qe=xr(Qe,s):(a.size===0?a.first=s:a.last.r=s,a.last=s),a.size+=1},wn=function(e){switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},on=new Set,$t=1,Ct=0,jt=0,xe=null,Nt=function(e){M=e},Kn=function(e){xe=e},br=function(e,t){if(e){for(;e&&!e.reg[t];)e=e.parent;if(e)return e}return null},$n=function(e,t,n,r){var o=br(e,n.id);return o?o.reg[n.id]:t?(_t(t,n,r),t.reg[n.id]):n},Go=function(e){return e},_t=function e(t,n,r,o,a){var s=t.reg;if(!s[n.id]){var i=n.sid,l={id:n.id,current:n.initial,meta:n.meta};if(l.id in t.values.idMap)l.current=t.values.idMap[l.id];else if(i&&i in t.values.sidMap&&!(i in t.sidIdMap)){var c,p=n==null||(c=n.meta)===null||c===void 0?void 0:c.serialize;l.current=(t.fromSerialize&&p!=="ignore"&&(p==null?void 0:p.read)||Go)(t.values.sidMap[i])}else if(n.before&&!a){var y=0,h=r||!n.noInit||o;W(n.before,function(x){switch(x.type){case"map":var d=x.from;if((d||x.fn)&&(d&&e(t,d,r,o),h)){var g=d&&s[d.id].current;l.current=x.fn?x.fn(g):g}break;case"field":e(t,x.from,r,o),y||(y=1,l.current=Array.isArray(l.current)?[].concat(l.current):Object.assign({},l.current)),h&&(l.current[x.field]=s[s[x.from.id].id].current)}})}i&&(t.sidIdMap[i]=n.id),s[n.id]=l}},Zo=function(e,t,n){try{return t(ft(n),e.scope,n)}catch(r){console.error(r),e.fail=1,e.failReason=r}},tt=function e(t,n){return n===void 0&&(n={}),me(t)&&(e(t.or,n),Ce(t,function(r,o){de(r)||o==="or"||o==="and"||(n[o]=r)}),e(t.and,n)),n},Gn=function(e,t){rn(e.next,t),rn(ht(e),t),rn(gt(e),t)},Yo=function e(t,n,r){var o;t.next.length=0,t.seq.length=0,t.scope=null;for(var a=gt(t);o=a.pop();)Gn(o,t),(n||r&&t.meta.op!=="sample"||o.family.type==="crosslink")&&e(o,n,o.meta.op!=="on"&&r);for(a=ht(t);o=a.pop();)Gn(o,t),r&&o.family.type==="crosslink"&&e(o,n,o.meta.op!=="on"&&r)},ct=function(e){return e.clear()},kt=function(e,t){var n=(t===void 0?{}:t).deep,r=0;if(e.ownerSet&&e.ownerSet.delete(e),G(e))ct(Tt(e));else if(Pt(e)){r=1;var o=e.history;ct(o.events),ct(o.effects),ct(o.stores),ct(o.domains)}Yo(q(e),!!n,r)},At=function(e){return pn(function(){return kt(e)})},_e=function(e,t,n,r,o){return K({node:n,parent:e,child:t,scope:{fn:o},meta:{op:r},family:{owners:[e,t],links:t},regional:1})},yr=function(e,t){return k(oe(t),".watch argument should be a function"),At(K({scope:{fn:t},node:[Pn({fn:Ut})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))},Sn=function(e,t,n){n===void 0&&(n="event"),le(e)&&le(e).hooks[n](t)},_n=function(e,t,n){var r=tt(n),o=e==="domain",a=Vo(),s=r.sid,i=s===void 0?null:s,l=r.named,c=l===void 0?null:l,p=r.domain,y=r.parent,h=y===void 0?p===void 0?null:p:y,x=c||r.name||(o?"":a),d=fn(x,h),g={op:t.kind=e,name:t.shortName=x,sid:t.sid=hr(i),named:c,unitId:t.id=a,serialize:r.serialize,derived:r.derived,config:r};if(t.targetable=!r.derived,t.parent=h,t.compositeName=d,t.defaultConfig=r,t.getType=function(){return he(0,"getType","compositeName.fullName"),d.fullName},!o){t.subscribe=function(u){return In(u),t.watch(oe(u)?u:function(m){return u.next&&u.next(m)})},t[hn]=function(){return t};var b=ot();b&&(g.nativeTemplate=b)}return g},an=function(e,t,n,r){var o;me(n)&&(o=n,n=n.fn);var a=te({name:e.shortName+" → *",derived:1,and:o});return _e(e,a,r,t,n),a},Et="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",wr=function(e,t,n,r,o){var a=pe(t),s=ge({store:a,to:"a",priority:"read"});n==="map"&&(s.data.softRead=1);var i=[s,Te(r)];return fe("storeOnMap",a,i,G(e)&&pe(e)),_e(e,t,i,n,o)},Xo=function(e,t,n,r,o,a){var s=ce("combine",r),i=e?function(m){return[].concat(m)}:function(m){return Object.assign({},m)},l=e?[]:{},c=i(l),p=Ue(c),y=Ue(1);p.type=e?"list":"shape",p.noInit=1,fe("combineBase",p,y);var h=De(c,Object.assign({name:fr(n),derived:1},a,{and:r})),x=pe(h);x.noInit=1,Re(h,"isCombine",1);var d=Ne(p);d.order={priority:"barrier"};var g=ge({store:x,to:"b",priority:"read"});g.data.softRead=1;var b=[Y(function(m,w,$){return $.scope&&!$.scope.reg[p.id]&&($.c=1),m}),d,ge({store:y,to:"b"}),Y(function(m,w,$){var S=w.key;if($.c||m!==$.a[S])return t&&$.b&&($.a=i($.a)),$.a[S]=m,1},1),ge({from:"a",target:p}),ge({from:"value",store:0,target:y}),ge({from:"value",store:1,target:y,priority:"barrier",batch:1}),Ne(p,1,1),o&&Te(),g];if(Ce(n,function(m,w){if(!G(m))return k(!ue(m)&&!de(m),"combine expects a store in a field "+w,s),void(c[w]=l[w]=m);l[w]=m.defaultState,c[w]=m.getState();var $=_e(m,h,b,"combine",o);$.scope.key=w;var S=pe(m);Mt(p,{type:"field",field:w,from:S}),fe("combineField",S,$)}),h.defaultShape=n,Mt(x,{type:"map",from:p,fn:o}),!ot())if(o){var u=o(c);!de(u)||a&&"skipVoid"in a||console.error(s+": "+Et),x.current=u,x.initial=u,h.defaultState=u}else h.defaultState=l;return h},$r=function(e,t,n){try{return[1,e.apply(void 0,n)]}catch(r){return t(r),[0,null]}},Ot=function(e,t,n,r,o){return function(a){je({target:[r,Qo],params:[n?{status:"done",params:e,result:a}:{status:"fail",params:e,error:a},{value:a,fn:n?t.rs:t.rj}],defer:1,page:o.page,scope:o.scope,meta:o.meta})}},Qo=K({node:[Pn({fn:function(e){return(0,e.fn)(e.value)}})],meta:{op:"fx",fx:"sidechain"}}),Jo=["source","clock","target"],Sr=function(e,t){return e+": "+t+" should be defined"},sn=function(e,t,n,r,o,a,s,i,l,c,p,y){var h=ce(e,i),x=!!o;k(!de(n)||!de(t),Sr(h,"either source or clock"));var d=0;de(n)?d=1:ue(n)||(n=mn(n)),de(t)?t=n:(et(t,h,"clock"),Array.isArray(t)&&(t=mr(t))),d&&(n=t),i||s||(s=n.shortName);var g="none";(p||r)&&(ue(r)?g="unit":(k(oe(r),"`filter` should be function or unit"),g="fn")),o?(et(o,h,"target"),xn(h,o)):g==="none"&&c&&G(n)&&G(t)?o=De(a?a(pt(pe(n)),pt(pe(t))):pt(pe(n)),{name:s,sid:y,or:i}):(o=te({name:s,derived:1,or:i}),fe("sampleTarget",q(o)));var b=Ue(),u=[];if(g==="unit"){var m=Zn(r,o,t,b,e),w=m[0];m[2]||u.push.apply(u,cn(m[1])),u.push.apply(u,cn(w))}var $=[];if(d)l&&$.push(Ne(b,1,1));else{var S=Zn(n,o,t,b,e),I=S[0];S[2]||$.push.apply($,cn(S[1])),$.push(Ne(I,1,l))}var C=_e(t,o,[fe("sampleSourceLoader"),ge({from:"stack",target:b})].concat($,u,[Ne(b),g==="fn"&&Te(function(j,R,T){return r(j,T.a)},1),a&&Te(gr),fe("sampleSourceUpward",x)]),e,a);return Be(n,[C]),Object.assign(C.meta,i,{joint:1}),o},cn=function(e){return[Ne(e),Y(function(t,n,r){return r.a},1)]},Zn=function(e,t,n,r,o){var a=G(e),s=a?pe(e):Ue(),i=Ue(a);return a||K({parent:e,node:[ge({from:"stack",target:s}),ge({from:"value",store:1,target:i})],family:{owners:[e,t,n],links:t},meta:{op:o},regional:1}),fe("sampleSource",i,s,r),[s,i,a]},ln=function(e,t,n,r){var o=e[t];o&&je({target:o,params:Array.isArray(o)?o.map(function(){return n}):n,defer:1,stack:r})},Yn=function(e){return!e.node.meta.isCombine||e.parent&&e.parent.node.meta.op!=="combine"},ea=function(e){return e};E.allSettled=function(e,t){var n=t===void 0?{}:t,r=n.scope,o=n.params;if(!ue(e))return Promise.reject(new Error("first argument should be unit"));if(!(Pe(e)||gn(e)||G(e)||lt(e)))return Promise.reject(new Error("first argument accepts only effects, events, stores or scopes"));lt(e)&&(r=e);var a=pr();a.parentFork=M;var s=r.fxCount;F(s.scope.defers,a);var i=[],l=[];return lt(e)||(F(i,e),F(l,Pe(e)?{params:o,req:{rs:function(c){a.value={status:"done",value:c}},rj:function(c){a.value={status:"fail",value:c}}}}:o)),F(i,s),F(l,null),je({target:i,params:l,scope:r}),a.req},E.attach=function(e){var t,n,r=Ae(e,1);e=r[0];var o=ce("attach",n=r[1]),a=e.source,s=e.effect,i=e.mapParams,l=e.domain;Pe(s)&&k(de(l),"`domain` can only be used with a plain function",o);var c=tn(e,n);Re(c,"attached",1);var p,y,h=q(c).scope.runner,x=function(g,b,u){var m,w=g.params,$=g.req,S=g.handler,I=c.finally,C=Ot(w,$,0,I,u),j=u.a,R=Pe(S),T=1;if(i){var A=$r(i,C,[w,j]);T=A[0],m=A[1]}else m=a&&R?j:w;if(T){if(!R)return g.args=[j,m],1;je({target:S,params:{params:m,req:{rs:Ot(w,$,1,I,u),rj:C}},page:u.page,defer:1,meta:u.meta})}};a?(h.scope.runnerFn=x,G(a)?Be(y=a,[c]):(y=mn(a),Be(c,[y])),p=[Y(function(g){return g},0,1),Ne(pe(y))],delete h.seq[1].order):p=[Y(x,1,1)],(t=h.seq).splice.apply(t,[1,0].concat(p)),c.use(s);var d=le(s);return d&&(Object.assign(It(c),fn(c.shortName,d)),c.defaultConfig.parent=d),Sn(s,c,"effect"),c},E.clearNode=kt,E.combine=mn,E.createApi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ae(t),o=r[0],a=o[0],s=o[1],i=r[1],l={};return Ce(s,function(c,p){var y=l[p]=te(p,{parent:le(a),config:i});a.on(y,c),Sn(a,y)}),l},E.createDomain=function e(t,n){var r=tt({or:n,and:typeof t=="string"?{name:t}:t}),o=K({family:{type:"domain"},regional:1,parent:(r==null?void 0:r.domain)||(r==null?void 0:r.parent)}),a={history:{},graphite:o,hooks:{}};o.meta=_n("domain",a,{parent:(r==null?void 0:r.domain)||(r==null?void 0:r.parent),or:Object.assign({},r,{derived:1})}),Ce({Event:te,Effect:tn,Store:De,Domain:e},function(i,l){var c=l.toLowerCase(),p=te({named:"on"+l});a.hooks[c]=p;var y=new Set;a.history[c+"s"]=y,p.create=function(h){return je(p,h),h},F(q(p).seq,Y(function(h,x,d){return d.scope=null,h})),p.watch(function(h){Be(a,[h]),y.add(h),h.ownerSet||(h.ownerSet=y),le(h)||(h.parent=a)}),Be(a,[p]),a["onCreate"+l]=function(h){return W(y,h),p.watch(h)},a["create"+l]=a[c]=function(h,x){var d=tt({and:x,or:h});return d!=null&&d.domain?i(h,x):p(i(h,{parent:a,or:d}))}});var s=le(a);return s&&Ce(a.hooks,function(i,l){return _e(i,s.hooks[l])}),r!=null&&r.domain&&r.domain.hooks.domain(a),a},E.createEffect=tn,E.createEvent=te,E.createNode=K,E.createStore=De,E.createWatch=function(e){var t=e.unit,n=e.fn,r=e.scope,o=e.batch,a=[dt.run({fn:function(p){return n(p)}})];o&&a.unshift(dt.compute({priority:"sampler",batch:1})),G(t)&&a.unshift(dt.mov({store:t.stateRef,to:"stack"}));var s=Array.isArray(t)?t:[t];if(r){var i=[],l=r.additionalLinks;return s.forEach(function(p){var y=l[p.graphite.id]||[];l[p.graphite.id]=y;var h=K({node:Ho(a,p),meta:{watchOp:p.kind}});y.push(h),i.push(function(){var x=y.indexOf(h);x!==-1&&y.splice(x,1),kt(h)})}),pn(function(){i.forEach(function(p){return p()})})}var c=K({node:a,parent:s,family:{owners:s}});return pn(function(){kt(c)})},E.fork=function(e,t){var n,r=e;Pt(e)&&(he(0,"fork(domain)","fork()"),n=e,r=t);var o=function(l){var c=K({scope:{defers:[],inFlight:0,fxID:0},node:[Y(function(x,d,g){g.parent?g.parent.node.meta.needFxCounter==="dec"?d.inFlight-=1:(d.inFlight+=1,d.fxID+=1):d.fxID+=1}),Fe({priority:"sampler",batch:1}),Y(function(x,d){var g=d.defers,b=d.fxID;d.inFlight>0||g.length===0||Promise.resolve().then(function(){d.fxID===b&&W(g.splice(0,g.length),function(u){Nt(u.parentFork),u.rs(u.value)})})},0,1)]}),p=K({node:[Y(function(x,d,g){var b=g.parent;if(b){var u=b.node;if(Yn(b)){var m=Le(g),w=u.meta.sid;m.sidIdMap[w]=u.scope.state.id,m.values.sidMap[w]=x;var $=u.meta.serialize;$&&m.sidSerializeSettings.set(w,$==="ignore"?{ignore:1}:{ignore:0,write:$.write})}}})]}),y=K({node:[Y(function(x,d,g){var b=Le(g);b&&g.parent&&Yn(g.parent)&&(b.warnSerialize=1)})]}),h={cloneOf:l,reg:{},values:{sidMap:{},idMap:{}},sidIdMap:{},sidSerializeSettings:new Map,getState:function(x){if("current"in x)return $n(xe,h,x,0).current;var d=q(x);return $n(xe,h,d.scope.state,1).current},kind:"scope",graphite:K({family:{type:"domain",links:[c,p,y]},meta:{unit:"fork"},scope:{forkInFlightCounter:c}}),additionalLinks:{},handlers:{sidMap:{},unitMap:new Map},fxCount:c,storeChange:p,warnSerializeNode:y};return h}(n);if(r){if(r.values){var a=nn(r.values,function(l){return k(G(l)&&vr(l),"Values map can contain only writable stores as keys")}),s=a.unitMap,i=a.hasSidDoubles;Object.assign(o.values.sidMap,a.sidMap),W(s,function(l,c){if(o.values.idMap[c.stateRef.id]=l,J(c,"serialize")==="ignore"){var p=J(c,"sid");o.sidSerializeSettings.set(p,{ignore:1})}}),o.fromSerialize=!(Array.isArray(r.values)||r.values instanceof Map),o.hasSidDoubles=i}r.handlers&&(he(r.handlers instanceof Map||Array.isArray(r.handlers),"object with handlers","array"),o.handlers=nn(r.handlers,function(l){return k(Pe(l),"Handlers map can contain only effects as keys")}))}return o},E.forward=function(e){var t="forward",n=Ae(e,1),r=n[0],o=r.from,a=r.to,s=n[1],i=ce(t,s);return he(0,t,"sample",i),et(o,i,'"from"'),et(a,i,'"to"'),xn(i,a,"to"),At(K({parent:o,child:a,meta:{op:t,config:s},family:{},regional:1}))},E.fromObservable=function(e){In(e);var t=hn in e?e[hn]():e;k(t.subscribe,"expect observable to have .subscribe");var n=te(),r=At(n);return t.subscribe({next:n,error:r,complete:r}),n},E.guard=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ae(t),o=r[0],a=o[0],s=o[1],i=r[1],l=ce("guard",i);return he(0,"guard","sample",l),s||(a=(s=a).source),zn(s,l),sn("guard",s.clock,a,s.filter,s.target,null,s.name,i,!s.greedy,0,1)},E.hydrate=function(e,t){var n=t.values;k(me(n),"values property should be an object");var r=nn(n),o=r.sidMap,a=r.unitMap,s=Object.getOwnPropertyNames(o),i={};W(a,function(x,d){i[d.stateRef.id]=d});var l,c,p,y=[],h=[];lt(e)?(p=1,k((l=e).cloneOf,"scope should be created from domain"),he(0,"hydrate(fork(domain), { values })","fork({ values })"),c=q(l.cloneOf)):Pt(e)?(he(0,"hydrate(domain, { values })","fork({ values })"),c=q(e)):k(0,"first argument of hydrate should be domain or scope"),Vn(c,function(x,d){if(d&&Ye(s,d)){F(y,x);var g=J(x,"serialize");g&&g!=="ignore"&&(o[d]=g.read(o[d])),F(h,o[d])}else x.scope.state.id in i&&(F(y,x),F(h,a.get(i[x.scope.state.id])))},1),je({target:y,params:h,scope:l}),p&&Object.assign(l.values.sidMap,o)},E.is=zo,E.launch=je,E.merge=mr,E.restore=function(e,t,n){var r=ce("restore",n);if(k(!G(e),"restore($store) is not supported",r),gn(e)||Pe(e)){var o=le(e),a=De(t,{parent:o,name:e.shortName,and:n});return _e(Pe(e)?e.doneData:e,a),o&&o.hooks.store(a),a}var s=Array.isArray(e)?[]:{};return Ce(e,function(i,l){return s[l]=G(i)?i:De(i,{name:l})}),s},E.sample=function(){for(var e,t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a,s,i=Ae(r),l=i[0],c=l[0],p=l[1],y=l[2],h=i[1],x=1,d=ce("sample",h);return de(p)&&me(c)&&zn(c,d)&&(p=c.clock,y=c.fn,"batch"in c?x=c.batch:(he(!("greedy"in c),"greedy in sample","batch",d),x=!c.greedy),s=c.filter,e=c.target,t=c.name,a=c.sid,c=c.source),sn("sample",p,c,s,e,y,t,h,x,1,0,a)},E.scopeBind=function(e,t){var n=t===void 0?{}:t,r=n.scope;k(r||M||n.safe,"scopeBind: scope not found");var o=r||M;return function(a){function s(){Nt(c)}var i,l=0,c=M;Nt(o);try{i=e(a)}catch(p){i=p,l=1}if(s(),l)throw i;return i instanceof Promise&&i.then(s,s),i}},E.serialize=function(e,t){t===void 0&&(t={}),e.warnSerialize&&console.error("There is a store without sid in this scope, its value is omitted"),k(!e.hasSidDoubles,"duplicate sid found in this scope");var n=t.ignore?t.ignore.map(function(o){return o.sid}):[],r={};return Ce(e.values.sidMap,function(o,a){var s;if(!Ye(n,a)){var i=e.sidIdMap[a],l=(s=e.sidSerializeSettings.get(a))!==null&&s!==void 0?s:{ignore:0,write:ea};l.ignore||(r[a]=(0,l.write)(i&&i in e.reg?e.reg[i].current:o))}}),"onlyChanges"in t&&(he(0,"onlyChanges"),t.onlyChanges||(k(e.cloneOf,"scope should be created from domain"),Vn(q(e.cloneOf),function(o,a){a in r||Ye(n,a)||J(o,"isCombine")||J(o,"serialize")==="ignore"||(r[a]=e.getState(o))}))),r},E.setGraphInspector=function(e){vn=e},E.setInspector=function(e){bn=e},E.setStoreName=function(e,t){e.shortName=t,Object.assign(It(e),fn(t,le(e)))},E.split=function(){for(var e,t,n="split",r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=Ae(o),i=s[0],l=i[0],c=i[1],p=s[1],y=ce(n,p),h=!c;h&&(e=l.cases,c=l.match,t=l.clock,l=l.source);var x=G(c),d=!ue(c)&&oe(c),g=!x&&!d&&me(c);k(ue(l),"source must be a unit",y),e||(e={}),h?Ce(e,function(C,j){return xn(y,C,"cases."+j)}):(k(g,"match should be an object",y),Ce(c,function(C,j){return e[j]=te({derived:1,named:"cases."+j,and:p})}),e.__=te({derived:1,named:"cases.__",and:p}));var b,u=new Set([].concat(l,t||[],Object.values(e))),m=Object.keys(x||d?e:c);if(x||d)x&&u.add(c),b=[x&&Ne(pe(c),0,1),Fe({safe:x,filter:1,pure:!x,fn:function(C,j,R){var T=String(x?R.a:c(C));ln(j,Ye(m,T)?T:"__",C,R)}})];else if(g){var w=Ue({});w.type="shape";var $,S=[];Ce(c,function(C,j){if(ue(C)){$=1,F(S,j),u.add(C);var R=_e(C,[],[Ne(w),Y(function(A,P,V){return V.a[j]=A})]);if(G(C)){w.current[j]=C.getState();var T=pe(C);Mt(w,{from:T,field:j,type:"field"}),fe("splitMatchStore",T,R)}}}),$&&fe("splitBase",w),b=[$&&Ne(w,0,1),Te(function(C,j,R){for(var T=0;T<m.length;T++){var A=m[T];if(Ye(S,A)?R.a[A]:c[A](C))return void ln(j,A,C,R)}ln(j,"__",C,R)},1)]}else k(0,"expect match to be unit, function or object");var I=K({meta:{op:n},parent:t?[]:l,scope:e,node:b,family:{owners:Array.from(u)},regional:1});if(t&&sn(n,t,l,null,I,null,n,p,0,0,0),!h)return e},E.step=dt,E.version="23.1.0",E.withFactory=function(e){var t=e.sid,n=e.name,r=e.loc,o=e.method,a=e.fn;return Bn(K({meta:{sidRoot:hr(t),sid:t,name:n,loc:r,method:o,type:"factory"}}),a)},E.withRegion=Bn;var We;function ta(e){return e&&typeof e=="object"&&"default"in e?e.default:e}function Dt(e,t){return t.displayName=e,t}function Cn(e,t){var n=L.is.unit(e),r={};n?r={unit:e}:"@@unitShape"in e?typeof e["@@unitShape"]=="function"?r=e["@@unitShape"]():ke("expect @@unitShape to be a function"):r=e;var o=Array.isArray(r),a=_.useRef({stale:1,justSubscribed:0,scope:t}),s=_.useMemo(function(){a.current.stale=1;var g=Array.isArray(r)?[]:{},b=[],u=[],m=[],w=[];for(var $ in r)if({}.hasOwnProperty.call(r,$)){var S=r[$];L.is.unit(S)||ke("expect useUnit "+(n?"argument":'value in key "'+$+'"')+" to be a unit"),L.is.event(S)||L.is.effect(S)?(g[$]=t?L.scopeBind(S,{scope:t}):S,m.push($),w.push(S)):(g[$]=null,b.push($),u.push(S))}return[g,b,u,m,w]},[a,t].concat(Object.keys(r),Object.values(r))),i=s[0],l=s[1],c=s[2],p=s[3],y=s[4],h=_.useRef({value:i,storeKeys:l,eventKeys:p,eventValues:y}),x=_.useCallback(function(g){var b=a.current;return b.justSubscribed=1,L.createWatch({unit:c,fn:function(){b.stale||(b.stale=1,g())},scope:t,batch:1})},[c,t,h,a]),d=_.useCallback(function(){var g,b=h.current,u=a.current,m=0,w=b.value,$=b.storeKeys,S=b.eventKeys,I=b.eventValues,C=t!==u.scope;if(u.stale||u.justSubscribed||C){m=!u.justSubscribed||C,g=o?[].concat(i):Object.assign({},i),$.length===l.length&&S.length===p.length||(m=1);for(var j=0;j<l.length;j++){var R=An(c[j],t),T=l[j];m||(m=$.includes(T)?w[T]!==R:1),g[T]=R}for(var A=0;A<p.length;A++){var P=y[A],V=p[A];m||(m=S.includes(V)?I[S.indexOf(V)]!==P:1)}}return m&&(b.value=g),b.storeKeys=l,b.eventKeys=p,b.eventValues=y,u.stale=0,u.justSubscribed=!m,u.scope=t,n?b.value.unit:b.value},[x,c,y,t,h,a]);return Nr.useSyncExternalStore(x,d,d)}function un(e,t){var n,r,o,a,s=e[0],i=e[1],l=Jn;if(i)n=i,o=s,a=[];else{n=s.fn,o=s.store,a=s.keys,r=s.defaultValue;var c=s.updateFilter;l=c===void 0?Jn:c}L.is.store(o)||ke("useStoreMap expects a store"),Array.isArray(a)||ke("useStoreMap expects an array as keys"),typeof n!="function"&&ke("useStoreMap expects a function");var p=_.useCallback(function(g){return L.createWatch({unit:o,fn:g,scope:t})},[o,t]),y=_.useCallback(function(){return An(o,t)},[o,t]),h=_.useRef(),x=_.useRef(),d=_.useRef(a);return oa.useSyncExternalStoreWithSelector(p,y,y,function(g){if(h.current!==g||!function(u,m){if(!u||!m||u.length!==m.length)return 0;for(var w=1,$=0;$<u.length;$++)if(u[$]!==m[$]){w=0;break}return w}(d.current,a)){var b=n(g,a);b===void 0&&r!==void 0&&(b=r),h.current=g,d.current=a,b!==void 0&&(x.current=b)}return x.current},function(g,b){return!l(b,g)})}function Xn(e,t,n){t===void 0&&(t={});var r=Cn({open:e.open,close:e.close,set:e.set},n),o=r.open,a=r.close,s=r.set,i=_.useMemo(function(){return{open:o,close:a,set:s}},[e,o]),l=_.useRef({value:null,count:0});Nn(function(){return i.open(l.current.value),function(){return i.close(l.current.value)}},[i]),function(c,p){if(c===p)return 1;if(typeof c=="object"&&c!==null&&typeof p=="object"&&p!==null){var y=Object.keys(c),h=Object.keys(p);if(y.length!==h.length)return 0;for(var x=0;x<y.length;x++){var d=y[x];if(c[d]!==p[d])return 0}return 1}return 0}(l.current.value,t)||(l.current.value=t,l.current.count+=1),Nn(function(){i.set(l.current.value)},[l.current.count])}function Oe(e){var t=_.useContext(Er);return e&&!t&&ke("No scope found, consider adding <Provider> to app root"),t}function jn(e,t){return function(n,r){kr(1,"useStore","useUnit"),L.is.store(n)||ke("expect useStore argument to be a store");var o=_.useCallback(function(s){return L.createWatch({unit:n,fn:s,scope:r})},[n,r]),a=_.useCallback(function(){return An(n,r)},[n,r]);return Nr.useSyncExternalStore(o,a,a)}(e,Oe(t==null?void 0:t.forceScope))}function Qn(e,t){function n(i){var l=_.useRef(i),c=jn(r);Nn(function(){return a({props:l.current,state:r.getState()}),function(){s({props:l.current,state:r.getState()})}},[]);var p=t(i,c);return l.current=i,p}var r;kn("createComponent","@effector/reflect"),L.is.store(e)?r=e:typeof e=="object"&&e!==null?r=L.combine(e):ke("shape should be a store or object with stores");var o="Unknown";r&&r.shortName&&(o=r.shortName);var a=L.createEvent(),s=L.createEvent();return n.mounted=a,n.unmounted=s,Dt(o+".View",n)}function Cr(e,t){var n,r=t?e:e[0];(function(l){if(!l)throw Error("expect first argument be an object")})(Je(n=r)||function(l){return typeof l=="function"}(n));var o=r.or,a=r.and;if(a){var s=t?a:a[0];if(Je(s)&&"and"in s){var i=Cr(a,t);e=i[0],o=Object.assign({},o,i[1])}else e=a}return[e,o]}function na(e){function t(x){return o(t,x,Oe()),null}var n=e.domain,r=e.defaultState,o=e.hook,a=aa({or:e.maybeConfig,and:e.mainConfig}),s=(n?n.compositeName.fullName+"/":"")+(a.name||"gate"),i=L.createEvent({name:s+".set",sid:a.sid?a.sid+"|set":void 0}),l=L.createEvent({name:s+".open",sid:a.sid?a.sid+"|open":void 0}),c=L.createEvent({name:s+".close",sid:a.sid?a.sid+"|close":void 0}),p=L.createStore(!1,{name:s+".status",serialize:"ignore"}).on(l,function(){return!0}).on(c,function(){return!1}),y=L.createStore(r,{name:s+".state",sid:a.sid}).on(i,function(x,d){return d}).on(l,function(x,d){return d}).reset(c);if(n){var h=n.hooks;L.launch({target:[h.store,h.store,h.event,h.event,h.event],params:[p,y,l,c,i]})}return t.open=l,t.close=c,t.status=p,t.state=y,t.set=i,Dt("Gate:"+s,t)}function ra(e,t){var n,r,o,a=Cr(t&&Je(n=t[0])&&(n.and||n.or)?t:[{and:t}]),s=a[0],i=s[0],l=s[1],c={},p={},y=a[1];return typeof i=="string"?(p={name:i},Je(o=l)&&"sid"in o||(c=l||{})):function(h){return Je(h)&&("domain"in h||"defaultState"in h||"name"in h)}(i)&&(p=i,c=i.defaultState||{},r=i.domain),{hook:e,domain:r,defaultState:c,mainConfig:p,maybeConfig:y}}Object.defineProperty(ie,"__esModule",{value:1});var jr=v,L=E,Nr=Yr,oa=Xr,_=ta(jr),ke=function(e){throw Error(e)},Nn=typeof window<"u"?_.useLayoutEffect:_.useEffect,kr=function(e,t,n){jr.useEffect(function(){e&&console.error(t+" is deprecated"+(n?", prefer "+n+" instead":""))},[e,t,n])},An=function(e,t){return t?t.getState(e):e.getState()},Jn=function(e,t){return e!==t},Er=_.createContext(null),kn=function(e,t){console.error(e+" is deprecated"+(t?", use "+t+" instead":""))},Je=function(e){return typeof e=="object"&&e!==null},aa=function e(t,n){return n===void 0&&(n={}),Je(t)&&(e(t.or,n),function(r){for(var o in r)s=o,function(i){return i===void 0}(a=r[o])||s==="or"||s==="and"||(n[s]=a);var a,s}(t),e(t.and,n)),n};ie.Provider=Er.Provider,ie.connect=function(e){return kn("connect","useUnit"),function(t){var n=e;return typeof e!="function"&&(n=t,t=e),Dt("Connect("+(n.displayName||n.name||"Unknown")+")",function(r){return _.createElement(n,Object.assign({},r,jn(t)))})}},ie.createComponent=Qn,ie.createGate=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return na(ra(Xn,t))},ie.createStoreConsumer=function(e){return kn("createStoreConsumer","useUnit"),Qn(e,function(t,n){return(0,t.children)(n)})},ie.useEvent=function(e,t){return function(n,r){if(kr(1,"useEvent","useUnit"),!r)return n;var o=L.is.unit(n)||typeof n!="object"?{event:n}:n;return _.useMemo(function(){if(L.is.unit(n))return L.scopeBind(n,{scope:r});var a=Array.isArray(n)?[]:{};for(var s in n)a[s]=L.scopeBind(n[s],{scope:r});return a},[r].concat(Object.keys(o),Object.values(o)))}(e,Oe(t==null?void 0:t.forceScope))},ie.useGate=function(e,t,n){return t===void 0&&(t={}),Xn(e,t,Oe(n==null?void 0:n.forceScope))},ie.useList=function(e,t,n){return function(r,o,a){var s,i,l,c=[];typeof o=="object"&&o!==null?(o.keys&&(c=o.keys),s=o.fn,i=o.getKey,l=o.placeholder):s=o,L.is.store(r)||ke("expect useList first argument to be a store"),typeof s!="function"&&ke("expect useList's renderItem to be a function"),Array.isArray(c)||ke("expect useList's keys to be an array");var p=_.useMemo(function(){var g=Dt((r.shortName||"Unknown")+".Item",function(b){var u=b.index,m=b.keys;if(y.current[1])return y.current[0](b.value,b.keyVal);var w=un([{store:r,keys:[u].concat(m),fn:function($,S){return $[S[0]]}}],a);return y.current[0](w,u)});return _.memo(g)},[r,a,!!i]),y=_.useRef([s,i]);y.current=[s,i];var h=_.useMemo(function(){return c},c);if(i){var x=Cn(r,a);return x.length===0&&l?l:x.map(function(g){var b=y.current[1](g);return _.createElement(p,{keyVal:b,key:b,keys:h,value:g})})}var d=un([{store:r,keys:[r],fn:function(g){return g.length}}],a);return d===0&&l?l:Array.from({length:d},function(g,b){return _.createElement(p,{index:b,key:b,keys:h})})}(e,t,Oe(n==null?void 0:n.forceScope))},ie.useProvidedScope=function(){return Oe()||null},ie.useStore=jn,ie.useStoreMap=function(e,t){return un([e,t],Oe(e==null?void 0:e.forceScope))},We=ie.useUnit=function(e,t){return Cn(e,Oe(t==null?void 0:t.forceScope))};const Rr=v.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Rr.displayName="Card";const sa=v.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t}));sa.displayName="CardHeader";const ia=v.forwardRef(({className:e,...t},n)=>f.jsx("h3",{ref:n,className:Q("text-2xl font-semibold tracking-tight",e),...t}));ia.displayName="CardTitle";const ca=v.forwardRef(({className:e,...t},n)=>f.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));ca.displayName="CardDescription";const la=v.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t}));la.displayName="CardContent";const ua=v.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,className:Q("flex items-center p-6 pt-0",e),...t}));ua.displayName="CardFooter";const qt=v.forwardRef(({className:e,...t},n)=>f.jsx("textarea",{className:Q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));qt.displayName="Textarea";const da=({children:e,...t})=>{const n=qe(Qr);return f.jsxs("span",{...t,children:[e,Xe.format.dateTime(n,{format:"time",asTime:!0})]})},xt=e=>{const[t,n]=v.useState(!!e),r=v.useCallback(()=>n(o=>!o),[]);return[t,r,n]},fa=ar("flex rounded-md border border-input bg-background ring-offset-background file:border-0 file:bg-transparent placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{size:{default:"h-10 w-full px-3 py-2 text-sm file:text-sm file:font-medium",sm:"h-8 w-full px-1.5 text-sm file:text-sm file:font-medium"}},defaultVariants:{size:"default"}}),nt=v.forwardRef(({className:e,type:t,size:n,...r},o)=>f.jsx("input",{type:t,className:Q(fa({size:n,className:e})),ref:o,...r}));nt.displayName="Input";const pa=v.forwardRef((e,t)=>v.createElement(ye.label,U({},e,{ref:t,onMouseDown:n=>{var r;(r=e.onMouseDown)===null||r===void 0||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),Tr=pa,ma=ar("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),mt=v.forwardRef(({className:e,...t},n)=>f.jsx(Tr,{ref:n,className:Q(ma(),e),...t}));mt.displayName=Tr.displayName;const va=({className:e})=>{const[t,,n]=xt(!1),r=v.useRef(null);return v.useLayoutEffect(()=>{var o;t||(o=r.current)==null||o.reset()},[t]),f.jsxs(Lt,{open:t,onOpenChange:n,children:[f.jsx(Bt,{asChild:!0,children:f.jsx(X,{variant:"ghost",size:"icon",className:sr("h-7 w-7",e),children:f.jsx(Ro,{className:"h-4 w-4"})})}),f.jsxs(Ht,{className:"sm:max-w-[425px]",children:[f.jsx(zt,{children:f.jsx(Vt,{children:"Ручное добавление лога"})}),f.jsxs("form",{ref:r,onSubmit:o=>{o.preventDefault(),o.stopPropagation();const a=r.current,s=Object.fromEntries(new FormData(a));console.info("fff",s);const[i,l]=s.time.split(":"),c=+i*Rt(1,"hour")+ +l*Rt(1,"min"),p=new Date(s.date).toISOString();Jr({startDate:p,spentTime:c,meta:s.description||""}),a.reset(),n(!1),Ft({type:"success",message:"Лог добавлен!"})},children:[f.jsx("div",{className:"grid gap-4 py-4",children:f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(mt,{htmlFor:"date",className:"text-right",children:"Дата"}),f.jsx(nt,{id:"date",name:"date",type:"date",required:!0,className:"col-span-3"})]})}),f.jsx("div",{className:"grid gap-4 py-4",children:f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(mt,{htmlFor:"time",className:"text-right",children:"Время"}),f.jsx(nt,{id:"time",name:"time",type:"time",required:!0,className:"col-span-3"})]})}),f.jsxs("div",{className:"grid gap-4 py-4",children:[f.jsx("div",{className:"grid grid-cols-4 items-center gap-4",children:f.jsx(mt,{htmlFor:"description",className:"text-right",children:"Описание"})}),f.jsx(qt,{id:"description",name:"description"})]}),f.jsx(Wt,{children:f.jsx(X,{type:"submit",children:"Создать"})})]})]})]})},ha=({className:e})=>{var o;const t=We(vt),n=We(eo),r=We({finishActiveLog:to,continueActiveLog:no,pauseActiveLog:ro,createActiveLog:oo});return f.jsxs(Rr,{className:sr("flex flex-col items-center justify-center gap-2 p-4",e),children:[f.jsxs("h1",{className:"inline-flex w-full flex-1 text-xl font-semibold",children:["Трекер",n.value?" (".concat(n.value.projectName,")"):"",f.jsx(va,{className:"ml-auto"})]}),f.jsx(qt,{value:((o=n.value)==null?void 0:o.meta)||"",onChange:a=>n.update({meta:a.target.value}),className:"!h-[40px]",placeholder:"Чем занимаешься?",disabled:!n.value}),f.jsx("div",{className:"mt-4 flex w-full flex-row items-center gap-2",children:n.value?f.jsxs(f.Fragment,{children:[f.jsx(da,{className:"relative mr-auto flex items-center text-2xl font-bold ".concat(n.value.status==="paused"?"text-reverse":"text-destructive"),children:n.value.status==="active"&&f.jsx(f.Fragment,{children:f.jsxs("span",{className:"relative mr-2 flex h-4 w-4",children:[f.jsx("span",{className:"absolute block h-full w-full animate-ping rounded-full bg-destructive opacity-75"}),f.jsx("span",{className:"relative block h-4 w-4 rounded-full bg-destructive"})]})})}),f.jsx(X,{variant:(n.value.status==="active","destructive"),disabled:n.value.status==="active",onClick:r.finishActiveLog,children:"ЗАВЕРШИТЬ"}),n.value.status==="paused"?f.jsx(X,{style:{width:150},variant:"default",onClick:r.continueActiveLog,children:"ПРОДОЛЖИТЬ"}):f.jsx(X,{style:{width:150},variant:"outline",onClick:r.pauseActiveLog,children:"ПАУЗА"})]}):f.jsx(X,{disabled:!t.value,className:"ml-auto",onClick:()=>{var a;return r.createActiveLog({meta:"",lastTickDate:null,startDate:new Date().toISOString(),spentTime:0,projectName:((a=t.value)==null?void 0:a.name)||"",status:"active"})},children:"ПРИСТУПИТЬ К РАБОТЕ"})})]})};function er(e,[t,n]){return Math.min(n,Math.max(t,e))}function ga(e){const t=e+"CollectionProvider",[n,r]=ir(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=x=>{const{scope:d,children:g}=x,b=Ee.useRef(null),u=Ee.useRef(new Map).current;return Ee.createElement(o,{scope:d,itemMap:u,collectionRef:b},g)},i=e+"CollectionSlot",l=Ee.forwardRef((x,d)=>{const{scope:g,children:b}=x,u=a(i,g),m=be(d,u.collectionRef);return Ee.createElement(dn,{ref:m},b)}),c=e+"CollectionItemSlot",p="data-radix-collection-item",y=Ee.forwardRef((x,d)=>{const{scope:g,children:b,...u}=x,m=Ee.useRef(null),w=be(d,m),$=a(c,g);return Ee.useEffect(()=>($.itemMap.set(m,{ref:m,...u}),()=>void $.itemMap.delete(m))),Ee.createElement(dn,{[p]:"",ref:w},b)});function h(x){const d=a(e+"CollectionConsumer",x);return Ee.useCallback(()=>{const b=d.collectionRef.current;if(!b)return[];const u=Array.from(b.querySelectorAll("[".concat(p,"]")));return Array.from(d.itemMap.values()).sort(($,S)=>u.indexOf($.ref.current)-u.indexOf(S.ref.current))},[d.collectionRef,d.itemMap])}return[{Provider:s,Slot:l,ItemSlot:y},h,r]}const xa=v.createContext(void 0);function ba(e){const t=v.useContext(xa);return e||t||"ltr"}function ya(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const wa=[" ","Enter","ArrowUp","ArrowDown"],$a=[" ","Enter"],Kt="Select",[Gt,Zt,Sa]=ga(Kt),[at,$s]=ir(Kt,[Sa,cr]),On=cr(),[Ca,Ke]=at(Kt),[ja,Na]=at(Kt),ka=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:s,defaultValue:i,onValueChange:l,dir:c,name:p,autoComplete:y,disabled:h,required:x}=e,d=On(t),[g,b]=v.useState(null),[u,m]=v.useState(null),[w,$]=v.useState(!1),S=ba(c),[I=!1,C]=Ln({prop:r,defaultProp:o,onChange:a}),[j,R]=Ln({prop:s,defaultProp:i,onChange:l}),T=v.useRef(null),A=g?!!g.closest("form"):!0,[P,V]=v.useState(new Set),ve=Array.from(P).map(z=>z.props.value).join(";");return v.createElement(ho,d,v.createElement(Ca,{required:x,scope:t,trigger:g,onTriggerChange:b,valueNode:u,onValueNodeChange:m,valueNodeHasChildren:w,onValueNodeHasChildrenChange:$,contentId:ur(),value:j,onValueChange:R,open:I,onOpenChange:C,dir:S,triggerPointerDownPosRef:T,disabled:h},v.createElement(Gt.Provider,{scope:t},v.createElement(ja,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(z=>{V(ae=>new Set(ae).add(z))},[]),onNativeOptionRemove:v.useCallback(z=>{V(ae=>{const ee=new Set(ae);return ee.delete(z),ee})},[])},n)),A?v.createElement(Ar,{key:ve,"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:y,value:j,onChange:z=>R(z.target.value),disabled:h},j===void 0?v.createElement("option",{value:""}):null,Array.from(P)):null))},Ea="SelectTrigger",Ra=v.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=On(n),s=Ke(Ea,n),i=s.disabled||r,l=be(t,s.onTriggerChange),c=Zt(n),[p,y,h]=Or(d=>{const g=c().filter(m=>!m.disabled),b=g.find(m=>m.value===s.value),u=Dr(g,d,b);u!==void 0&&s.onValueChange(u.value)}),x=()=>{i||(s.onOpenChange(!0),h())};return v.createElement(ao,U({asChild:!0},a),v.createElement(ye.button,U({type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":_r(s.value)?"":void 0},o,{ref:l,onClick:ne(o.onClick,d=>{d.currentTarget.focus()}),onPointerDown:ne(o.onPointerDown,d=>{const g=d.target;g.hasPointerCapture(d.pointerId)&&g.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&(x(),s.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)},d.preventDefault())}),onKeyDown:ne(o.onKeyDown,d=>{const g=p.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&y(d.key),!(g&&d.key===" ")&&wa.includes(d.key)&&(x(),d.preventDefault())})})))}),Ta="SelectValue",Ia=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:s="",...i}=e,l=Ke(Ta,n),{onValueNodeHasChildrenChange:c}=l,p=a!==void 0,y=be(t,l.onValueNodeChange);return He(()=>{c(p)},[c,p]),v.createElement(ye.span,U({},i,{ref:y,style:{pointerEvents:"none"}}),_r(l.value)?v.createElement(v.Fragment,null,s):a)}),Pa=v.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return v.createElement(ye.span,U({"aria-hidden":!0},o,{ref:t}),r||"▼")}),Ma=e=>v.createElement(mo,U({asChild:!0},e)),rt="SelectContent",_a=v.forwardRef((e,t)=>{const n=Ke(rt,e.__scopeSelect),[r,o]=v.useState();if(He(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?lr.createPortal(v.createElement(Ir,{scope:e.__scopeSelect},v.createElement(Gt.Slot,{scope:e.__scopeSelect},v.createElement("div",null,e.children))),a):null}return v.createElement(Aa,U({},e,{ref:t}))}),Me=10,[Ir,Ge]=at(rt),Aa=v.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:s,side:i,sideOffset:l,align:c,alignOffset:p,arrowPadding:y,collisionBoundary:h,collisionPadding:x,sticky:d,hideWhenDetached:g,avoidCollisions:b,...u}=e,m=Ke(rt,n),[w,$]=v.useState(null),[S,I]=v.useState(null),C=be(t,N=>$(N)),[j,R]=v.useState(null),[T,A]=v.useState(null),P=Zt(n),[V,ve]=v.useState(!1),z=v.useRef(!1);v.useEffect(()=>{if(w)return so(w)},[w]),io();const ae=v.useCallback(N=>{const[B,...se]=P().map(D=>D.ref.current),[H]=se.slice(-1),O=document.activeElement;for(const D of N)if(D===O||(D==null||D.scrollIntoView({block:"nearest"}),D===B&&S&&(S.scrollTop=0),D===H&&S&&(S.scrollTop=S.scrollHeight),D==null||D.focus(),document.activeElement!==O))return},[P,S]),ee=v.useCallback(()=>ae([j,w]),[ae,j,w]);v.useEffect(()=>{V&&ee()},[V,ee]);const{onOpenChange:Z,triggerPointerDownPosRef:we}=m;v.useEffect(()=>{if(w){let N={x:0,y:0};const B=H=>{var O,D,$e,Se;N={x:Math.abs(Math.round(H.pageX)-((O=(D=we.current)===null||D===void 0?void 0:D.x)!==null&&O!==void 0?O:0)),y:Math.abs(Math.round(H.pageY)-(($e=(Se=we.current)===null||Se===void 0?void 0:Se.y)!==null&&$e!==void 0?$e:0))}},se=H=>{N.x<=10&&N.y<=10?H.preventDefault():w.contains(H.target)||Z(!1),document.removeEventListener("pointermove",B),we.current=null};return we.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",se,{capture:!0})}}},[w,Z,we]),v.useEffect(()=>{const N=()=>Z(!1);return window.addEventListener("blur",N),window.addEventListener("resize",N),()=>{window.removeEventListener("blur",N),window.removeEventListener("resize",N)}},[Z]);const[ze,bt]=Or(N=>{const B=P().filter(O=>!O.disabled),se=B.find(O=>O.ref.current===document.activeElement),H=Dr(B,N,se);H&&setTimeout(()=>H.ref.current.focus())}),Yt=v.useCallback((N,B,se)=>{const H=!z.current&&!se;(m.value!==void 0&&m.value===B||H)&&(R(N),H&&(z.current=!0))},[m.value]),Xt=v.useCallback(()=>w==null?void 0:w.focus(),[w]),Ze=v.useCallback((N,B,se)=>{const H=!z.current&&!se;(m.value!==void 0&&m.value===B||H)&&A(N)},[m.value]),yt=r==="popper"?tr:Oa,st=yt===tr?{side:i,sideOffset:l,align:c,alignOffset:p,arrowPadding:y,collisionBoundary:h,collisionPadding:x,sticky:d,hideWhenDetached:g,avoidCollisions:b}:{};return v.createElement(Ir,{scope:n,content:w,viewport:S,onViewportChange:I,itemRefCallback:Yt,selectedItem:j,onItemLeave:Xt,itemTextRefCallback:Ze,focusSelectedItem:ee,selectedItemText:T,position:r,isPositioned:V,searchRef:ze},v.createElement(co,{as:dn,allowPinchZoom:!0},v.createElement(lo,{asChild:!0,trapped:m.open,onMountAutoFocus:N=>{N.preventDefault()},onUnmountAutoFocus:ne(o,N=>{var B;(B=m.trigger)===null||B===void 0||B.focus({preventScroll:!0}),N.preventDefault()})},v.createElement(uo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:N=>N.preventDefault(),onDismiss:()=>m.onOpenChange(!1)},v.createElement(yt,U({role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:N=>N.preventDefault()},u,st,{onPlaced:()=>ve(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...u.style},onKeyDown:ne(u.onKeyDown,N=>{const B=N.ctrlKey||N.altKey||N.metaKey;if(N.key==="Tab"&&N.preventDefault(),!B&&N.key.length===1&&bt(N.key),["ArrowUp","ArrowDown","Home","End"].includes(N.key)){let H=P().filter(O=>!O.disabled).map(O=>O.ref.current);if(["ArrowUp","End"].includes(N.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(N.key)){const O=N.target,D=H.indexOf(O);H=H.slice(D+1)}setTimeout(()=>ae(H)),N.preventDefault()}})}))))))}),Oa=v.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=Ke(rt,n),s=Ge(rt,n),[i,l]=v.useState(null),[c,p]=v.useState(null),y=be(t,C=>p(C)),h=Zt(n),x=v.useRef(!1),d=v.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:u,focusSelectedItem:m}=s,w=v.useCallback(()=>{if(a.trigger&&a.valueNode&&i&&c&&g&&b&&u){const C=a.trigger.getBoundingClientRect(),j=c.getBoundingClientRect(),R=a.valueNode.getBoundingClientRect(),T=u.getBoundingClientRect();if(a.dir!=="rtl"){const O=T.left-j.left,D=R.left-O,$e=C.left-D,Se=C.width+$e,Qt=Math.max(Se,j.width),Jt=window.innerWidth-Me,en=er(D,[Me,Jt-Qt]);i.style.minWidth=Se+"px",i.style.left=en+"px"}else{const O=j.right-T.right,D=window.innerWidth-R.right-O,$e=window.innerWidth-C.right-D,Se=C.width+$e,Qt=Math.max(Se,j.width),Jt=window.innerWidth-Me,en=er(D,[Me,Jt-Qt]);i.style.minWidth=Se+"px",i.style.right=en+"px"}const A=h(),P=window.innerHeight-Me*2,V=g.scrollHeight,ve=window.getComputedStyle(c),z=parseInt(ve.borderTopWidth,10),ae=parseInt(ve.paddingTop,10),ee=parseInt(ve.borderBottomWidth,10),Z=parseInt(ve.paddingBottom,10),we=z+ae+V+Z+ee,ze=Math.min(b.offsetHeight*5,we),bt=window.getComputedStyle(g),Yt=parseInt(bt.paddingTop,10),Xt=parseInt(bt.paddingBottom,10),Ze=C.top+C.height/2-Me,yt=P-Ze,st=b.offsetHeight/2,N=b.offsetTop+st,B=z+ae+N,se=we-B;if(B<=Ze){const O=b===A[A.length-1].ref.current;i.style.bottom="0px";const D=c.clientHeight-g.offsetTop-g.offsetHeight,$e=Math.max(yt,st+(O?Xt:0)+D+ee),Se=B+$e;i.style.height=Se+"px"}else{const O=b===A[0].ref.current;i.style.top="0px";const $e=Math.max(Ze,z+g.offsetTop+(O?Yt:0)+st)+se;i.style.height=$e+"px",g.scrollTop=B-Ze+g.offsetTop}i.style.margin="".concat(Me,"px 0"),i.style.minHeight=ze+"px",i.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[h,a.trigger,a.valueNode,i,c,g,b,u,a.dir,r]);He(()=>w(),[w]);const[$,S]=v.useState();He(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const I=v.useCallback(C=>{C&&d.current===!0&&(w(),m==null||m(),d.current=!1)},[w,m]);return v.createElement(Da,{scope:n,contentWrapper:i,shouldExpandOnScrollRef:x,onScrollButtonChange:I},v.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$}},v.createElement(ye.div,U({},o,{ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}}))))}),tr=v.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Me,...a}=e,s=On(n);return v.createElement(vo,U({},s,a,{ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Da,Dn]=at(rt,{}),nr="SelectViewport",La=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Ge(nr,n),a=Dn(nr,n),s=be(t,o.onViewportChange),i=v.useRef(0);return v.createElement(v.Fragment,null,v.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),v.createElement(Gt.Slot,{scope:n},v.createElement(ye.div,U({"data-radix-select-viewport":"",role:"presentation"},r,{ref:s,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ne(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=a;if(y!=null&&y.current&&p){const h=Math.abs(i.current-c.scrollTop);if(h>0){const x=window.innerHeight-Me*2,d=parseFloat(p.style.minHeight),g=parseFloat(p.style.height),b=Math.max(d,g);if(b<x){const u=b+h,m=Math.min(x,u),w=u-m;p.style.height=m+"px",p.style.bottom==="0px"&&(c.scrollTop=w>0?w:0,p.style.justifyContent="flex-end")}}}i.current=c.scrollTop})}))))}),Ba="SelectGroup",[Ss,Ha]=at(Ba),za="SelectLabel",Va=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Ha(za,n);return v.createElement(ye.div,U({id:o.id},r,{ref:t}))}),En="SelectItem",[Fa,Pr]=at(En),Wa=v.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...s}=e,i=Ke(En,n),l=Ge(En,n),c=i.value===r,[p,y]=v.useState(a!=null?a:""),[h,x]=v.useState(!1),d=be(t,u=>{var m;return(m=l.itemRefCallback)===null||m===void 0?void 0:m.call(l,u,r,o)}),g=ur(),b=()=>{o||(i.onValueChange(r),i.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.createElement(Fa,{scope:n,value:r,disabled:o,textId:g,isSelected:c,onItemTextChange:v.useCallback(u=>{y(m=>{var w;return m||((w=u==null?void 0:u.textContent)!==null&&w!==void 0?w:"").trim()})},[])},v.createElement(Gt.ItemSlot,{scope:n,value:r,disabled:o,textValue:p},v.createElement(ye.div,U({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},s,{ref:d,onFocus:ne(s.onFocus,()=>x(!0)),onBlur:ne(s.onBlur,()=>x(!1)),onPointerUp:ne(s.onPointerUp,b),onPointerMove:ne(s.onPointerMove,u=>{if(o){var m;(m=l.onItemLeave)===null||m===void 0||m.call(l)}else u.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ne(s.onPointerLeave,u=>{if(u.currentTarget===document.activeElement){var m;(m=l.onItemLeave)===null||m===void 0||m.call(l)}}),onKeyDown:ne(s.onKeyDown,u=>{var m;((m=l.searchRef)===null||m===void 0?void 0:m.current)!==""&&u.key===" "||($a.includes(u.key)&&b(),u.key===" "&&u.preventDefault())})}))))}),St="SelectItemText",Ua=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,s=Ke(St,n),i=Ge(St,n),l=Pr(St,n),c=Na(St,n),[p,y]=v.useState(null),h=be(t,u=>y(u),l.onItemTextChange,u=>{var m;return(m=i.itemTextRefCallback)===null||m===void 0?void 0:m.call(i,u,l.value,l.disabled)}),x=p==null?void 0:p.textContent,d=v.useMemo(()=>v.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},x),[l.disabled,l.value,x]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=c;return He(()=>(g(d),()=>b(d)),[g,b,d]),v.createElement(v.Fragment,null,v.createElement(ye.span,U({id:l.textId},a,{ref:h})),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?lr.createPortal(a.children,s.valueNode):null)}),qa="SelectItemIndicator",Ka=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Pr(qa,n).isSelected?v.createElement(ye.span,U({"aria-hidden":!0},r,{ref:t})):null}),rr="SelectScrollUpButton",Ga=v.forwardRef((e,t)=>{const n=Ge(rr,e.__scopeSelect),r=Dn(rr,e.__scopeSelect),[o,a]=v.useState(!1),s=be(t,r.onScrollButtonChange);return He(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=i.scrollTop>0;a(c)};const i=n.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?v.createElement(Mr,U({},e,{ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=n;i&&l&&(i.scrollTop=i.scrollTop-l.offsetHeight)}})):null}),or="SelectScrollDownButton",Za=v.forwardRef((e,t)=>{const n=Ge(or,e.__scopeSelect),r=Dn(or,e.__scopeSelect),[o,a]=v.useState(!1),s=be(t,r.onScrollButtonChange);return He(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=i.scrollHeight-i.clientHeight,p=Math.ceil(i.scrollTop)<c;a(p)};const i=n.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?v.createElement(Mr,U({},e,{ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=n;i&&l&&(i.scrollTop=i.scrollTop+l.offsetHeight)}})):null}),Mr=v.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=Ge("SelectScrollButton",n),s=v.useRef(null),i=Zt(n),l=v.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return v.useEffect(()=>()=>l(),[l]),He(()=>{var c;const p=i().find(y=>y.ref.current===document.activeElement);p==null||(c=p.ref.current)===null||c===void 0||c.scrollIntoView({block:"nearest"})},[i]),v.createElement(ye.div,U({"aria-hidden":!0},o,{ref:t,style:{flexShrink:0,...o.style},onPointerDown:ne(o.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:ne(o.onPointerMove,()=>{var c;(c=a.onItemLeave)===null||c===void 0||c.call(a),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:ne(o.onPointerLeave,()=>{l()})}))}),Ya=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return v.createElement(ye.div,U({"aria-hidden":!0},r,{ref:t}))});function _r(e){return e===""||e===void 0}const Ar=v.forwardRef((e,t)=>{const{value:n,...r}=e,o=v.useRef(null),a=be(t,o),s=ya(n);return v.useEffect(()=>{const i=o.current,l=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==n&&p){const y=new Event("change",{bubbles:!0});p.call(i,n),i.dispatchEvent(y)}},[s,n]),v.createElement(fo,{asChild:!0},v.createElement("select",U({},r,{ref:a,defaultValue:n})))});Ar.displayName="BubbleSelect";function Or(e){const t=po(e),n=v.useRef(""),r=v.useRef(0),o=v.useCallback(s=>{const i=n.current+s;t(i),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(i)},[t]),a=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function Dr(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let s=Xa(e,Math.max(a,0));o.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function Xa(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const Qa=ka,Lr=Ra,Ja=Ia,es=Pa,ts=Ma,Br=_a,ns=La,Hr=Va,zr=Wa,rs=Ua,os=Ka,Vr=Ga,Fr=Za,Wr=Ya,as=Qa,ss=Ja,Ur=v.forwardRef(({className:e,children:t,...n},r)=>f.jsxs(Lr,{ref:r,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,f.jsx(es,{asChild:!0,children:f.jsx(dr,{className:"h-4 w-4 opacity-50"})})]}));Ur.displayName=Lr.displayName;const qr=v.forwardRef(({className:e,...t},n)=>f.jsx(Vr,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(Io,{className:"h-4 w-4"})}));qr.displayName=Vr.displayName;const Kr=v.forwardRef(({className:e,...t},n)=>f.jsx(Fr,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(dr,{className:"h-4 w-4"})}));Kr.displayName=Fr.displayName;const Gr=v.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>f.jsx(ts,{children:f.jsxs(Br,{ref:o,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[f.jsx(qr,{}),f.jsx(ns,{className:Q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),f.jsx(Kr,{})]})}));Gr.displayName=Br.displayName;const is=v.forwardRef(({className:e,...t},n)=>f.jsx(Hr,{ref:n,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));is.displayName=Hr.displayName;const Zr=v.forwardRef(({className:e,children:t,...n},r)=>f.jsxs(zr,{ref:r,className:Q("relative flex w-full cursor-default items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(os,{children:f.jsx(To,{className:"h-4 w-4"})})}),f.jsx(rs,{children:t})]}));Zr.displayName=zr.displayName;const cs=v.forwardRef(({className:e,...t},n)=>f.jsx(Wr,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));cs.displayName=Wr.displayName;const ls=()=>{var r;const e=We(go),t=We(vt),n=We(xo);return f.jsxs(as,{value:(r=t.value)==null?void 0:r.name,disabled:e.empty,onValueChange:o=>n(e.value.find(a=>a.name===o)),children:[f.jsx(Ur,{className:"max-w-[250px]",children:f.jsx(ss,{placeholder:"Выберите проект..."})}),f.jsx(Gr,{children:e.value.map(o=>f.jsx(Zr,{value:o.name||"-",children:o.name||"-"},o.name))})]})},us=()=>{const[e,,t]=xt(!1),n=v.useRef(null);return v.useLayoutEffect(()=>{var r;e||(r=n.current)==null||r.reset()},[e]),f.jsxs(Lt,{open:e,onOpenChange:t,children:[f.jsx(Bt,{asChild:!0,children:f.jsx(X,{variant:"outline",size:"icon",className:"shrink-0",children:f.jsx(_o,{className:"h-4 w-4"})})}),f.jsxs(Ht,{className:"sm:max-w-[425px]",children:[f.jsxs(zt,{children:[f.jsx(Vt,{children:"Создание проекта"}),f.jsx(Rn,{children:"Создавай давай"})]}),f.jsxs("form",{ref:n,onSubmit:r=>{r.preventDefault(),r.stopPropagation();const o=n.current,a=Object.fromEntries(new FormData(o));bo({logs:[],rate:0,name:a.name}),o.reset(),t(!1),Ft({type:"success",message:"Проект успешно сделан!"})},children:[f.jsx("div",{className:"grid gap-4 py-4",children:f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(mt,{htmlFor:"name",className:"text-right",children:"Имя"}),f.jsx(nt,{id:"name",name:"name",required:!0,className:"col-span-3"})]})}),f.jsx(Wt,{children:f.jsx(X,{type:"submit",children:"Создать"})})]})]})]})},ds=()=>{const e=qe(yo);return f.jsx(X,{variant:"outline",size:"icon",className:"shrink-0",onClick:e,children:f.jsx(Po,{className:"h-4 w-4"})})},fs=({index:e,onDelete:t})=>{const[n,,r]=xt(!1),[o]=qe([wo]),a=v.useRef(null);return v.useLayoutEffect(()=>{var s;n||(s=a.current)==null||s.reset()},[n]),f.jsxs(Lt,{open:n,onOpenChange:r,children:[f.jsx(Bt,{asChild:!0,children:f.jsx(X,{className:"mt-auto h-5 w-5",size:"icon",variant:"destructive",children:f.jsx(Do,{className:"h-3 w-3"})})}),f.jsxs(Ht,{className:"sm:max-w-[425px]",children:[f.jsxs(zt,{children:[f.jsx(Vt,{children:"Удаление лога"}),f.jsx(Rn,{children:"Нужно подтвердить удаление"})]}),f.jsx("form",{ref:a,onSubmit:s=>{s.preventDefault(),s.stopPropagation();const i=a.current;o({index:e}),i.reset(),t(),r(!1),Ft({type:"success",message:"Лог удалён!"})},children:f.jsxs(Wt,{children:[f.jsx(X,{type:"submit",variant:"destructive",children:"УДАЛИТЬ"}),f.jsx(X,{type:"button",variant:"ghost",onClick:()=>{r(!1)},children:"НЕ НАДО"})]})})]})]})};function ps(e){const t=/(https?:\/\/[-a-zA-Z0-9@:%._\\+~#?&//=]*)/g;return e.replace(t,n=>'<a href="'.concat(n,'" target="_blank" rel="nofollow" class="text-link">').concat(n,"</a>"))}const ms=e=>ps(Co(e)),vs=({log:e,index:t})=>{const[n,r,o]=xt(!1),[a]=qe([$o]),[s,i]=v.useState(e.meta),[l,c]=v.useState(()=>{const p=Xe.parser.msDuration(e.spentTime);return{hours:p.hours,minutes:p.minutes}});return v.useLayoutEffect(()=>{if(!n){const p=Xe.parser.msDuration(e.spentTime);i(e.meta),c({hours:p.hours,minutes:p.minutes})}},[e,n]),f.jsx(f.Fragment,{children:f.jsxs("div",{className:"group relative my-1 select-text","data-active":n||void 0,children:[f.jsx("div",{className:"absolute left-0 top-0 h-full w-1 select-text rounded-sm ".concat(n?"bg-reverse/70":"bg-accent")}),f.jsx("span",{className:"ml-3 select-text text-sm text-foreground/70",children:Xe.format.dateTime(e.startDate,{format:"dddd, D, HH:mm A"})}),f.jsx("span",{className:"ml-1 inline-flex select-text text-sm text-foreground/70 ".concat(n?"mb-1.5":""),children:n?f.jsx(nt,{size:"sm",type:"time",className:"h-6.5 px-1.5 font-semibold text-foreground",value:"".concat(l.hours.toString().padStart(2,"0"),":").concat(l.minutes.toString().padStart(2,"0")),onChange:p=>{const[y,h]=p.target.value.split(":");c({hours:+y||0,minutes:+h||0})}}):f.jsx(f.Fragment,{children:f.jsx("span",{className:"select-text font-semibold text-foreground",children:Xe.format.dateTime(e.spentTime,{format:"time-short",asTime:!0})})})}),n?f.jsx(qt,{className:"ml-3",value:s,onChange:p=>i(p.target.value)}):f.jsx("div",{className:"ml-3 select-text",dangerouslySetInnerHTML:{__html:ms(s)}}),f.jsx("div",{className:"absolute -left-6 top-0 flex flex-col gap-2 opacity-10 group-hover:opacity-100 group-data-[active]:opacity-100",children:n?f.jsxs(f.Fragment,{children:[f.jsx(X,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:r,children:f.jsx(So,{className:"h-3 w-3"})}),f.jsx(X,{size:"icon",variant:"positive",className:"mb-4 h-5 w-5",onClick:()=>{a({...e,meta:s,index:t,spentTime:l.hours*Rt(1,"hour")+l.minutes*Rt(1,"min")}),r()},children:f.jsx(Ao,{className:"h-3 w-3"})}),f.jsx(fs,{index:t,onDelete:()=>o(!1)})]}):f.jsx(f.Fragment,{children:f.jsx(X,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:r,children:f.jsx(Oo,{className:"h-3 w-3"})})})})]})})},hs=()=>{const e=jo(vt.$value,t=>{if(!t)return null;if(!t.logs.length)return[];const n={};return t.logs.slice().map((r,o)=>({...r,index:o})).sort((r,o)=>new Date(o.startDate).getTime()-new Date(r.startDate).getTime()).forEach(r=>{const o=Xe.format.dateTime(r.startDate,{format:"month"});n[o]||(n[o]={label:o,logs:[]}),n[o].logs.push(r)}),Object.values(n)});return e?e.length?f.jsx("div",{className:"max-w-[540px] select-text",children:e.map(t=>f.jsxs("div",{className:"relative select-text py-4",children:[f.jsx("h1",{className:"mb-2 select-text text-lg",children:t.label}),f.jsx("div",{className:"flex select-text flex-col",children:t.logs.map((n,r)=>f.jsx(vs,{log:n,index:n.index},r))})]},t.label))}):f.jsx("div",{className:"my-40 text-center text-2xl text-accent",children:"Нет логов"}):f.jsx("div",{className:"my-40 text-center text-2xl text-accent",children:"Проект не выбран"})},gs=()=>{const e=qe(No);return e?f.jsx("div",{className:"select-text p-1 text-sm font-semibold",children:e}):null},xs=()=>{const e=qe(vt);return e.value?f.jsx(nt,{type:"number",placeholder:"0",className:"max-w-[140px]",value:e.value.rate||"",onChange:t=>{e.update({rate:+t.target.value||0})}}):null},bs=()=>{const[e,,t]=xt(!1),n=v.useRef(null);return v.useLayoutEffect(()=>{var r;e||(r=n.current)==null||r.reset()},[e]),f.jsxs(Lt,{open:e,onOpenChange:t,children:[f.jsx(Bt,{asChild:!0,children:f.jsx(X,{variant:"outline",size:"icon",className:"shrink-0",children:f.jsx(Mo,{className:"h-4 w-4"})})}),f.jsxs(Ht,{className:"sm:max-w-[425px]",children:[f.jsxs(zt,{children:[f.jsx(Vt,{children:"Сброс данных по трекингу"}),f.jsx(Rn,{children:"Все логи по текущему проекту будут удалены"})]}),f.jsx("form",{ref:n,onSubmit:r=>{r.preventDefault(),r.stopPropagation();const o=n.current;vt.update({logs:[]}),o.reset(),t(!1),Ft({type:"success",message:"Всё сброшено!"})},children:f.jsx(Wt,{children:f.jsx(X,{type:"submit",children:"ОК"})})})]})]})},Cs=()=>{const e=qe(Eo);return f.jsx(ko,{className:"flex flex-col",children:f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-row justify-between",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"проект:"}),f.jsxs("div",{className:"flex w-[260px] flex-row gap-2",children:[f.jsx(ls,{}),f.jsx(us,{})]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"ставка:"}),f.jsx(xs,{})]})]}),f.jsx(ha,{className:"mb-6 mr-auto mt-10 w-full"}),e&&f.jsxs("div",{className:"mb-4 flex flex-row justify-end gap-2",children:[f.jsx(bs,{}),f.jsx(ds,{})]}),f.jsx(gs,{}),f.jsx(hs,{})]})})};export{Cs as HomePage,ws as homePageModel};
